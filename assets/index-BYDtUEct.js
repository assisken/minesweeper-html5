(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Yn(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const vt={},Ae=[],te=()=>{},fa=()=>!1,nn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xn=t=>t.startsWith("onUpdate:"),Gt=Object.assign,$n=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},ga=Object.prototype.hasOwnProperty,mt=(t,e)=>ga.call(t,e),ct=Array.isArray,Ci=t=>rn(t)==="[object Map]",pa=t=>rn(t)==="[object Set]",ht=t=>typeof t=="function",Rt=t=>typeof t=="string",Me=t=>typeof t=="symbol",Pt=t=>t!==null&&typeof t=="object",eo=t=>(Pt(t)||ht(t))&&ht(t.then)&&ht(t.catch),_a=Object.prototype.toString,rn=t=>_a.call(t),ma=t=>rn(t).slice(8,-1),ya=t=>rn(t)==="[object Object]",Jn=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wi=Yn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sn=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},va=/-(\w)/g,Yt=sn(t=>t.replace(va,(e,i)=>i?i.toUpperCase():"")),ba=/\B([A-Z])/g,Ce=sn(t=>t.replace(ba,"-$1").toLowerCase()),on=sn(t=>t.charAt(0).toUpperCase()+t.slice(1)),gn=sn(t=>t?`on${on(t)}`:""),fe=(t,e)=>!Object.is(t,e),pn=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},io=(t,e,i,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:i})},Sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Cr;const an=()=>Cr||(Cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qn(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],r=Rt(n)?Pa(n):Qn(n);if(r)for(const s in r)e[s]=r[s]}return e}else if(Rt(t)||Pt(t))return t}const Ca=/;(?![^(]*\))/g,wa=/:([^]+)/,xa=/\/\*[^]*?\*\//g;function Pa(t){const e={};return t.replace(xa,"").split(Ca).forEach(i=>{if(i){const n=i.split(wa);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Zn(t){let e="";if(Rt(t))e=t;else if(ct(t))for(let i=0;i<t.length;i++){const n=Zn(t[i]);n&&(e+=n+" ")}else if(Pt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Ta="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Aa=Yn(Ta);function no(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qt;class Ra{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qt,!e&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=qt;try{return qt=this,e()}finally{qt=i}}}on(){qt=this}off(){qt=this.parent}stop(e){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ea(){return qt}let yt;const _n=new WeakSet;class ro{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qt&&qt.active&&qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_n.has(this)&&(_n.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||oo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wr(this),ao(this);const e=yt,i=Xt;yt=this,Xt=!0;try{return this.fn()}finally{lo(this),yt=e,Xt=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ir(e);this.deps=this.depsTail=void 0,wr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_n.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nn(this)&&this.run()}get dirty(){return Nn(this)}}let so=0,xi,Pi;function oo(t,e=!1){if(t.flags|=8,e){t.next=Pi,Pi=t;return}t.next=xi,xi=t}function tr(){so++}function er(){if(--so>0)return;if(Pi){let e=Pi;for(Pi=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;xi;){let e=xi;for(xi=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=i}}if(t)throw t}function ao(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function lo(t){let e,i=t.depsTail,n=i;for(;n;){const r=n.prevDep;n.version===-1?(n===i&&(i=r),ir(n),Fa(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=i}function Nn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ho(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ho(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mi))return;t.globalVersion=Mi;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Nn(t)){t.flags&=-3;return}const i=yt,n=Xt;yt=t,Xt=!0;try{ao(t);const r=t.fn(t._value);(e.version===0||fe(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{yt=i,Xt=n,lo(t),t.flags&=-3}}function ir(t,e=!1){const{dep:i,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),i.subs===t&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)ir(s,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function Fa(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Xt=!0;const co=[];function ge(){co.push(Xt),Xt=!1}function pe(){const t=co.pop();Xt=t===void 0?!0:t}function wr(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=yt;yt=void 0;try{e()}finally{yt=i}}}let Mi=0;class Ma{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class nr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!yt||!Xt||yt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==yt)i=this.activeLink=new Ma(yt,this),yt.deps?(i.prevDep=yt.depsTail,yt.depsTail.nextDep=i,yt.depsTail=i):yt.deps=yt.depsTail=i,uo(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=yt.depsTail,i.nextDep=void 0,yt.depsTail.nextDep=i,yt.depsTail=i,yt.deps===i&&(yt.deps=n)}return i}trigger(e){this.version++,Mi++,this.notify(e)}notify(e){tr();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{er()}}}function uo(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)uo(n)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Gn=new WeakMap,be=Symbol(""),Ln=Symbol(""),Oi=Symbol("");function kt(t,e,i){if(Xt&&yt){let n=Gn.get(t);n||Gn.set(t,n=new Map);let r=n.get(i);r||(n.set(i,r=new nr),r.map=n,r.key=i),r.track()}}function ae(t,e,i,n,r,s){const o=Gn.get(t);if(!o){Mi++;return}const a=l=>{l&&l.trigger()};if(tr(),e==="clear")o.forEach(a);else{const l=ct(t),d=l&&Jn(i);if(l&&i==="length"){const h=Number(n);o.forEach((_,v)=>{(v==="length"||v===Oi||!Me(v)&&v>=h)&&a(_)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),d&&a(o.get(Oi)),e){case"add":l?d&&a(o.get("length")):(a(o.get(be)),Ci(t)&&a(o.get(Ln)));break;case"delete":l||(a(o.get(be)),Ci(t)&&a(o.get(Ln)));break;case"set":Ci(t)&&a(o.get(be));break}}er()}function we(t){const e=_t(t);return e===t?e:(kt(e,"iterate",Oi),$t(t)?e:e.map(Dt))}function rr(t){return kt(t=_t(t),"iterate",Oi),t}const Oa={__proto__:null,[Symbol.iterator](){return mn(this,Symbol.iterator,Dt)},concat(...t){return we(this).concat(...t.map(e=>ct(e)?we(e):e))},entries(){return mn(this,"entries",t=>(t[1]=Dt(t[1]),t))},every(t,e){return ie(this,"every",t,e,void 0,arguments)},filter(t,e){return ie(this,"filter",t,e,i=>i.map(Dt),arguments)},find(t,e){return ie(this,"find",t,e,Dt,arguments)},findIndex(t,e){return ie(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ie(this,"findLast",t,e,Dt,arguments)},findLastIndex(t,e){return ie(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ie(this,"forEach",t,e,void 0,arguments)},includes(...t){return yn(this,"includes",t)},indexOf(...t){return yn(this,"indexOf",t)},join(t){return we(this).join(t)},lastIndexOf(...t){return yn(this,"lastIndexOf",t)},map(t,e){return ie(this,"map",t,e,void 0,arguments)},pop(){return Oe(this,"pop")},push(...t){return Oe(this,"push",t)},reduce(t,...e){return xr(this,"reduce",t,e)},reduceRight(t,...e){return xr(this,"reduceRight",t,e)},shift(){return Oe(this,"shift")},some(t,e){return ie(this,"some",t,e,void 0,arguments)},splice(...t){return Oe(this,"splice",t)},toReversed(){return we(this).toReversed()},toSorted(t){return we(this).toSorted(t)},toSpliced(...t){return we(this).toSpliced(...t)},unshift(...t){return Oe(this,"unshift",t)},values(){return mn(this,"values",Dt)}};function mn(t,e,i){const n=rr(t),r=n[e]();return n!==t&&!$t(t)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=i(s.value)),s}),r}const ka=Array.prototype;function ie(t,e,i,n,r,s){const o=rr(t),a=o!==t&&!$t(t),l=o[e];if(l!==ka[e]){const _=l.apply(t,s);return a?Dt(_):_}let d=i;o!==t&&(a?d=function(_,v){return i.call(this,Dt(_),v,t)}:i.length>2&&(d=function(_,v){return i.call(this,_,v,t)}));const h=l.call(o,d,n);return a&&r?r(h):h}function xr(t,e,i,n){const r=rr(t);let s=i;return r!==t&&($t(t)?i.length>3&&(s=function(o,a,l){return i.call(this,o,a,l,t)}):s=function(o,a,l){return i.call(this,o,Dt(a),l,t)}),r[e](s,...n)}function yn(t,e,i){const n=_t(t);kt(n,"iterate",Oi);const r=n[e](...i);return(r===-1||r===!1)&&ar(i[0])?(i[0]=_t(i[0]),n[e](...i)):r}function Oe(t,e,i=[]){ge(),tr();const n=_t(t)[e].apply(t,i);return er(),pe(),n}const Na=Yn("__proto__,__v_isRef,__isVue"),fo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Me));function Ga(t){Me(t)||(t=String(t));const e=_t(this);return kt(e,"has",t),e.hasOwnProperty(t)}class go{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){if(i==="__v_skip")return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return s;if(i==="__v_raw")return n===(r?s?ja:yo:s?mo:_o).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=ct(e);if(!r){let l;if(o&&(l=Oa[i]))return l;if(i==="hasOwnProperty")return Ga}const a=Reflect.get(e,i,Nt(e)?e:n);return(Me(i)?fo.has(i):Na(i))||(r||kt(e,"get",i),s)?a:Nt(a)?o&&Jn(i)?a:a.value:Pt(a)?r?vo(a):Di(a):a}}class po extends go{constructor(e=!1){super(!1,e)}set(e,i,n,r){let s=e[i];if(!this._isShallow){const l=Se(s);if(!$t(n)&&!Se(n)&&(s=_t(s),n=_t(n)),!ct(e)&&Nt(s)&&!Nt(n))return l?!1:(s.value=n,!0)}const o=ct(e)&&Jn(i)?Number(i)<e.length:mt(e,i),a=Reflect.set(e,i,n,Nt(e)?e:r);return e===_t(r)&&(o?fe(n,s)&&ae(e,"set",i,n):ae(e,"add",i,n)),a}deleteProperty(e,i){const n=mt(e,i);e[i];const r=Reflect.deleteProperty(e,i);return r&&n&&ae(e,"delete",i,void 0),r}has(e,i){const n=Reflect.has(e,i);return(!Me(i)||!fo.has(i))&&kt(e,"has",i),n}ownKeys(e){return kt(e,"iterate",ct(e)?"length":be),Reflect.ownKeys(e)}}class La extends go{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Da=new po,Ia=new La,Ua=new po(!0);const Dn=t=>t,Vi=t=>Reflect.getPrototypeOf(t);function Ba(t,e,i){return function(...n){const r=this.__v_raw,s=_t(r),o=Ci(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,d=r[t](...n),h=i?Dn:e?In:Dt;return!e&&kt(s,"iterate",l?Ln:be),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:a?[h(_[0]),h(_[1])]:h(_),done:v}},[Symbol.iterator](){return this}}}}function Hi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Va(t,e){const i={get(r){const s=this.__v_raw,o=_t(s),a=_t(r);t||(fe(r,a)&&kt(o,"get",r),kt(o,"get",a));const{has:l}=Vi(o),d=e?Dn:t?In:Dt;if(l.call(o,r))return d(s.get(r));if(l.call(o,a))return d(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!t&&kt(_t(r),"iterate",be),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,o=_t(s),a=_t(r);return t||(fe(r,a)&&kt(o,"has",r),kt(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,l=_t(a),d=e?Dn:t?In:Dt;return!t&&kt(l,"iterate",be),a.forEach((h,_)=>r.call(s,d(h),d(_),o))}};return Gt(i,t?{add:Hi("add"),set:Hi("set"),delete:Hi("delete"),clear:Hi("clear")}:{add(r){!e&&!$t(r)&&!Se(r)&&(r=_t(r));const s=_t(this);return Vi(s).has.call(s,r)||(s.add(r),ae(s,"add",r,r)),this},set(r,s){!e&&!$t(s)&&!Se(s)&&(s=_t(s));const o=_t(this),{has:a,get:l}=Vi(o);let d=a.call(o,r);d||(r=_t(r),d=a.call(o,r));const h=l.call(o,r);return o.set(r,s),d?fe(s,h)&&ae(o,"set",r,s):ae(o,"add",r,s),this},delete(r){const s=_t(this),{has:o,get:a}=Vi(s);let l=o.call(s,r);l||(r=_t(r),l=o.call(s,r)),a&&a.call(s,r);const d=s.delete(r);return l&&ae(s,"delete",r,void 0),d},clear(){const r=_t(this),s=r.size!==0,o=r.clear();return s&&ae(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=Ba(r,t,e)}),i}function sr(t,e){const i=Va(t,e);return(n,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(mt(i,r)&&r in n?i:n,r,s)}const Ha={get:sr(!1,!1)},Wa={get:sr(!1,!0)},qa={get:sr(!0,!1)};const _o=new WeakMap,mo=new WeakMap,yo=new WeakMap,ja=new WeakMap;function Ka(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function za(t){return t.__v_skip||!Object.isExtensible(t)?0:Ka(ma(t))}function Di(t){return Se(t)?t:or(t,!1,Da,Ha,_o)}function Ya(t){return or(t,!1,Ua,Wa,mo)}function vo(t){return or(t,!0,Ia,qa,yo)}function or(t,e,i,n,r){if(!Pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const o=za(t);if(o===0)return t;const a=new Proxy(t,o===2?n:i);return r.set(t,a),a}function Ti(t){return Se(t)?Ti(t.__v_raw):!!(t&&t.__v_isReactive)}function Se(t){return!!(t&&t.__v_isReadonly)}function $t(t){return!!(t&&t.__v_isShallow)}function ar(t){return t?!!t.__v_raw:!1}function _t(t){const e=t&&t.__v_raw;return e?_t(e):t}function Xa(t){return!mt(t,"__v_skip")&&Object.isExtensible(t)&&io(t,"__v_skip",!0),t}const Dt=t=>Pt(t)?Di(t):t,In=t=>Pt(t)?vo(t):t;function Nt(t){return t?t.__v_isRef===!0:!1}function $a(t){return Ja(t,!1)}function Ja(t,e){return Nt(t)?t:new Qa(t,e)}class Qa{constructor(e,i){this.dep=new nr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:_t(e),this._value=i?e:Dt(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,n=this.__v_isShallow||$t(e)||Se(e);e=n?e:_t(e),fe(e,i)&&(this._rawValue=e,this._value=n?e:Dt(e),this.dep.trigger())}}function Za(t){return Nt(t)?t.value:t}const tl={get:(t,e,i)=>e==="__v_raw"?t:Za(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const r=t[e];return Nt(r)&&!Nt(i)?(r.value=i,!0):Reflect.set(t,e,i,n)}};function bo(t){return Ti(t)?t:new Proxy(t,tl)}class el{constructor(e,i,n){this.fn=e,this.setter=i,this._value=void 0,this.dep=new nr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&yt!==this)return oo(this,!0),!0}get value(){const e=this.dep.track();return ho(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function il(t,e,i=!1){let n,r;return ht(t)?n=t:(n=t.get,r=t.set),new el(n,r,i)}const Wi={},Yi=new WeakMap;let ve;function nl(t,e=!1,i=ve){if(i){let n=Yi.get(i);n||Yi.set(i,n=[]),n.push(t)}}function rl(t,e,i=vt){const{immediate:n,deep:r,once:s,scheduler:o,augmentJob:a,call:l}=i,d=m=>r?m:$t(m)||r===!1||r===0?ue(m,1):ue(m);let h,_,v,g,f=!1,y=!1;if(Nt(t)?(_=()=>t.value,f=$t(t)):Ti(t)?(_=()=>d(t),f=!0):ct(t)?(y=!0,f=t.some(m=>Ti(m)||$t(m)),_=()=>t.map(m=>{if(Nt(m))return m.value;if(Ti(m))return d(m);if(ht(m))return l?l(m,2):m()})):ht(t)?e?_=l?()=>l(t,2):t:_=()=>{if(v){ge();try{v()}finally{pe()}}const m=ve;ve=h;try{return l?l(t,3,[g]):t(g)}finally{ve=m}}:_=te,e&&r){const m=_,C=r===!0?1/0:r;_=()=>ue(m(),C)}const S=Ea(),P=()=>{h.stop(),S&&S.active&&$n(S.effects,h)};if(s&&e){const m=e;e=(...C)=>{m(...C),P()}}let u=y?new Array(t.length).fill(Wi):Wi;const c=m=>{if(!(!(h.flags&1)||!h.dirty&&!m))if(e){const C=h.run();if(r||f||(y?C.some((A,G)=>fe(A,u[G])):fe(C,u))){v&&v();const A=ve;ve=h;try{const G=[C,u===Wi?void 0:y&&u[0]===Wi?[]:u,g];l?l(e,3,G):e(...G),u=C}finally{ve=A}}}else h.run()};return a&&a(c),h=new ro(_),h.scheduler=o?()=>o(c,!1):c,g=m=>nl(m,!1,h),v=h.onStop=()=>{const m=Yi.get(h);if(m){if(l)l(m,4);else for(const C of m)C();Yi.delete(h)}},e?n?c(!0):u=h.run():o?o(c.bind(null,!0),!0):h.run(),P.pause=h.pause.bind(h),P.resume=h.resume.bind(h),P.stop=P,P}function ue(t,e=1/0,i){if(e<=0||!Pt(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,Nt(t))ue(t.value,e,i);else if(ct(t))for(let n=0;n<t.length;n++)ue(t[n],e,i);else if(pa(t)||Ci(t))t.forEach(n=>{ue(n,e,i)});else if(ya(t)){for(const n in t)ue(t[n],e,i);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ue(t[n],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ii(t,e,i,n){try{return n?t(...n):t()}catch(r){ln(r,e,i)}}function ee(t,e,i,n){if(ht(t)){const r=Ii(t,e,i,n);return r&&eo(r)&&r.catch(s=>{ln(s,e,i)}),r}if(ct(t)){const r=[];for(let s=0;s<t.length;s++)r.push(ee(t[s],e,i,n));return r}}function ln(t,e,i,n=!0){const r=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||vt;if(e){let a=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let _=0;_<h.length;_++)if(h[_](t,l,d)===!1)return}a=a.parent}if(s){ge(),Ii(s,null,10,[t,l,d]),pe();return}}sl(t,i,r,n,o)}function sl(t,e,i,n=!0,r=!1){if(r)throw t;console.error(t)}const It=[];let Qt=-1;const Re=[];let ce=null,Pe=0;const So=Promise.resolve();let Xi=null;function ol(t){const e=Xi||So;return t?e.then(this?t.bind(this):t):e}function al(t){let e=Qt+1,i=It.length;for(;e<i;){const n=e+i>>>1,r=It[n],s=ki(r);s<t||s===t&&r.flags&2?e=n+1:i=n}return e}function lr(t){if(!(t.flags&1)){const e=ki(t),i=It[It.length-1];!i||!(t.flags&2)&&e>=ki(i)?It.push(t):It.splice(al(e),0,t),t.flags|=1,Co()}}function Co(){Xi||(Xi=So.then(xo))}function ll(t){ct(t)?Re.push(...t):ce&&t.id===-1?ce.splice(Pe+1,0,t):t.flags&1||(Re.push(t),t.flags|=1),Co()}function Pr(t,e,i=Qt+1){for(;i<It.length;i++){const n=It[i];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;It.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function wo(t){if(Re.length){const e=[...new Set(Re)].sort((i,n)=>ki(i)-ki(n));if(Re.length=0,ce){ce.push(...e);return}for(ce=e,Pe=0;Pe<ce.length;Pe++){const i=ce[Pe];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}ce=null,Pe=0}}const ki=t=>t.id==null?t.flags&2?-1:1/0:t.id;function xo(t){try{for(Qt=0;Qt<It.length;Qt++){const e=It[Qt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ii(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Qt<It.length;Qt++){const e=It[Qt];e&&(e.flags&=-2)}Qt=-1,It.length=0,wo(),Xi=null,(It.length||Re.length)&&xo()}}let zt=null,Po=null;function $i(t){const e=zt;return zt=t,Po=t&&t.type.__scopeId||null,e}function Un(t,e=zt,i){if(!e||t._n)return t;const n=(...r)=>{n._d&&Gr(-1);const s=$i(e);let o;try{o=t(...r)}finally{$i(s),n._d&&Gr(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function _e(t,e,i,n){const r=t.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(ge(),ee(l,i,8,[t.el,a,t,e]),pe())}}const hl=Symbol("_vte"),cl=t=>t.__isTeleport;function hr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,hr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ui(t,e){return ht(t)?Gt({name:t.name},e,{setup:t}):t}function To(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ji(t,e,i,n,r=!1){if(ct(t)){t.forEach((f,y)=>Ji(f,e&&(ct(e)?e[y]:e),i,n,r));return}if(Ai(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ji(t,e,i,n.component.subTree);return}const s=n.shapeFlag&4?_r(n.component):n.el,o=r?null:s,{i:a,r:l}=t,d=e&&e.r,h=a.refs===vt?a.refs={}:a.refs,_=a.setupState,v=_t(_),g=_===vt?()=>!1:f=>mt(v,f);if(d!=null&&d!==l&&(Rt(d)?(h[d]=null,g(d)&&(_[d]=null)):Nt(d)&&(d.value=null)),ht(l))Ii(l,a,12,[o,h]);else{const f=Rt(l),y=Nt(l);if(f||y){const S=()=>{if(t.f){const P=f?g(l)?_[l]:h[l]:l.value;r?ct(P)&&$n(P,s):ct(P)?P.includes(s)||P.push(s):f?(h[l]=[s],g(l)&&(_[l]=h[l])):(l.value=[s],t.k&&(h[t.k]=l.value))}else f?(h[l]=o,g(l)&&(_[l]=o)):y&&(l.value=o,t.k&&(h[t.k]=o))};o?(S.id=-1,Wt(S,i)):S()}}}an().requestIdleCallback;an().cancelIdleCallback;const Ai=t=>!!t.type.__asyncLoader,Ao=t=>t.type.__isKeepAlive;function dl(t,e){Ro(t,"a",e)}function ul(t,e){Ro(t,"da",e)}function Ro(t,e,i=Ot){const n=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(hn(e,n,i),i){let r=i.parent;for(;r&&r.parent;)Ao(r.parent.vnode)&&fl(n,e,i,r),r=r.parent}}function fl(t,e,i,n){const r=hn(e,t,n,!0);ur(()=>{$n(n[e],r)},i)}function hn(t,e,i=Ot,n=!1){if(i){const r=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...o)=>{ge();const a=Bi(i),l=ee(e,i,t,o);return a(),pe(),l});return n?r.unshift(s):r.push(s),s}}const le=t=>(e,i=Ot)=>{(!Li||t==="sp")&&hn(t,(...n)=>e(...n),i)},gl=le("bm"),cr=le("m"),pl=le("bu"),dr=le("u"),Eo=le("bum"),ur=le("um"),_l=le("sp"),ml=le("rtg"),yl=le("rtc");function vl(t,e=Ot){hn("ec",t,e)}const bl="components";function Bn(t,e){return Cl(bl,t,!0,e)||t}const Sl=Symbol.for("v-ndc");function Cl(t,e,i=!0,n=!1){const r=zt||Ot;if(r){const s=r.type;{const a=dh(s,!1);if(a&&(a===e||a===Yt(e)||a===on(Yt(e))))return s}const o=Tr(r[t]||s[t],e)||Tr(r.appContext[t],e);return!o&&n?s:o}}function Tr(t,e){return t&&(t[e]||t[Yt(e)]||t[on(Yt(e))])}const Vn=t=>t?Zo(t)?_r(t):Vn(t.parent):null,Ri=Gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vn(t.parent),$root:t=>Vn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Mo(t),$forceUpdate:t=>t.f||(t.f=()=>{lr(t.update)}),$nextTick:t=>t.n||(t.n=ol.bind(t.proxy)),$watch:t=>ql.bind(t)}),vn=(t,e)=>t!==vt&&!t.__isScriptSetup&&mt(t,e),wl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=t;let d;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return n[e];case 2:return r[e];case 4:return i[e];case 3:return s[e]}else{if(vn(n,e))return o[e]=1,n[e];if(r!==vt&&mt(r,e))return o[e]=2,r[e];if((d=t.propsOptions[0])&&mt(d,e))return o[e]=3,s[e];if(i!==vt&&mt(i,e))return o[e]=4,i[e];Hn&&(o[e]=0)}}const h=Ri[e];let _,v;if(h)return e==="$attrs"&&kt(t.attrs,"get",""),h(t);if((_=a.__cssModules)&&(_=_[e]))return _;if(i!==vt&&mt(i,e))return o[e]=4,i[e];if(v=l.config.globalProperties,mt(v,e))return v[e]},set({_:t},e,i){const{data:n,setupState:r,ctx:s}=t;return vn(r,e)?(r[e]=i,!0):n!==vt&&mt(n,e)?(n[e]=i,!0):mt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:r,propsOptions:s}},o){let a;return!!i[o]||t!==vt&&mt(t,o)||vn(e,o)||(a=s[0])&&mt(a,o)||mt(n,o)||mt(Ri,o)||mt(r.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:mt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Ar(t){return ct(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Hn=!0;function xl(t){const e=Mo(t),i=t.proxy,n=t.ctx;Hn=!1,e.beforeCreate&&Rr(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:d,created:h,beforeMount:_,mounted:v,beforeUpdate:g,updated:f,activated:y,deactivated:S,beforeDestroy:P,beforeUnmount:u,destroyed:c,unmounted:m,render:C,renderTracked:A,renderTriggered:G,errorCaptured:R,serverPrefetch:T,expose:x,inheritAttrs:M,components:L,directives:p,filters:w}=e;if(d&&Pl(d,n,null),o)for(const O in o){const D=o[O];ht(D)&&(n[O]=D.bind(i))}if(r){const O=r.call(i,i);Pt(O)&&(t.data=Di(O))}if(Hn=!0,s)for(const O in s){const D=s[O],H=ht(D)?D.bind(i,i):ht(D.get)?D.get.bind(i,i):te,U=!ht(D)&&ht(D.set)?D.set.bind(i):te,K=fh({get:H,set:U});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>K.value,set:tt=>K.value=tt})}if(a)for(const O in a)Fo(a[O],n,i,O);if(l){const O=ht(l)?l.call(i):l;Reflect.ownKeys(O).forEach(D=>{Ml(D,O[D])})}h&&Rr(h,t,"c");function E(O,D){ct(D)?D.forEach(H=>O(H.bind(i))):D&&O(D.bind(i))}if(E(gl,_),E(cr,v),E(pl,g),E(dr,f),E(dl,y),E(ul,S),E(vl,R),E(yl,A),E(ml,G),E(Eo,u),E(ur,m),E(_l,T),ct(x))if(x.length){const O=t.exposed||(t.exposed={});x.forEach(D=>{Object.defineProperty(O,D,{get:()=>i[D],set:H=>i[D]=H})})}else t.exposed||(t.exposed={});C&&t.render===te&&(t.render=C),M!=null&&(t.inheritAttrs=M),L&&(t.components=L),p&&(t.directives=p),T&&To(t)}function Pl(t,e,i=te){ct(t)&&(t=Wn(t));for(const n in t){const r=t[n];let s;Pt(r)?"default"in r?s=qi(r.from||n,r.default,!0):s=qi(r.from||n):s=qi(r),Nt(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function Rr(t,e,i){ee(ct(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Fo(t,e,i,n){let r=n.includes(".")?jo(i,n):()=>i[n];if(Rt(t)){const s=e[t];ht(s)&&Ei(r,s)}else if(ht(t))Ei(r,t.bind(i));else if(Pt(t))if(ct(t))t.forEach(s=>Fo(s,e,i,n));else{const s=ht(t.handler)?t.handler.bind(i):e[t.handler];ht(s)&&Ei(r,s,t)}}function Mo(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!i&&!n?l=e:(l={},r.length&&r.forEach(d=>Qi(l,d,o,!0)),Qi(l,e,o)),Pt(e)&&s.set(e,l),l}function Qi(t,e,i,n=!1){const{mixins:r,extends:s}=e;s&&Qi(t,s,i,!0),r&&r.forEach(o=>Qi(t,o,i,!0));for(const o in e)if(!(n&&o==="expose")){const a=Tl[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Tl={data:Er,props:Fr,emits:Fr,methods:Si,computed:Si,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Si,directives:Si,watch:Rl,provide:Er,inject:Al};function Er(t,e){return e?t?function(){return Gt(ht(t)?t.call(this,this):t,ht(e)?e.call(this,this):e)}:e:t}function Al(t,e){return Si(Wn(t),Wn(e))}function Wn(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Si(t,e){return t?Gt(Object.create(null),t,e):e}function Fr(t,e){return t?ct(t)&&ct(e)?[...new Set([...t,...e])]:Gt(Object.create(null),Ar(t),Ar(e??{})):e}function Rl(t,e){if(!t)return e;if(!e)return t;const i=Gt(Object.create(null),t);for(const n in e)i[n]=Lt(t[n],e[n]);return i}function Oo(){return{app:null,config:{isNativeTag:fa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let El=0;function Fl(t,e){return function(n,r=null){ht(n)||(n=Gt({},n)),r!=null&&!Pt(r)&&(r=null);const s=Oo(),o=new WeakSet,a=[];let l=!1;const d=s.app={_uid:El++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:gh,get config(){return s.config},set config(h){},use(h,..._){return o.has(h)||(h&&ht(h.install)?(o.add(h),h.install(d,..._)):ht(h)&&(o.add(h),h(d,..._))),d},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),d},component(h,_){return _?(s.components[h]=_,d):s.components[h]},directive(h,_){return _?(s.directives[h]=_,d):s.directives[h]},mount(h,_,v){if(!l){const g=d._ceVNode||Ut(n,r);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),t(g,h,v),l=!0,d._container=h,h.__vue_app__=d,_r(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ee(a,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(h,_){return s.provides[h]=_,d},runWithContext(h){const _=Ee;Ee=d;try{return h()}finally{Ee=_}}};return d}}let Ee=null;function Ml(t,e){if(Ot){let i=Ot.provides;const n=Ot.parent&&Ot.parent.provides;n===i&&(i=Ot.provides=Object.create(n)),i[t]=e}}function qi(t,e,i=!1){const n=Ot||zt;if(n||Ee){const r=Ee?Ee._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return i&&ht(e)?e.call(n&&n.proxy):e}}const ko={},No=()=>Object.create(ko),Go=t=>Object.getPrototypeOf(t)===ko;function Ol(t,e,i,n=!1){const r={},s=No();t.propsDefaults=Object.create(null),Lo(t,e,r,s);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);i?t.props=n?r:Ya(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function kl(t,e,i,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=t,a=_t(r),[l]=t.propsOptions;let d=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let _=0;_<h.length;_++){let v=h[_];if(cn(t.emitsOptions,v))continue;const g=e[v];if(l)if(mt(s,v))g!==s[v]&&(s[v]=g,d=!0);else{const f=Yt(v);r[f]=qn(l,a,f,g,t,!1)}else g!==s[v]&&(s[v]=g,d=!0)}}}else{Lo(t,e,r,s)&&(d=!0);let h;for(const _ in a)(!e||!mt(e,_)&&((h=Ce(_))===_||!mt(e,h)))&&(l?i&&(i[_]!==void 0||i[h]!==void 0)&&(r[_]=qn(l,a,_,void 0,t,!0)):delete r[_]);if(s!==a)for(const _ in s)(!e||!mt(e,_))&&(delete s[_],d=!0)}d&&ae(t.attrs,"set","")}function Lo(t,e,i,n){const[r,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(wi(l))continue;const d=e[l];let h;r&&mt(r,h=Yt(l))?!s||!s.includes(h)?i[h]=d:(a||(a={}))[h]=d:cn(t.emitsOptions,l)||(!(l in n)||d!==n[l])&&(n[l]=d,o=!0)}if(s){const l=_t(i),d=a||vt;for(let h=0;h<s.length;h++){const _=s[h];i[_]=qn(r,l,_,d[_],t,!mt(d,_))}}return o}function qn(t,e,i,n,r,s){const o=t[i];if(o!=null){const a=mt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ht(l)){const{propsDefaults:d}=r;if(i in d)n=d[i];else{const h=Bi(r);n=d[i]=l.call(null,e),h()}}else n=l;r.ce&&r.ce._setProp(i,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Ce(i))&&(n=!0))}return n}const Nl=new WeakMap;function Do(t,e,i=!1){const n=i?Nl:e.propsCache,r=n.get(t);if(r)return r;const s=t.props,o={},a=[];let l=!1;if(!ht(t)){const h=_=>{l=!0;const[v,g]=Do(_,e,!0);Gt(o,v),g&&a.push(...g)};!i&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return Pt(t)&&n.set(t,Ae),Ae;if(ct(s))for(let h=0;h<s.length;h++){const _=Yt(s[h]);Mr(_)&&(o[_]=vt)}else if(s)for(const h in s){const _=Yt(h);if(Mr(_)){const v=s[h],g=o[_]=ct(v)||ht(v)?{type:v}:Gt({},v),f=g.type;let y=!1,S=!0;if(ct(f))for(let P=0;P<f.length;++P){const u=f[P],c=ht(u)&&u.name;if(c==="Boolean"){y=!0;break}else c==="String"&&(S=!1)}else y=ht(f)&&f.name==="Boolean";g[0]=y,g[1]=S,(y||mt(g,"default"))&&a.push(_)}}const d=[o,a];return Pt(t)&&n.set(t,d),d}function Mr(t){return t[0]!=="$"&&!wi(t)}const Io=t=>t[0]==="_"||t==="$stable",fr=t=>ct(t)?t.map(Zt):[Zt(t)],Gl=(t,e,i)=>{if(e._n)return e;const n=Un((...r)=>fr(e(...r)),i);return n._c=!1,n},Uo=(t,e,i)=>{const n=t._ctx;for(const r in t){if(Io(r))continue;const s=t[r];if(ht(s))e[r]=Gl(r,s,n);else if(s!=null){const o=fr(s);e[r]=()=>o}}},Bo=(t,e)=>{const i=fr(e);t.slots.default=()=>i},Vo=(t,e,i)=>{for(const n in e)(i||n!=="_")&&(t[n]=e[n])},Ll=(t,e,i)=>{const n=t.slots=No();if(t.vnode.shapeFlag&32){const r=e._;r?(Vo(n,e,i),i&&io(n,"_",r,!0)):Uo(e,n)}else e&&Bo(t,e)},Dl=(t,e,i)=>{const{vnode:n,slots:r}=t;let s=!0,o=vt;if(n.shapeFlag&32){const a=e._;a?i&&a===1?s=!1:Vo(r,e,i):(s=!e.$stable,Uo(e,r)),o=e}else e&&(Bo(t,e),o={default:1});if(s)for(const a in r)!Io(a)&&o[a]==null&&delete r[a]},Wt=Jl;function Il(t){return Ul(t)}function Ul(t,e){const i=an();i.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:d,setElementText:h,parentNode:_,nextSibling:v,setScopeId:g=te,insertStaticContent:f}=t,y=(F,k,I,V=null,j=null,q=null,Y=void 0,Z=null,$=!!k.dynamicChildren)=>{if(F===k)return;F&&!ke(F,k)&&(V=N(F),tt(F,j,q,!0),F=null),k.patchFlag===-2&&($=!1,k.dynamicChildren=null);const{type:z,ref:it,shapeFlag:et}=k;switch(z){case dn:S(F,k,I,V);break;case Ni:P(F,k,I,V);break;case Sn:F==null&&u(k,I,V,Y);break;case oe:L(F,k,I,V,j,q,Y,Z,$);break;default:et&1?C(F,k,I,V,j,q,Y,Z,$):et&6?p(F,k,I,V,j,q,Y,Z,$):(et&64||et&128)&&z.process(F,k,I,V,j,q,Y,Z,$,Q)}it!=null&&j&&Ji(it,F&&F.ref,q,k||F,!k)},S=(F,k,I,V)=>{if(F==null)n(k.el=a(k.children),I,V);else{const j=k.el=F.el;k.children!==F.children&&d(j,k.children)}},P=(F,k,I,V)=>{F==null?n(k.el=l(k.children||""),I,V):k.el=F.el},u=(F,k,I,V)=>{[F.el,F.anchor]=f(F.children,k,I,V,F.el,F.anchor)},c=({el:F,anchor:k},I,V)=>{let j;for(;F&&F!==k;)j=v(F),n(F,I,V),F=j;n(k,I,V)},m=({el:F,anchor:k})=>{let I;for(;F&&F!==k;)I=v(F),r(F),F=I;r(k)},C=(F,k,I,V,j,q,Y,Z,$)=>{k.type==="svg"?Y="svg":k.type==="math"&&(Y="mathml"),F==null?A(k,I,V,j,q,Y,Z,$):T(F,k,j,q,Y,Z,$)},A=(F,k,I,V,j,q,Y,Z)=>{let $,z;const{props:it,shapeFlag:et,transition:ot,dirs:at}=F;if($=F.el=o(F.type,q,it&&it.is,it),et&8?h($,F.children):et&16&&R(F.children,$,null,V,j,bn(F,q),Y,Z),at&&_e(F,null,V,"created"),G($,F,F.scopeId,Y,V),it){for(const pt in it)pt!=="value"&&!wi(pt)&&s($,pt,null,it[pt],q,V);"value"in it&&s($,"value",null,it.value,q),(z=it.onVnodeBeforeMount)&&Jt(z,V,F)}at&&_e(F,null,V,"beforeMount");const lt=Bl(j,ot);lt&&ot.beforeEnter($),n($,k,I),((z=it&&it.onVnodeMounted)||lt||at)&&Wt(()=>{z&&Jt(z,V,F),lt&&ot.enter($),at&&_e(F,null,V,"mounted")},j)},G=(F,k,I,V,j)=>{if(I&&g(F,I),V)for(let q=0;q<V.length;q++)g(F,V[q]);if(j){let q=j.subTree;if(k===q||zo(q.type)&&(q.ssContent===k||q.ssFallback===k)){const Y=j.vnode;G(F,Y,Y.scopeId,Y.slotScopeIds,j.parent)}}},R=(F,k,I,V,j,q,Y,Z,$=0)=>{for(let z=$;z<F.length;z++){const it=F[z]=Z?de(F[z]):Zt(F[z]);y(null,it,k,I,V,j,q,Y,Z)}},T=(F,k,I,V,j,q,Y)=>{const Z=k.el=F.el;let{patchFlag:$,dynamicChildren:z,dirs:it}=k;$|=F.patchFlag&16;const et=F.props||vt,ot=k.props||vt;let at;if(I&&me(I,!1),(at=ot.onVnodeBeforeUpdate)&&Jt(at,I,k,F),it&&_e(k,F,I,"beforeUpdate"),I&&me(I,!0),(et.innerHTML&&ot.innerHTML==null||et.textContent&&ot.textContent==null)&&h(Z,""),z?x(F.dynamicChildren,z,Z,I,V,bn(k,j),q):Y||D(F,k,Z,null,I,V,bn(k,j),q,!1),$>0){if($&16)M(Z,et,ot,I,j);else if($&2&&et.class!==ot.class&&s(Z,"class",null,ot.class,j),$&4&&s(Z,"style",et.style,ot.style,j),$&8){const lt=k.dynamicProps;for(let pt=0;pt<lt.length;pt++){const dt=lt[pt],xt=et[dt],St=ot[dt];(St!==xt||dt==="value")&&s(Z,dt,xt,St,j,I)}}$&1&&F.children!==k.children&&h(Z,k.children)}else!Y&&z==null&&M(Z,et,ot,I,j);((at=ot.onVnodeUpdated)||it)&&Wt(()=>{at&&Jt(at,I,k,F),it&&_e(k,F,I,"updated")},V)},x=(F,k,I,V,j,q,Y)=>{for(let Z=0;Z<k.length;Z++){const $=F[Z],z=k[Z],it=$.el&&($.type===oe||!ke($,z)||$.shapeFlag&70)?_($.el):I;y($,z,it,null,V,j,q,Y,!0)}},M=(F,k,I,V,j)=>{if(k!==I){if(k!==vt)for(const q in k)!wi(q)&&!(q in I)&&s(F,q,k[q],null,j,V);for(const q in I){if(wi(q))continue;const Y=I[q],Z=k[q];Y!==Z&&q!=="value"&&s(F,q,Z,Y,j,V)}"value"in I&&s(F,"value",k.value,I.value,j)}},L=(F,k,I,V,j,q,Y,Z,$)=>{const z=k.el=F?F.el:a(""),it=k.anchor=F?F.anchor:a("");let{patchFlag:et,dynamicChildren:ot,slotScopeIds:at}=k;at&&(Z=Z?Z.concat(at):at),F==null?(n(z,I,V),n(it,I,V),R(k.children||[],I,it,j,q,Y,Z,$)):et>0&&et&64&&ot&&F.dynamicChildren?(x(F.dynamicChildren,ot,I,j,q,Y,Z),(k.key!=null||j&&k===j.subTree)&&Ho(F,k,!0)):D(F,k,I,it,j,q,Y,Z,$)},p=(F,k,I,V,j,q,Y,Z,$)=>{k.slotScopeIds=Z,F==null?k.shapeFlag&512?j.ctx.activate(k,I,V,Y,$):w(k,I,V,j,q,Y,$):b(F,k,$)},w=(F,k,I,V,j,q,Y)=>{const Z=F.component=oh(F,V,j);if(Ao(F)&&(Z.ctx.renderer=Q),ah(Z,!1,Y),Z.asyncDep){if(j&&j.registerDep(Z,E,Y),!F.el){const $=Z.subTree=Ut(Ni);P(null,$,k,I)}}else E(Z,F,k,I,j,q,Y)},b=(F,k,I)=>{const V=k.component=F.component;if(Xl(F,k,I))if(V.asyncDep&&!V.asyncResolved){O(V,k,I);return}else V.next=k,V.update();else k.el=F.el,V.vnode=k},E=(F,k,I,V,j,q,Y)=>{const Z=()=>{if(F.isMounted){let{next:et,bu:ot,u:at,parent:lt,vnode:pt}=F;{const Ct=Wo(F);if(Ct){et&&(et.el=pt.el,O(F,et,Y)),Ct.asyncDep.then(()=>{F.isUnmounted||Z()});return}}let dt=et,xt;me(F,!1),et?(et.el=pt.el,O(F,et,Y)):et=pt,ot&&pn(ot),(xt=et.props&&et.props.onVnodeBeforeUpdate)&&Jt(xt,lt,et,pt),me(F,!0);const St=kr(F),At=F.subTree;F.subTree=St,y(At,St,_(At.el),N(At),F,j,q),et.el=St.el,dt===null&&$l(F,St.el),at&&Wt(at,j),(xt=et.props&&et.props.onVnodeUpdated)&&Wt(()=>Jt(xt,lt,et,pt),j)}else{let et;const{el:ot,props:at}=k,{bm:lt,m:pt,parent:dt,root:xt,type:St}=F,At=Ai(k);me(F,!1),lt&&pn(lt),!At&&(et=at&&at.onVnodeBeforeMount)&&Jt(et,dt,k),me(F,!0);{xt.ce&&xt.ce._injectChildStyle(St);const Ct=F.subTree=kr(F);y(null,Ct,I,V,F,j,q),k.el=Ct.el}if(pt&&Wt(pt,j),!At&&(et=at&&at.onVnodeMounted)){const Ct=k;Wt(()=>Jt(et,dt,Ct),j)}(k.shapeFlag&256||dt&&Ai(dt.vnode)&&dt.vnode.shapeFlag&256)&&F.a&&Wt(F.a,j),F.isMounted=!0,k=I=V=null}};F.scope.on();const $=F.effect=new ro(Z);F.scope.off();const z=F.update=$.run.bind($),it=F.job=$.runIfDirty.bind($);it.i=F,it.id=F.uid,$.scheduler=()=>lr(it),me(F,!0),z()},O=(F,k,I)=>{k.component=F;const V=F.vnode.props;F.vnode=k,F.next=null,kl(F,k.props,V,I),Dl(F,k.children,I),ge(),Pr(F),pe()},D=(F,k,I,V,j,q,Y,Z,$=!1)=>{const z=F&&F.children,it=F?F.shapeFlag:0,et=k.children,{patchFlag:ot,shapeFlag:at}=k;if(ot>0){if(ot&128){U(z,et,I,V,j,q,Y,Z,$);return}else if(ot&256){H(z,et,I,V,j,q,Y,Z,$);return}}at&8?(it&16&&rt(z,j,q),et!==z&&h(I,et)):it&16?at&16?U(z,et,I,V,j,q,Y,Z,$):rt(z,j,q,!0):(it&8&&h(I,""),at&16&&R(et,I,V,j,q,Y,Z,$))},H=(F,k,I,V,j,q,Y,Z,$)=>{F=F||Ae,k=k||Ae;const z=F.length,it=k.length,et=Math.min(z,it);let ot;for(ot=0;ot<et;ot++){const at=k[ot]=$?de(k[ot]):Zt(k[ot]);y(F[ot],at,I,null,j,q,Y,Z,$)}z>it?rt(F,j,q,!0,!1,et):R(k,I,V,j,q,Y,Z,$,et)},U=(F,k,I,V,j,q,Y,Z,$)=>{let z=0;const it=k.length;let et=F.length-1,ot=it-1;for(;z<=et&&z<=ot;){const at=F[z],lt=k[z]=$?de(k[z]):Zt(k[z]);if(ke(at,lt))y(at,lt,I,null,j,q,Y,Z,$);else break;z++}for(;z<=et&&z<=ot;){const at=F[et],lt=k[ot]=$?de(k[ot]):Zt(k[ot]);if(ke(at,lt))y(at,lt,I,null,j,q,Y,Z,$);else break;et--,ot--}if(z>et){if(z<=ot){const at=ot+1,lt=at<it?k[at].el:V;for(;z<=ot;)y(null,k[z]=$?de(k[z]):Zt(k[z]),I,lt,j,q,Y,Z,$),z++}}else if(z>ot)for(;z<=et;)tt(F[z],j,q,!0),z++;else{const at=z,lt=z,pt=new Map;for(z=lt;z<=ot;z++){const Mt=k[z]=$?de(k[z]):Zt(k[z]);Mt.key!=null&&pt.set(Mt.key,z)}let dt,xt=0;const St=ot-lt+1;let At=!1,Ct=0;const Ft=new Array(St);for(z=0;z<St;z++)Ft[z]=0;for(z=at;z<=et;z++){const Mt=F[z];if(xt>=St){tt(Mt,j,q,!0);continue}let Kt;if(Mt.key!=null)Kt=pt.get(Mt.key);else for(dt=lt;dt<=ot;dt++)if(Ft[dt-lt]===0&&ke(Mt,k[dt])){Kt=dt;break}Kt===void 0?tt(Mt,j,q,!0):(Ft[Kt-lt]=z+1,Kt>=Ct?Ct=Kt:At=!0,y(Mt,k[Kt],I,null,j,q,Y,Z,$),xt++)}const Bt=At?Vl(Ft):Ae;for(dt=Bt.length-1,z=St-1;z>=0;z--){const Mt=lt+z,Kt=k[Mt],Sr=Mt+1<it?k[Mt+1].el:V;Ft[z]===0?y(null,Kt,I,Sr,j,q,Y,Z,$):At&&(dt<0||z!==Bt[dt]?K(Kt,I,Sr,2):dt--)}}},K=(F,k,I,V,j=null)=>{const{el:q,type:Y,transition:Z,children:$,shapeFlag:z}=F;if(z&6){K(F.component.subTree,k,I,V);return}if(z&128){F.suspense.move(k,I,V);return}if(z&64){Y.move(F,k,I,Q);return}if(Y===oe){n(q,k,I);for(let et=0;et<$.length;et++)K($[et],k,I,V);n(F.anchor,k,I);return}if(Y===Sn){c(F,k,I);return}if(V!==2&&z&1&&Z)if(V===0)Z.beforeEnter(q),n(q,k,I),Wt(()=>Z.enter(q),j);else{const{leave:et,delayLeave:ot,afterLeave:at}=Z,lt=()=>n(q,k,I),pt=()=>{et(q,()=>{lt(),at&&at()})};ot?ot(q,lt,pt):pt()}else n(q,k,I)},tt=(F,k,I,V=!1,j=!1)=>{const{type:q,props:Y,ref:Z,children:$,dynamicChildren:z,shapeFlag:it,patchFlag:et,dirs:ot,cacheIndex:at}=F;if(et===-2&&(j=!1),Z!=null&&Ji(Z,null,I,F,!0),at!=null&&(k.renderCache[at]=void 0),it&256){k.ctx.deactivate(F);return}const lt=it&1&&ot,pt=!Ai(F);let dt;if(pt&&(dt=Y&&Y.onVnodeBeforeUnmount)&&Jt(dt,k,F),it&6)nt(F.component,I,V);else{if(it&128){F.suspense.unmount(I,V);return}lt&&_e(F,null,k,"beforeUnmount"),it&64?F.type.remove(F,k,I,Q,V):z&&!z.hasOnce&&(q!==oe||et>0&&et&64)?rt(z,k,I,!1,!0):(q===oe&&et&384||!j&&it&16)&&rt($,k,I),V&&W(F)}(pt&&(dt=Y&&Y.onVnodeUnmounted)||lt)&&Wt(()=>{dt&&Jt(dt,k,F),lt&&_e(F,null,k,"unmounted")},I)},W=F=>{const{type:k,el:I,anchor:V,transition:j}=F;if(k===oe){J(I,V);return}if(k===Sn){m(F);return}const q=()=>{r(I),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(F.shapeFlag&1&&j&&!j.persisted){const{leave:Y,delayLeave:Z}=j,$=()=>Y(I,q);Z?Z(F.el,q,$):$()}else q()},J=(F,k)=>{let I;for(;F!==k;)I=v(F),r(F),F=I;r(k)},nt=(F,k,I)=>{const{bum:V,scope:j,job:q,subTree:Y,um:Z,m:$,a:z}=F;Or($),Or(z),V&&pn(V),j.stop(),q&&(q.flags|=8,tt(Y,F,k,I)),Z&&Wt(Z,k),Wt(()=>{F.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},rt=(F,k,I,V=!1,j=!1,q=0)=>{for(let Y=q;Y<F.length;Y++)tt(F[Y],k,I,V,j)},N=F=>{if(F.shapeFlag&6)return N(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const k=v(F.anchor||F.el),I=k&&k[hl];return I?v(I):k};let B=!1;const X=(F,k,I)=>{F==null?k._vnode&&tt(k._vnode,null,null,!0):y(k._vnode||null,F,k,null,null,null,I),k._vnode=F,B||(B=!0,Pr(),wo(),B=!1)},Q={p:y,um:tt,m:K,r:W,mt:w,mc:R,pc:D,pbc:x,n:N,o:t};return{render:X,hydrate:void 0,createApp:Fl(X)}}function bn({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function me({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bl(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ho(t,e,i=!1){const n=t.children,r=e.children;if(ct(n)&&ct(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=de(r[s]),a.el=o.el),!i&&a.patchFlag!==-2&&Ho(o,a)),a.type===dn&&(a.el=o.el)}}function Vl(t){const e=t.slice(),i=[0];let n,r,s,o,a;const l=t.length;for(n=0;n<l;n++){const d=t[n];if(d!==0){if(r=i[i.length-1],t[r]<d){e[n]=r,i.push(n);continue}for(s=0,o=i.length-1;s<o;)a=s+o>>1,t[i[a]]<d?s=a+1:o=a;d<t[i[s]]&&(s>0&&(e[n]=i[s-1]),i[s]=n)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=e[o];return i}function Wo(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Wo(e)}function Or(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Hl=Symbol.for("v-scx"),Wl=()=>qi(Hl);function Ei(t,e,i){return qo(t,e,i)}function qo(t,e,i=vt){const{immediate:n,deep:r,flush:s,once:o}=i,a=Gt({},i),l=e&&n||!e&&s!=="post";let d;if(Li){if(s==="sync"){const g=Wl();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=te,g.resume=te,g.pause=te,g}}const h=Ot;a.call=(g,f,y)=>ee(g,h,f,y);let _=!1;s==="post"?a.scheduler=g=>{Wt(g,h&&h.suspense)}:s!=="sync"&&(_=!0,a.scheduler=(g,f)=>{f?g():lr(g)}),a.augmentJob=g=>{e&&(g.flags|=4),_&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const v=rl(t,e,a);return Li&&(d?d.push(v):l&&v()),v}function ql(t,e,i){const n=this.proxy,r=Rt(t)?t.includes(".")?jo(n,t):()=>n[t]:t.bind(n,n);let s;ht(e)?s=e:(s=e.handler,i=e);const o=Bi(this),a=qo(r,s.bind(n),i);return o(),a}function jo(t,e){const i=e.split(".");return()=>{let n=t;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}const jl=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Yt(e)}Modifiers`]||t[`${Ce(e)}Modifiers`];function Kl(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||vt;let r=i;const s=e.startsWith("update:"),o=s&&jl(n,e.slice(7));o&&(o.trim&&(r=i.map(h=>Rt(h)?h.trim():h)),o.number&&(r=i.map(Sa)));let a,l=n[a=gn(e)]||n[a=gn(Yt(e))];!l&&s&&(l=n[a=gn(Ce(e))]),l&&ee(l,t,6,r);const d=n[a+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ee(d,t,6,r)}}function Ko(t,e,i=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const s=t.emits;let o={},a=!1;if(!ht(t)){const l=d=>{const h=Ko(d,e,!0);h&&(a=!0,Gt(o,h))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Pt(t)&&n.set(t,null),null):(ct(s)?s.forEach(l=>o[l]=null):Gt(o,s),Pt(t)&&n.set(t,o),o)}function cn(t,e){return!t||!nn(e)?!1:(e=e.slice(2).replace(/Once$/,""),mt(t,e[0].toLowerCase()+e.slice(1))||mt(t,Ce(e))||mt(t,e))}function kr(t){const{type:e,vnode:i,proxy:n,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:d,renderCache:h,props:_,data:v,setupState:g,ctx:f,inheritAttrs:y}=t,S=$i(t);let P,u;try{if(i.shapeFlag&4){const m=r||n,C=m;P=Zt(d.call(C,m,h,_,g,v,f)),u=a}else{const m=e;P=Zt(m.length>1?m(_,{attrs:a,slots:o,emit:l}):m(_,null)),u=e.props?a:zl(a)}}catch(m){Fi.length=0,ln(m,t,1),P=Ut(Ni)}let c=P;if(u&&y!==!1){const m=Object.keys(u),{shapeFlag:C}=c;m.length&&C&7&&(s&&m.some(Xn)&&(u=Yl(u,s)),c=Fe(c,u,!1,!0))}return i.dirs&&(c=Fe(c,null,!1,!0),c.dirs=c.dirs?c.dirs.concat(i.dirs):i.dirs),i.transition&&hr(c,i.transition),P=c,$i(S),P}const zl=t=>{let e;for(const i in t)(i==="class"||i==="style"||nn(i))&&((e||(e={}))[i]=t[i]);return e},Yl=(t,e)=>{const i={};for(const n in t)(!Xn(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function Xl(t,e,i){const{props:n,children:r,component:s}=t,{props:o,children:a,patchFlag:l}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?Nr(n,o,d):!!o;if(l&8){const h=e.dynamicProps;for(let _=0;_<h.length;_++){const v=h[_];if(o[v]!==n[v]&&!cn(d,v))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Nr(n,o,d):!0:!!o;return!1}function Nr(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==t[s]&&!cn(i,s))return!0}return!1}function $l({vnode:t,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=i,e=e.parent;else break}}const zo=t=>t.__isSuspense;function Jl(t,e){e&&e.pendingBranch?ct(t)?e.effects.push(...t):e.effects.push(t):ll(t)}const oe=Symbol.for("v-fgt"),dn=Symbol.for("v-txt"),Ni=Symbol.for("v-cmt"),Sn=Symbol.for("v-stc"),Fi=[];let jt=null;function gr(t=!1){Fi.push(jt=t?null:[])}function Ql(){Fi.pop(),jt=Fi[Fi.length-1]||null}let Gi=1;function Gr(t,e=!1){Gi+=t,t<0&&jt&&e&&(jt.hasOnce=!0)}function Yo(t){return t.dynamicChildren=Gi>0?jt||Ae:null,Ql(),Gi>0&&jt&&jt.push(t),t}function Zl(t,e,i,n,r,s){return Yo(Jo(t,e,i,n,r,s,!0))}function Xo(t,e,i,n,r){return Yo(Ut(t,e,i,n,r,!0))}function Zi(t){return t?t.__v_isVNode===!0:!1}function ke(t,e){return t.type===e.type&&t.key===e.key}const $o=({key:t})=>t??null,ji=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Rt(t)||Nt(t)||ht(t)?{i:zt,r:t,k:e,f:!!i}:t:null);function Jo(t,e=null,i=null,n=0,r=null,s=t===oe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$o(e),ref:e&&ji(e),scopeId:Po,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:zt};return a?(pr(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Rt(i)?8:16),Gi>0&&!o&&jt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&jt.push(l),l}const Ut=th;function th(t,e=null,i=null,n=0,r=null,s=!1){if((!t||t===Sl)&&(t=Ni),Zi(t)){const a=Fe(t,e,!0);return i&&pr(a,i),Gi>0&&!s&&jt&&(a.shapeFlag&6?jt[jt.indexOf(t)]=a:jt.push(a)),a.patchFlag=-2,a}if(uh(t)&&(t=t.__vccOpts),e){e=eh(e);let{class:a,style:l}=e;a&&!Rt(a)&&(e.class=Zn(a)),Pt(l)&&(ar(l)&&!ct(l)&&(l=Gt({},l)),e.style=Qn(l))}const o=Rt(t)?1:zo(t)?128:cl(t)?64:Pt(t)?4:ht(t)?2:0;return Jo(t,e,i,n,r,o,s,!0)}function eh(t){return t?ar(t)||Go(t)?Gt({},t):t:null}function Fe(t,e,i=!1,n=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=t,d=e?nh(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&$o(d),ref:e&&e.ref?i&&s?ct(s)?s.concat(ji(e)):[s,ji(e)]:ji(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==oe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fe(t.ssContent),ssFallback:t.ssFallback&&Fe(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&hr(h,l.clone(h)),h}function ih(t=" ",e=0){return Ut(dn,null,t,e)}function Zt(t){return t==null||typeof t=="boolean"?Ut(Ni):ct(t)?Ut(oe,null,t.slice()):Zi(t)?de(t):Ut(dn,null,String(t))}function de(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Fe(t)}function pr(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ct(e))i=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),pr(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!Go(e)?e._ctx=zt:r===3&&zt&&(zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ht(e)?(e={default:e,_ctx:zt},i=32):(e=String(e),n&64?(i=16,e=[ih(e)]):i=8);t.children=e,t.shapeFlag|=i}function nh(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Zn([e.class,n.class]));else if(r==="style")e.style=Qn([e.style,n.style]);else if(nn(r)){const s=e[r],o=n[r];o&&s!==o&&!(ct(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=n[r])}return e}function Jt(t,e,i,n=null){ee(t,e,7,[i,n])}const rh=Oo();let sh=0;function oh(t,e,i){const n=t.type,r=(e?e.appContext:t.appContext)||rh,s={uid:sh++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ra(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Do(n,r),emitsOptions:Ko(n,r),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:n.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Kl.bind(null,s),t.ce&&t.ce(s),s}let Ot=null;const Qo=()=>Ot||zt;let tn,jn;{const t=an(),e=(i,n)=>{let r;return(r=t[i])||(r=t[i]=[]),r.push(n),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};tn=e("__VUE_INSTANCE_SETTERS__",i=>Ot=i),jn=e("__VUE_SSR_SETTERS__",i=>Li=i)}const Bi=t=>{const e=Ot;return tn(t),t.scope.on(),()=>{t.scope.off(),tn(e)}},Lr=()=>{Ot&&Ot.scope.off(),tn(null)};function Zo(t){return t.vnode.shapeFlag&4}let Li=!1;function ah(t,e=!1,i=!1){e&&jn(e);const{props:n,children:r}=t.vnode,s=Zo(t);Ol(t,n,s,e),Ll(t,r,i);const o=s?lh(t,e):void 0;return e&&jn(!1),o}function lh(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wl);const{setup:n}=i;if(n){ge();const r=t.setupContext=n.length>1?ch(t):null,s=Bi(t),o=Ii(n,t,0,[t.props,r]),a=eo(o);if(pe(),s(),(a||t.sp)&&!Ai(t)&&To(t),a){if(o.then(Lr,Lr),e)return o.then(l=>{Dr(t,l)}).catch(l=>{ln(l,t,0)});t.asyncDep=o}else Dr(t,o)}else ta(t)}function Dr(t,e,i){ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pt(e)&&(t.setupState=bo(e)),ta(t)}function ta(t,e,i){const n=t.type;t.render||(t.render=n.render||te);{const r=Bi(t);ge();try{xl(t)}finally{pe(),r()}}}const hh={get(t,e){return kt(t,"get",""),t[e]}};function ch(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,hh),slots:t.slots,emit:t.emit,expose:e}}function _r(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(bo(Xa(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Ri)return Ri[i](t)},has(e,i){return i in e||i in Ri}})):t.proxy}function dh(t,e=!0){return ht(t)?t.displayName||t.name:t.name||e&&t.__name}function uh(t){return ht(t)&&"__vccOpts"in t}const fh=(t,e)=>il(t,e,Li);function ea(t,e,i){const n=arguments.length;return n===2?Pt(e)&&!ct(e)?Zi(e)?Ut(t,null,[e]):Ut(t,e):Ut(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Zi(i)&&(i=[i]),Ut(t,e,i))}const gh="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kn;const Ir=typeof window<"u"&&window.trustedTypes;if(Ir)try{Kn=Ir.createPolicy("vue",{createHTML:t=>t})}catch{}const ia=Kn?t=>Kn.createHTML(t):t=>t,ph="http://www.w3.org/2000/svg",_h="http://www.w3.org/1998/Math/MathML",se=typeof document<"u"?document:null,Ur=se&&se.createElement("template"),mh={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const r=e==="svg"?se.createElementNS(ph,t):e==="mathml"?se.createElementNS(_h,t):i?se.createElement(t,{is:i}):se.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>se.createTextNode(t),createComment:t=>se.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>se.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,r,s){const o=i?i.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===s||!(r=r.nextSibling)););else{Ur.innerHTML=ia(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=Ur.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},yh=Symbol("_vtc");function vh(t,e,i){const n=t[yh];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const Br=Symbol("_vod"),bh=Symbol("_vsh"),Sh=Symbol(""),Ch=/(^|;)\s*display\s*:/;function wh(t,e,i){const n=t.style,r=Rt(i);let s=!1;if(i&&!r){if(e)if(Rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Ki(n,a,"")}else for(const o in e)i[o]==null&&Ki(n,o,"");for(const o in i)o==="display"&&(s=!0),Ki(n,o,i[o])}else if(r){if(e!==i){const o=n[Sh];o&&(i+=";"+o),n.cssText=i,s=Ch.test(i)}}else e&&t.removeAttribute("style");Br in t&&(t[Br]=s?n.display:"",t[bh]&&(n.display="none"))}const Vr=/\s*!important$/;function Ki(t,e,i){if(ct(i))i.forEach(n=>Ki(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=xh(t,e);Vr.test(i)?t.setProperty(Ce(n),i.replace(Vr,""),"important"):t[n]=i}}const Hr=["Webkit","Moz","ms"],Cn={};function xh(t,e){const i=Cn[e];if(i)return i;let n=Yt(e);if(n!=="filter"&&n in t)return Cn[e]=n;n=on(n);for(let r=0;r<Hr.length;r++){const s=Hr[r]+n;if(s in t)return Cn[e]=s}return e}const Wr="http://www.w3.org/1999/xlink";function qr(t,e,i,n,r,s=Aa(e)){n&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(Wr,e.slice(6,e.length)):t.setAttributeNS(Wr,e,i):i==null||s&&!no(i)?t.removeAttribute(e):t.setAttribute(e,s?"":Me(i)?String(i):i)}function jr(t,e,i,n,r){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?ia(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=no(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(r||e)}function Ph(t,e,i,n){t.addEventListener(e,i,n)}function Th(t,e,i,n){t.removeEventListener(e,i,n)}const Kr=Symbol("_vei");function Ah(t,e,i,n,r=null){const s=t[Kr]||(t[Kr]={}),o=s[e];if(n&&o)o.value=n;else{const[a,l]=Rh(e);if(n){const d=s[e]=Mh(n,r);Ph(t,a,d,l)}else o&&(Th(t,a,o,l),s[e]=void 0)}}const zr=/(?:Once|Passive|Capture)$/;function Rh(t){let e;if(zr.test(t)){e={};let n;for(;n=t.match(zr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ce(t.slice(2)),e]}let wn=0;const Eh=Promise.resolve(),Fh=()=>wn||(Eh.then(()=>wn=0),wn=Date.now());function Mh(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;ee(Oh(n,i.value),e,5,[n])};return i.value=t,i.attached=Fh(),i}function Oh(t,e){if(ct(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Yr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,kh=(t,e,i,n,r,s)=>{const o=r==="svg";e==="class"?vh(t,n,o):e==="style"?wh(t,i,n):nn(e)?Xn(e)||Ah(t,e,i,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Nh(t,e,n,o))?(jr(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qr(t,e,n,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Rt(n))?jr(t,Yt(e),n,s,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),qr(t,e,n,o))};function Nh(t,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Yr(e)&&ht(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Yr(e)&&Rt(i)?!1:e in t}const Gh=Gt({patchProp:kh},mh);let Xr;function Lh(){return Xr||(Xr=Il(Gh))}const Dh=(...t)=>{const e=Lh().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=Uh(n);if(!r)return;const s=e._component;!ht(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=i(r,!1,Ih(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Ih(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Uh(t){return Rt(t)?document.querySelector(t):t}const Bh=Ui({__name:"GeneralBox",setup(t){const e={x:1,y:1,width:20,height:20,fill:"#c6c6c6",stroke:"#808080",strokeWidth:2};function i(){console.log("tap")}return(n,r)=>{const s=Bn("v-rect");return gr(),Xo(s,{config:e,onMousedown:i})}}}),Vh=Ui({__name:"GameField",setup(t){return(e,i)=>(gr(),Xo(Bh))}}),Hh=Ui({__name:"App",setup(t){const e={width:window.innerWidth,height:window.innerHeight};return(i,n)=>{const r=Bn("v-layer"),s=Bn("v-stage");return gr(),Zl("main",null,[Ut(s,{config:e},{default:Un(()=>[Ut(r,null,{default:Un(()=>[Ut(Vh)]),_:1})]),_:1})])}}});var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zi={exports:{}},Ne={},xn={},Pn={},Jr;function ut(){return Jr||(Jr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof $r<"u"?$r:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.20",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return t.Konva.angleDeg?r*e:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var r;return(r=t.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(r){t.glob.Konva=r}};const n=r=>{t.Konva[r.prototype.getClassName()]=r};t._registerNode=n,t.Konva._injectGlobal(t.Konva)}(Pn)),Pn}var Tn={},Qr;function wt(){return Qr||(Qr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ut();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const C=this.m;return{x:C[0]*m.x+C[2]*m.y+C[4],y:C[1]*m.x+C[3]*m.y+C[5]}}translate(m,C){return this.m[4]+=this.m[0]*m+this.m[2]*C,this.m[5]+=this.m[1]*m+this.m[3]*C,this}scale(m,C){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=C,this.m[3]*=C,this}rotate(m){const C=Math.cos(m),A=Math.sin(m),G=this.m[0]*C+this.m[2]*A,R=this.m[1]*C+this.m[3]*A,T=this.m[0]*-A+this.m[2]*C,x=this.m[1]*-A+this.m[3]*C;return this.m[0]=G,this.m[1]=R,this.m[2]=T,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,C){const A=this.m[0]+this.m[2]*C,G=this.m[1]+this.m[3]*C,R=this.m[2]+this.m[0]*m,T=this.m[3]+this.m[1]*m;return this.m[0]=A,this.m[1]=G,this.m[2]=R,this.m[3]=T,this}multiply(m){const C=this.m[0]*m.m[0]+this.m[2]*m.m[1],A=this.m[1]*m.m[0]+this.m[3]*m.m[1],G=this.m[0]*m.m[2]+this.m[2]*m.m[3],R=this.m[1]*m.m[2]+this.m[3]*m.m[3],T=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],x=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=C,this.m[1]=A,this.m[2]=G,this.m[3]=R,this.m[4]=T,this.m[5]=x,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*m,A=-this.m[1]*m,G=-this.m[2]*m,R=this.m[0]*m,T=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=A,this.m[2]=G,this.m[3]=R,this.m[4]=T,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const m=this.m[0],C=this.m[1],A=this.m[2],G=this.m[3],R=this.m[4],T=this.m[5],x=m*G-C*A,M={x:R,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||C!=0){const L=Math.sqrt(m*m+C*C);M.rotation=C>0?Math.acos(m/L):-Math.acos(m/L),M.scaleX=L,M.scaleY=x/L,M.skewX=(m*A+C*G)/x,M.skewY=0}else if(A!=0||G!=0){const L=Math.sqrt(A*A+G*G);M.rotation=Math.PI/2-(G>0?Math.acos(-A/L):-Math.acos(A/L)),M.scaleX=x/L,M.scaleY=L,M.skewX=0,M.skewY=(m*A+C*G)/x}return M.rotation=t.Util._getRotation(M.rotation),M}}t.Transform=i;const n="[object Array]",r="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,d="#",h="",_="0",v="Konva warning: ",g="Konva error: ",f="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let P=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(c){setTimeout(c,60)};t.Util={_isElement(c){return!!(c&&c.nodeType==1)},_isFunction(c){return!!(c&&c.constructor&&c.call&&c.apply)},_isPlainObject(c){return!!c&&c.constructor===Object},_isArray(c){return Object.prototype.toString.call(c)===n},_isNumber(c){return Object.prototype.toString.call(c)===r&&!isNaN(c)&&isFinite(c)},_isString(c){return Object.prototype.toString.call(c)===s},_isBoolean(c){return Object.prototype.toString.call(c)===o},isObject(c){return c instanceof Object},isValidSelector(c){if(typeof c!="string")return!1;const m=c[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(c){return c===0||c>0?1:-1},requestAnimFrame(c){P.push(c),P.length===1&&u(function(){const m=P;P=[],m.forEach(function(C){C()})})},createCanvasElement(){const c=document.createElement("canvas");try{c.style=c.style||{}}catch{}return c},createImageElement(){return document.createElement("img")},_isInDocument(c){for(;c=c.parentNode;)if(c==document)return!0;return!1},_urlToImage(c,m){const C=t.Util.createImageElement();C.onload=function(){m(C)},C.src=c},_rgbToHex(c,m,C){return((1<<24)+(c<<16)+(m<<8)+C).toString(16).slice(1)},_hexToRgb(c){c=c.replace(d,h);const m=parseInt(c,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let c=(Math.random()*16777215<<0).toString(16);for(;c.length<6;)c=_+c;return d+c},getRGB(c){let m;return c in y?(m=y[c],{r:m[0],g:m[1],b:m[2]}):c[0]===d?this._hexToRgb(c.substring(1)):c.substr(0,4)===f?(m=S.exec(c.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(c){return c=c||"black",t.Util._namedColorToRBA(c)||t.Util._hex3ColorToRGBA(c)||t.Util._hex4ColorToRGBA(c)||t.Util._hex6ColorToRGBA(c)||t.Util._hex8ColorToRGBA(c)||t.Util._rgbColorToRGBA(c)||t.Util._rgbaColorToRGBA(c)||t.Util._hslColorToRGBA(c)},_namedColorToRBA(c){const m=y[c.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(c){if(c.indexOf("rgb(")===0){c=c.match(/rgb\(([^)]+)\)/)[1];const m=c.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(c){if(c.indexOf("rgba(")===0){c=c.match(/rgba\(([^)]+)\)/)[1];const m=c.split(/ *, */).map((C,A)=>C.slice(-1)==="%"?A===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(c){if(c[0]==="#"&&c.length===9)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:parseInt(c.slice(7,9),16)/255}},_hex6ColorToRGBA(c){if(c[0]==="#"&&c.length===7)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:1}},_hex4ColorToRGBA(c){if(c[0]==="#"&&c.length===5)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255}},_hex3ColorToRGBA(c){if(c[0]==="#"&&c.length===4)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}},_hslColorToRGBA(c){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(c)){const[m,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(c),A=Number(C[0])/360,G=Number(C[1])/100,R=Number(C[2])/100;let T,x,M;if(G===0)return M=R*255,{r:Math.round(M),g:Math.round(M),b:Math.round(M),a:1};R<.5?T=R*(1+G):T=R+G-R*G;const L=2*R-T,p=[0,0,0];for(let w=0;w<3;w++)x=A+1/3*-(w-1),x<0&&x++,x>1&&x--,6*x<1?M=L+(T-L)*6*x:2*x<1?M=T:3*x<2?M=L+(T-L)*(2/3-x)*6:M=L,p[w]=M*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(c,m){return!(m.x>c.x+c.width||m.x+m.width<c.x||m.y>c.y+c.height||m.y+m.height<c.y)},cloneObject(c){const m={};for(const C in c)this._isPlainObject(c[C])?m[C]=this.cloneObject(c[C]):this._isArray(c[C])?m[C]=this.cloneArray(c[C]):m[C]=c[C];return m},cloneArray(c){return c.slice(0)},degToRad(c){return c*a},radToDeg(c){return c*l},_degToRad(c){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(c)},_radToDeg(c){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(c)},_getRotation(c){return e.Konva.angleDeg?t.Util.radToDeg(c):c},_capitalize(c){return c.charAt(0).toUpperCase()+c.slice(1)},throw(c){throw new Error(g+c)},error(c){console.error(g+c)},warn(c){e.Konva.showWarnings&&console.warn(v+c)},each(c,m){for(const C in c)m(C,c[C])},_inRange(c,m,C){return m<=c&&c<C},_getProjectionToSegment(c,m,C,A,G,R){let T,x,M;const L=(c-C)*(c-C)+(m-A)*(m-A);if(L==0)T=c,x=m,M=(G-C)*(G-C)+(R-A)*(R-A);else{const p=((G-c)*(C-c)+(R-m)*(A-m))/L;p<0?(T=c,x=m,M=(c-G)*(c-G)+(m-R)*(m-R)):p>1?(T=C,x=A,M=(C-G)*(C-G)+(A-R)*(A-R)):(T=c+p*(C-c),x=m+p*(A-m),M=(T-G)*(T-G)+(x-R)*(x-R))}return[T,x,M]},_getProjectionToLine(c,m,C){const A=t.Util.cloneObject(c);let G=Number.MAX_VALUE;return m.forEach(function(R,T){if(!C&&T===m.length-1)return;const x=m[(T+1)%m.length],M=t.Util._getProjectionToSegment(R.x,R.y,x.x,x.y,c.x,c.y),L=M[0],p=M[1],w=M[2];w<G&&(A.x=L,A.y=p,G=w)}),A},_prepareArrayForTween(c,m,C){const A=[],G=[];if(c.length>m.length){const T=m;m=c,c=T}for(let T=0;T<c.length;T+=2)A.push({x:c[T],y:c[T+1]});for(let T=0;T<m.length;T+=2)G.push({x:m[T],y:m[T+1]});const R=[];return G.forEach(function(T){const x=t.Util._getProjectionToLine(T,A,C);R.push(x.x),R.push(x.y)}),R},_prepareToStringify(c){let m;c.visitedByCircularReferenceRemoval=!0;for(const C in c)if(c.hasOwnProperty(C)&&c[C]&&typeof c[C]=="object"){if(m=Object.getOwnPropertyDescriptor(c,C),c[C].visitedByCircularReferenceRemoval||t.Util._isElement(c[C]))if(m.configurable)delete c[C];else return null;else if(t.Util._prepareToStringify(c[C])===null)if(m.configurable)delete c[C];else return null}return delete c.visitedByCircularReferenceRemoval,c},_assign(c,m){for(const C in m)c[C]=m[C];return c},_getFirstPointerId(c){return c.touches?c.changedTouches[0].identifier:c.pointerId||999},releaseCanvas(...c){e.Konva.releaseCanvasOnDestroy&&c.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(c,m,C,A){let G=0,R=0,T=0,x=0;typeof A=="number"?G=R=T=x=Math.min(A,m/2,C/2):(G=Math.min(A[0]||0,m/2,C/2),R=Math.min(A[1]||0,m/2,C/2),x=Math.min(A[2]||0,m/2,C/2),T=Math.min(A[3]||0,m/2,C/2)),c.moveTo(G,0),c.lineTo(m-R,0),c.arc(m-R,R,R,Math.PI*3/2,0,!1),c.lineTo(m,C-x),c.arc(m-x,C-x,x,0,Math.PI/2,!1),c.lineTo(T,C),c.arc(T,C-T,T,Math.PI/2,Math.PI,!1),c.lineTo(0,G),c.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(Tn)),Tn}var Ge={},An={},Vt={},Zr;function gt(){if(Zr)return Vt;Zr=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.RGBComponent=n,Vt.alphaComponent=r,Vt.getNumberValidator=s,Vt.getNumberOrArrayOfNumbersValidator=o,Vt.getNumberOrAutoValidator=a,Vt.getStringValidator=l,Vt.getStringOrGradientValidator=d,Vt.getFunctionValidator=h,Vt.getNumberArrayValidator=_,Vt.getBooleanValidator=v,Vt.getComponentValidator=g;const t=ut(),e=wt();function i(f){return e.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||e.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function n(f){return f>255?255:f<0?0:Math.round(f)}function r(f){return f>1?1:f<1e-4?1e-4:f}function s(){if(t.Konva.isUnminified)return function(f,y){return e.Util._isNumber(f)||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),f}}function o(f){if(t.Konva.isUnminified)return function(y,S){let P=e.Util._isNumber(y),u=e.Util._isArray(y)&&y.length==f;return!P&&!u&&e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+f+")"),y}}function a(){if(t.Konva.isUnminified)return function(f,y){var S=e.Util._isNumber(f),P=f==="auto";return S||P||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),f}}function l(){if(t.Konva.isUnminified)return function(f,y){return e.Util._isString(f)||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),f}}function d(){if(t.Konva.isUnminified)return function(f,y){const S=e.Util._isString(f),P=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return S||P||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),f}}function h(){if(t.Konva.isUnminified)return function(f,y){return e.Util._isFunction(f)||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),f}}function _(){if(t.Konva.isUnminified)return function(f,y){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&f instanceof S||(e.Util._isArray(f)?f.forEach(function(P){e.Util._isNumber(P)||e.Util.warn('"'+y+'" attribute has non numeric element '+P+". Make sure that all elements are numbers.")}):e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),f}}function v(){if(t.Konva.isUnminified)return function(f,y){var S=f===!0||f===!1;return S||e.Util.warn(i(f)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),f}}function g(f){if(t.Konva.isUnminified)return function(y,S){return y==null||e.Util.isObject(y)||e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+f),y}}return Vt}var ts;function ft(){return ts||(ts=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=wt(),i=gt(),n="get",r="set";t.Factory={addGetterSetter(s,o,a,l,d){t.Factory.addGetter(s,o,a),t.Factory.addSetter(s,o,l,d),t.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var l=n+e.Util._capitalize(o);s.prototype[l]=s.prototype[l]||function(){const d=this.attrs[o];return d===void 0?a:d}},addSetter(s,o,a,l){var d=r+e.Util._capitalize(o);s.prototype[d]||t.Factory.overWriteSetter(s,o,a,l)},overWriteSetter(s,o,a,l){var d=r+e.Util._capitalize(o);s.prototype[d]=function(h){return a&&h!==void 0&&h!==null&&(h=a.call(this,h,o)),this._setAttr(o,h),l&&l.call(this),this}},addComponentsGetterSetter(s,o,a,l,d){const h=a.length,_=e.Util._capitalize,v=n+_(o),g=r+_(o);s.prototype[v]=function(){const y={};for(let S=0;S<h;S++){const P=a[S];y[P]=this.getAttr(o+_(P))}return y};const f=(0,i.getComponentValidator)(a);s.prototype[g]=function(y){const S=this.attrs[o];l&&(y=l.call(this,y,o)),f&&f.call(this,y,o);for(const P in y)y.hasOwnProperty(P)&&this._setAttr(o+_(P),y[P]);return y||a.forEach(P=>{this._setAttr(o+_(P),void 0)}),this._fireChangeEvent(o,S,y),d&&d.call(this),this},t.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=e.Util._capitalize(o),l=r+a,d=n+a;s.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(s,o,a,l){e.Util.error("Adding deprecated "+o);const d=n+e.Util._capitalize(o),h=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[d]=function(){e.Util.error(h);const _=this.attrs[o];return _===void 0?a:_},t.Factory.addSetter(s,o,l,function(){e.Util.error(h)}),t.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,l){const d=s.prototype[l],h=n+e.Util._capitalize(a),_=r+e.Util._capitalize(a);function v(){d.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[a]=v,s.prototype[h]=v,s.prototype[_]=v})},afterSetFilter(){this._filterUpToDate=!1}}}(An)),An}var ne={},re={},es;function na(){if(es)return re;es=1,Object.defineProperty(re,"__esModule",{value:!0}),re.HitContext=re.SceneContext=re.Context=void 0;const t=wt(),e=ut();function i(P){const u=[],c=P.length,m=t.Util;for(let C=0;C<c;C++){let A=P[C];m._isNumber(A)?A=Math.round(A*1e3)/1e3:m._isString(A)||(A=A+""),u.push(A)}return u}const n=",",r="(",s=")",o="([",a="])",l=";",d="()",h="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],v=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let f=class{constructor(u){this.canvas=u,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,c){let m=this.traceArr,C=m.length,A="",G,R,T,x;for(G=0;G<C;G++)R=m[G],T=R.method,T?(x=R.args,A+=T,u?A+=d:t.Util._isArray(x[0])?A+=o+x.join(n)+a:(c&&(x=x.map(M=>typeof M=="number"?Math.floor(M):M)),A+=r+x.join(n)+s)):(A+=R.property,u||(A+=h+R.val)),A+=l;return A}clearTrace(){this.traceArr=[]}_trace(u){let c=this.traceArr,m;c.push(u),m=c.length,m>=g&&c.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const c=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,c.getWidth()/c.pixelRatio,c.getHeight()/c.pixelRatio)}_applyLineCap(u){const c=u.attrs.lineCap;c&&this.setAttr("lineCap",c)}_applyOpacity(u){const c=u.getAbsoluteOpacity();c!==1&&this.setAttr("globalAlpha",c)}_applyLineJoin(u){const c=u.attrs.lineJoin;c&&this.setAttr("lineJoin",c)}setAttr(u,c){this._context[u]=c}arc(u,c,m,C,A,G){this._context.arc(u,c,m,C,A,G)}arcTo(u,c,m,C,A){this._context.arcTo(u,c,m,C,A)}beginPath(){this._context.beginPath()}bezierCurveTo(u,c,m,C,A,G){this._context.bezierCurveTo(u,c,m,C,A,G)}clearRect(u,c,m,C){this._context.clearRect(u,c,m,C)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,c){const m=arguments;if(m.length===2)return this._context.createImageData(u,c);if(m.length===1)return this._context.createImageData(u)}createLinearGradient(u,c,m,C){return this._context.createLinearGradient(u,c,m,C)}createPattern(u,c){return this._context.createPattern(u,c)}createRadialGradient(u,c,m,C,A,G){return this._context.createRadialGradient(u,c,m,C,A,G)}drawImage(u,c,m,C,A,G,R,T,x){const M=arguments,L=this._context;M.length===3?L.drawImage(u,c,m):M.length===5?L.drawImage(u,c,m,C,A):M.length===9&&L.drawImage(u,c,m,C,A,G,R,T,x)}ellipse(u,c,m,C,A,G,R,T){this._context.ellipse(u,c,m,C,A,G,R,T)}isPointInPath(u,c,m,C){return m?this._context.isPointInPath(m,u,c,C):this._context.isPointInPath(u,c,C)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,c,m,C){this._context.fillRect(u,c,m,C)}strokeRect(u,c,m,C){this._context.strokeRect(u,c,m,C)}fillText(u,c,m,C){C?this._context.fillText(u,c,m,C):this._context.fillText(u,c,m)}measureText(u){return this._context.measureText(u)}getImageData(u,c,m,C){return this._context.getImageData(u,c,m,C)}lineTo(u,c){this._context.lineTo(u,c)}moveTo(u,c){this._context.moveTo(u,c)}rect(u,c,m,C){this._context.rect(u,c,m,C)}roundRect(u,c,m,C,A){this._context.roundRect(u,c,m,C,A)}putImageData(u,c,m){this._context.putImageData(u,c,m)}quadraticCurveTo(u,c,m,C){this._context.quadraticCurveTo(u,c,m,C)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,c){this._context.scale(u,c)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,c,m,C,A,G){this._context.setTransform(u,c,m,C,A,G)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,c,m,C){this._context.strokeText(u,c,m,C)}transform(u,c,m,C,A,G){this._context.transform(u,c,m,C,A,G)}translate(u,c){this._context.translate(u,c)}_enableTrace(){let u=this,c=_.length,m=this.setAttr,C,A;const G=function(R){let T=u[R],x;u[R]=function(){return A=i(Array.prototype.slice.call(arguments,0)),x=T.apply(u,arguments),u._trace({method:R,args:A}),x}};for(C=0;C<c;C++)G(_[C]);u.setAttr=function(){m.apply(u,arguments);const R=arguments[0];let T=arguments[1];(R==="shadowOffsetX"||R==="shadowOffsetY"||R==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),u._trace({property:R,val:T})}}_applyGlobalCompositeOperation(u){const c=u.attrs.globalCompositeOperation;!c||c==="source-over"||this.setAttr("globalCompositeOperation",c)}};re.Context=f,v.forEach(function(P){Object.defineProperty(f.prototype,P,{get(){return this._context[P]},set(u){this._context[P]=u}})});class y extends f{constructor(u,{willReadFrequently:c=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:c})}_fillColor(u){const c=u.fill();this.setAttr("fillStyle",c),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const c=u._getLinearGradient();c&&(this.setAttr("fillStyle",c),u._fillFunc(this))}_fillRadialGradient(u){const c=u._getRadialGradient();c&&(this.setAttr("fillStyle",c),u._fillFunc(this))}_fill(u){const c=u.fill(),m=u.getFillPriority();if(c&&m==="color"){this._fillColor(u);return}const C=u.getFillPatternImage();if(C&&m==="pattern"){this._fillPattern(u);return}const A=u.getFillLinearGradientColorStops();if(A&&m==="linear-gradient"){this._fillLinearGradient(u);return}const G=u.getFillRadialGradientColorStops();if(G&&m==="radial-gradient"){this._fillRadialGradient(u);return}c?this._fillColor(u):C?this._fillPattern(u):A?this._fillLinearGradient(u):G&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const c=u.getStrokeLinearGradientStartPoint(),m=u.getStrokeLinearGradientEndPoint(),C=u.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(c.x,c.y,m.x,m.y);if(C){for(let G=0;G<C.length;G+=2)A.addColorStop(C[G],C[G+1]);this.setAttr("strokeStyle",A)}}_stroke(u){const c=u.dash(),m=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!m){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(u),c&&u.dashEnabled()&&(this.setLineDash(c),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),m||this.restore()}}_applyShadow(u){var c,m,C;const A=(c=u.getShadowRGBA())!==null&&c!==void 0?c:"black",G=(m=u.getShadowBlur())!==null&&m!==void 0?m:5,R=(C=u.getShadowOffset())!==null&&C!==void 0?C:{x:0,y:0},T=u.getAbsoluteScale(),x=this.canvas.getPixelRatio(),M=T.x*x,L=T.y*x;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",G*Math.min(Math.abs(M),Math.abs(L))),this.setAttr("shadowOffsetX",R.x*M),this.setAttr("shadowOffsetY",R.y*L)}}re.SceneContext=y;class S extends f{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const c=u.getStrokeScaleEnabled();if(!c){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(u);const m=u.hitStrokeWidth(),C=m==="auto"?u.strokeWidth():m;this.setAttr("lineWidth",C),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),c||this.restore()}}}return re.HitContext=S,re}var is;function un(){if(is)return ne;is=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.HitCanvas=ne.SceneCanvas=ne.Canvas=void 0;const t=wt(),e=na(),i=ut();let n;function r(){if(n)return n;const l=t.Util.createCanvasElement(),d=l.getContext("2d");return n=function(){const h=i.Konva._global.devicePixelRatio||1,_=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return h/_}(),t.Util.releaseCanvas(l),n}let s=class{constructor(d){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(d||{}).pixelRatio||i.Konva.pixelRatio||r();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(d){const h=this.pixelRatio;this.pixelRatio=d,this.setSize(this.getWidth()/h,this.getHeight()/h)}setWidth(d){this.width=this._canvas.width=d*this.pixelRatio,this._canvas.style.width=d+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}setHeight(d){this.height=this._canvas.height=d*this.pixelRatio,this._canvas.style.height=d+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}getWidth(){return this.width}getHeight(){return this.height}setSize(d,h){this.setWidth(d||0),this.setHeight(h||0)}toDataURL(d,h){try{return this._canvas.toDataURL(d,h)}catch{try{return this._canvas.toDataURL()}catch(v){return t.Util.error("Unable to get data URL. "+v.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ne.Canvas=s;class o extends s{constructor(d={width:0,height:0,willReadFrequently:!1}){super(d),this.context=new e.SceneContext(this,{willReadFrequently:d.willReadFrequently}),this.setSize(d.width,d.height)}}ne.SceneCanvas=o;class a extends s{constructor(d={width:0,height:0}){super(d),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(d.width,d.height)}}return ne.HitCanvas=a,ne}var Rn={},ns;function mr(){return ns||(ns=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ut(),i=wt();t.DD={get isDragging(){let n=!1;return t.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return t.DD._dragElements.forEach(r=>{n=r.node}),n},_dragElements:new Map,_drag(n){const r=[];t.DD._dragElements.forEach((s,o)=>{const{node:a}=s,l=a.getStage();l.setPointersPositions(n),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(n));const d=l._changedPointerPositions.find(h=>h.id===s.pointerId);if(d){if(s.dragStatus!=="dragging"){const h=a.dragDistance();if(Math.max(Math.abs(d.x-s.startPointerPos.x),Math.abs(d.y-s.startPointerPos.y))<h||(a.startDrag({evt:n}),!a.isDragging()))return}a._setDragPosition(n,s),r.push(a)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:n},!0)})},_endDragBefore(n){const r=[];t.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(n&&a.setPointersPositions(n),!a._changedPointerPositions.find(h=>h.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const d=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;d&&r.indexOf(d)===-1&&r.push(d)}),r.forEach(s=>{s.draw()})},_endDragAfter(n){t.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:n},!0),r.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(Rn)),Rn}var rs;function Tt(){if(rs)return Ge;rs=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.Node=void 0;const t=wt(),e=ft(),i=un(),n=ut(),r=mr(),s=gt(),o="absoluteOpacity",a="allEventListeners",l="absoluteTransform",d="absoluteScale",h="canvas",_="Change",v="children",g="konva",f="listening",y="mouseenter",S="mouseleave",P="set",u="Shape",c=" ",m="stage",C="transform",A="Stage",G="visible",R=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(c);let T=1,x=class zn{constructor(p){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(p),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(p){(p===C||p===l)&&this._cache.get(p)?this._cache.get(p).dirty=!0:p?this._cache.delete(p):this._cache.clear()}_getCache(p,w){let b=this._cache.get(p);return(b===void 0||(p===C||p===l)&&b.dirty===!0)&&(b=w.call(this),this._cache.set(p,b)),b}_calculate(p,w,b){if(!this._attachedDepsListeners.get(p)){const E=w.map(O=>O+"Change.konva").join(c);this.on(E,()=>{this._clearCache(p)}),this._attachedDepsListeners.set(p,!0)}return this._getCache(p,b)}_getCanvasCache(){return this._cache.get(h)}_clearSelfAndDescendantCache(p){this._clearCache(p),p===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(h)){const{scene:p,filter:w,hit:b}=this._cache.get(h);t.Util.releaseCanvas(p,w,b),this._cache.delete(h)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(p){const w=p||{};let b={};(w.x===void 0||w.y===void 0||w.width===void 0||w.height===void 0)&&(b=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(w.width||b.width),O=Math.ceil(w.height||b.height),D=w.pixelRatio,H=w.x===void 0?Math.floor(b.x):w.x,U=w.y===void 0?Math.floor(b.y):w.y,K=w.offset||0,tt=w.drawBorder||!1,W=w.hitCanvasPixelRatio||1;if(!E||!O){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const J=Math.abs(Math.round(b.x)-H)>.5?1:0,nt=Math.abs(Math.round(b.y)-U)>.5?1:0;E+=K*2+J,O+=K*2+nt,H-=K,U-=K;const rt=new i.SceneCanvas({pixelRatio:D,width:E,height:O}),N=new i.SceneCanvas({pixelRatio:D,width:0,height:0,willReadFrequently:!0}),B=new i.HitCanvas({pixelRatio:W,width:E,height:O}),X=rt.getContext(),Q=B.getContext();return B.isCache=!0,rt.isCache=!0,this._cache.delete(h),this._filterUpToDate=!1,w.imageSmoothingEnabled===!1&&(rt.getContext()._context.imageSmoothingEnabled=!1,N.getContext()._context.imageSmoothingEnabled=!1),X.save(),Q.save(),X.translate(-H,-U),Q.translate(-H,-U),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(d),this.drawScene(rt,this),this.drawHit(B,this),this._isUnderCache=!1,X.restore(),Q.restore(),tt&&(X.save(),X.beginPath(),X.rect(0,0,E,O),X.closePath(),X.setAttr("strokeStyle","red"),X.setAttr("lineWidth",5),X.stroke(),X.restore()),this._cache.set(h,{scene:rt,filter:N,hit:B,x:H,y:U}),this._requestDraw(),this}isCached(){return this._cache.has(h)}getClientRect(p){throw new Error('abstract "getClientRect" method call')}_transformedRect(p,w){const b=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}];let E=1/0,O=1/0,D=-1/0,H=-1/0;const U=this.getAbsoluteTransform(w);return b.forEach(function(K){const tt=U.point(K);E===void 0&&(E=D=tt.x,O=H=tt.y),E=Math.min(E,tt.x),O=Math.min(O,tt.y),D=Math.max(D,tt.x),H=Math.max(H,tt.y)}),{x:E,y:O,width:D-E,height:H-O}}_drawCachedSceneCanvas(p){p.save(),p._applyOpacity(this),p._applyGlobalCompositeOperation(this);const w=this._getCanvasCache();p.translate(w.x,w.y);const b=this._getCachedSceneCanvas(),E=b.pixelRatio;p.drawImage(b._canvas,0,0,b.width/E,b.height/E),p.restore()}_drawCachedHitCanvas(p){const w=this._getCanvasCache(),b=w.hit;p.save(),p.translate(w.x,w.y),p.drawImage(b._canvas,0,0,b.width/b.pixelRatio,b.height/b.pixelRatio),p.restore()}_getCachedSceneCanvas(){let p=this.filters(),w=this._getCanvasCache(),b=w.scene,E=w.filter,O=E.getContext(),D,H,U,K;if(p){if(!this._filterUpToDate){const tt=b.pixelRatio;E.setSize(b.width/b.pixelRatio,b.height/b.pixelRatio);try{for(D=p.length,O.clear(),O.drawImage(b._canvas,0,0,b.getWidth()/tt,b.getHeight()/tt),H=O.getImageData(0,0,E.getWidth(),E.getHeight()),U=0;U<D;U++){if(K=p[U],typeof K!="function"){t.Util.error("Filter should be type of function, but got "+typeof K+" instead. Please check correct filters");continue}K.call(this,H),O.putImageData(H,0,0)}}catch(W){t.Util.error("Unable to apply filter. "+W.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return b}on(p,w){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let b=p.split(c),E=b.length,O,D,H,U,K;for(O=0;O<E;O++)D=b[O],H=D.split("."),U=H[0],K=H[1]||"",this.eventListeners[U]||(this.eventListeners[U]=[]),this.eventListeners[U].push({name:K,handler:w});return this}off(p,w){let b=(p||"").split(c),E=b.length,O,D,H,U,K,tt;if(this._cache&&this._cache.delete(a),!p)for(D in this.eventListeners)this._off(D);for(O=0;O<E;O++)if(H=b[O],U=H.split("."),K=U[0],tt=U[1],K)this.eventListeners[K]&&this._off(K,tt,w);else for(D in this.eventListeners)this._off(D,tt,w);return this}dispatchEvent(p){const w={target:this,type:p.type,evt:p};return this.fire(p.type,w),this}addEventListener(p,w){return this.on(p,function(b){w.call(this,b.evt)}),this}removeEventListener(p){return this.off(p),this}_delegate(p,w,b){const E=this;this.on(p,function(O){const D=O.target.findAncestors(w,!0,E);for(let H=0;H<D.length;H++)O=t.Util.cloneObject(O),O.currentTarget=D[H],b.call(D[H],O)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const p=this.getParent();p&&p.children&&(p.children.splice(this.index,1),p._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(p){const w="get"+t.Util._capitalize(p);return t.Util._isFunction(this[w])?this[w]():this.attrs[p]}getAncestors(){let p=this.getParent(),w=[];for(;p;)w.push(p),p=p.getParent();return w}getAttrs(){return this.attrs||{}}setAttrs(p){return this._batchTransformChanges(()=>{let w,b;if(!p)return this;for(w in p)w!==v&&(b=P+t.Util._capitalize(w),t.Util._isFunction(this[b])?this[b](p[w]):this._setAttr(w,p[w]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(p){if(!this.listening())return!1;const b=this.getParent();return b&&b!==p&&this!==p?b._isListening(p):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(p){if(!this.visible())return!1;const b=this.getParent();return b&&b!==p&&this!==p?b._isVisible(p):!0}shouldDrawHit(p,w=!1){if(p)return this._isVisible(p)&&this._isListening(p);const b=this.getLayer();let E=!1;r.DD._dragElements.forEach(D=>{D.dragStatus==="dragging"&&(D.node.nodeType==="Stage"||D.node.getLayer()===b)&&(E=!0)});const O=!w&&!n.Konva.hitOnDragEnabled&&(E||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let p=this.getDepth(),w=this,b=0,E,O,D,H;function U(tt){for(E=[],O=tt.length,D=0;D<O;D++)H=tt[D],b++,H.nodeType!==u&&(E=E.concat(H.getChildren().slice())),H._id===w._id&&(D=O);E.length>0&&E[0].getDepth()<=p&&U(E)}const K=this.getStage();return w.nodeType!==A&&K&&U(K.getChildren()),b}getDepth(){let p=0,w=this.parent;for(;w;)p++,w=w.parent;return p}_batchTransformChanges(p){this._batchingTransformChange=!0,p(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(C),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(p){return this._batchTransformChanges(()=>{this.x(p.x),this.y(p.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const p=this.getStage();if(!p)return null;const w=p.getPointerPosition();if(!w)return null;const b=this.getAbsoluteTransform().copy();return b.invert(),b.point(w)}getAbsolutePosition(p){let w=!1,b=this.parent;for(;b;){if(b.isCached()){w=!0;break}b=b.parent}w&&!p&&(p=!0);const E=this.getAbsoluteTransform(p).getMatrix(),O=new t.Transform,D=this.offset();return O.m=E.slice(),O.translate(D.x,D.y),O.getTranslation()}setAbsolutePosition(p){const{x:w,y:b,...E}=this._clearTransform();this.attrs.x=w,this.attrs.y=b,this._clearCache(C);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(p.x,p.y),p={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(E),this.setPosition({x:p.x,y:p.y}),this._clearCache(C),this._clearSelfAndDescendantCache(l),this}_setTransform(p){let w;for(w in p)this.attrs[w]=p[w]}_clearTransform(){const p={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,p}move(p){let w=p.x,b=p.y,E=this.x(),O=this.y();return w!==void 0&&(E+=w),b!==void 0&&(O+=b),this.setPosition({x:E,y:O}),this}_eachAncestorReverse(p,w){let b=[],E=this.getParent(),O,D;if(!(w&&w._id===this._id)){for(b.unshift(this);E&&(!w||E._id!==w._id);)b.unshift(E),E=E.parent;for(O=b.length,D=0;D<O;D++)p(b[D])}}rotate(p){return this.rotation(this.rotation()+p),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const p=this.index,w=this.parent.getChildren().length;return p<w-1?(this.parent.children.splice(p,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const p=this.index,w=this.parent.getChildren().length;return p<w-1?(this.parent.children.splice(p,1),this.parent.children.splice(p+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.splice(p-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(p){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(p<0||p>=this.parent.children.length)&&t.Util.warn("Unexpected value "+p+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const w=this.index;return this.parent.children.splice(w,1),this.parent.children.splice(p,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let p=this.opacity();const w=this.getParent();return w&&!w._isUnderCache&&(p*=w.getAbsoluteOpacity()),p}moveTo(p){return this.getParent()!==p&&(this._remove(),p.add(this)),this}toObject(){let p=this.getAttrs(),w,b,E,O,D;const H={attrs:{},className:this.getClassName()};for(w in p)b=p[w],D=t.Util.isObject(b)&&!t.Util._isPlainObject(b)&&!t.Util._isArray(b),!D&&(E=typeof this[w]=="function"&&this[w],delete p[w],O=E?E.call(this):null,p[w]=b,O!==b&&(H.attrs[w]=b));return t.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(p,w,b){const E=[];w&&this._isMatch(p)&&E.push(this);let O=this.parent;for(;O;){if(O===b)return E;O._isMatch(p)&&E.push(O),O=O.parent}return E}isAncestorOf(p){return!1}findAncestor(p,w,b){return this.findAncestors(p,w,b)[0]}_isMatch(p){if(!p)return!1;if(typeof p=="function")return p(this);let w=p.replace(/ /g,"").split(","),b=w.length,E,O;for(E=0;E<b;E++)if(O=w[E],t.Util.isValidSelector(O)||(t.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const p=this.getParent();return p?p.getLayer():null}getStage(){return this._getCache(m,this._getStage)}_getStage(){const p=this.getParent();return p?p.getStage():null}fire(p,w={},b){return w.target=w.target||this,b?this._fireAndBubble(p,w):this._fire(p,w),this}getAbsoluteTransform(p){return p?this._getAbsoluteTransform(p):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(p){let w;if(p)return w=new t.Transform,this._eachAncestorReverse(function(b){const E=b.transformsEnabled();E==="all"?w.multiply(b.getTransform()):E==="position"&&w.translate(b.x()-b.offsetX(),b.y()-b.offsetY())},p),w;{w=this._cache.get(l)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(w):w.reset();const b=this.transformsEnabled();if(b==="all")w.multiply(this.getTransform());else if(b==="position"){const E=this.attrs.x||0,O=this.attrs.y||0,D=this.attrs.offsetX||0,H=this.attrs.offsetY||0;w.translate(E-D,O-H)}return w.dirty=!1,w}}getAbsoluteScale(p){let w=this;for(;w;)w._isUnderCache&&(p=w),w=w.getParent();const E=this.getAbsoluteTransform(p).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(C,this._getTransform)}_getTransform(){var p,w;const b=this._cache.get(C)||new t.Transform;b.reset();const E=this.x(),O=this.y(),D=n.Konva.getAngle(this.rotation()),H=(p=this.attrs.scaleX)!==null&&p!==void 0?p:1,U=(w=this.attrs.scaleY)!==null&&w!==void 0?w:1,K=this.attrs.skewX||0,tt=this.attrs.skewY||0,W=this.attrs.offsetX||0,J=this.attrs.offsetY||0;return(E!==0||O!==0)&&b.translate(E,O),D!==0&&b.rotate(D),(K!==0||tt!==0)&&b.skew(K,tt),(H!==1||U!==1)&&b.scale(H,U),(W!==0||J!==0)&&b.translate(-1*W,-1*J),b.dirty=!1,b}clone(p){let w=t.Util.cloneObject(this.attrs),b,E,O,D,H;for(b in p)w[b]=p[b];const U=new this.constructor(w);for(b in this.eventListeners)for(E=this.eventListeners[b],O=E.length,D=0;D<O;D++)H=E[D],H.name.indexOf(g)<0&&(U.eventListeners[b]||(U.eventListeners[b]=[]),U.eventListeners[b].push(H));return U}_toKonvaCanvas(p){p=p||{};const w=this.getClientRect(),b=this.getStage(),E=p.x!==void 0?p.x:Math.floor(w.x),O=p.y!==void 0?p.y:Math.floor(w.y),D=p.pixelRatio||1,H=new i.SceneCanvas({width:p.width||Math.ceil(w.width)||(b?b.width():0),height:p.height||Math.ceil(w.height)||(b?b.height():0),pixelRatio:D}),U=H.getContext(),K=new i.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(E),height:H.height/H.pixelRatio+Math.abs(O),pixelRatio:H.pixelRatio});return p.imageSmoothingEnabled===!1&&(U._context.imageSmoothingEnabled=!1),U.save(),(E||O)&&U.translate(-1*E,-1*O),this.drawScene(H,void 0,K),U.restore(),H}toCanvas(p){return this._toKonvaCanvas(p)._canvas}toDataURL(p){p=p||{};const w=p.mimeType||null,b=p.quality||null,E=this._toKonvaCanvas(p).toDataURL(w,b);return p.callback&&p.callback(E),E}toImage(p){return new Promise((w,b)=>{try{const E=p==null?void 0:p.callback;E&&delete p.callback,t.Util._urlToImage(this.toDataURL(p),function(O){w(O),E==null||E(O)})}catch(E){b(E)}})}toBlob(p){return new Promise((w,b)=>{try{const E=p==null?void 0:p.callback;E&&delete p.callback,this.toCanvas(p).toBlob(O=>{w(O),E==null||E(O)},p==null?void 0:p.mimeType,p==null?void 0:p.quality)}catch(E){b(E)}})}setSize(p){return this.width(p.width),this.height(p.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(p,w,b){let E=this.eventListeners[p],O,D,H;for(O=0;O<E.length;O++)if(D=E[O].name,H=E[O].handler,(D!=="konva"||w==="konva")&&(!w||D===w)&&(!b||b===H)){if(E.splice(O,1),E.length===0){delete this.eventListeners[p];break}O--}}_fireChangeEvent(p,w,b){this._fire(p+_,{oldVal:w,newVal:b})}addName(p){if(!this.hasName(p)){const w=this.name(),b=w?w+" "+p:p;this.name(b)}return this}hasName(p){if(!p)return!1;const w=this.name();return w?(w||"").split(/\s/g).indexOf(p)!==-1:!1}removeName(p){const w=(this.name()||"").split(/\s/g),b=w.indexOf(p);return b!==-1&&(w.splice(b,1),this.name(w.join(" "))),this}setAttr(p,w){const b=this[P+t.Util._capitalize(p)];return t.Util._isFunction(b)?b.call(this,w):this._setAttr(p,w),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const p=this.getLayer()||this.getStage();p==null||p.batchDraw()}}_setAttr(p,w){const b=this.attrs[p];b===w&&!t.Util.isObject(w)||(w==null?delete this.attrs[p]:this.attrs[p]=w,this._shouldFireChangeEvents&&this._fireChangeEvent(p,b,w),this._requestDraw())}_setComponentAttr(p,w,b){let E;b!==void 0&&(E=this.attrs[p],E||(this.attrs[p]=this.getAttr(p)),this.attrs[p][w]=b,this._fireChangeEvent(p,E,b))}_fireAndBubble(p,w,b){if(w&&this.nodeType===u&&(w.target=this),!((p===y||p===S)&&(b&&(this===b||this.isAncestorOf&&this.isAncestorOf(b))||this.nodeType==="Stage"&&!b))){this._fire(p,w);const O=(p===y||p===S)&&b&&b.isAncestorOf&&b.isAncestorOf(this)&&!b.isAncestorOf(this.parent);(w&&!w.cancelBubble||!w)&&this.parent&&this.parent.isListening()&&!O&&(b&&b.parent?this._fireAndBubble.call(this.parent,p,w,b):this._fireAndBubble.call(this.parent,p,w))}}_getProtoListeners(p){var w,b,E;const O=(w=this._cache.get(a))!==null&&w!==void 0?w:{};let D=O==null?void 0:O[p];if(D===void 0){D=[];let H=Object.getPrototypeOf(this);for(;H;){const U=(E=(b=H.eventListeners)===null||b===void 0?void 0:b[p])!==null&&E!==void 0?E:[];D.push(...U),H=Object.getPrototypeOf(H)}O[p]=D,this._cache.set(a,O)}return D}_fire(p,w){w=w||{},w.currentTarget=this,w.type=p;const b=this._getProtoListeners(p);if(b)for(var E=0;E<b.length;E++)b[E].handler.call(this,w);const O=this.eventListeners[p];if(O)for(var E=0;E<O.length;E++)O[E].handler.call(this,w)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(p){const w=p?p.pointerId:void 0,b=this.getStage(),E=this.getAbsolutePosition();if(!b)return;const O=b._getPointerById(w)||b._changedPointerPositions[0]||E;r.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-E.x,y:O.y-E.y},dragStatus:"ready",pointerId:w})}startDrag(p,w=!0){r.DD._dragElements.has(this._id)||this._createDragElement(p);const b=r.DD._dragElements.get(this._id);b.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:p&&p.evt},w)}_setDragPosition(p,w){const b=this.getStage()._getPointerById(w.pointerId);if(!b)return;let E={x:b.x-w.offset.x,y:b.y-w.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const D=O.call(this,E,p);D?E=D:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(p){const w=r.DD._dragElements.get(this._id);w&&(w.dragStatus="stopped"),r.DD._endDragBefore(p),r.DD._endDragAfter(p)}setDraggable(p){this._setAttr("draggable",p),this._dragChange()}isDragging(){const p=r.DD._dragElements.get(this._id);return p?p.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(p){if(!(!(p.evt.button!==void 0)||n.Konva.dragButtons.indexOf(p.evt.button)>=0)||this.isDragging())return;let E=!1;r.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(E=!0)}),E||this._createDragElement(p)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const w=r.DD._dragElements.get(this._id),b=w&&w.dragStatus==="dragging",E=w&&w.dragStatus==="ready";b?this.stopDrag():E&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(p={x:0,y:0}){const w=this.getStage();if(!w)return!1;const b={x:-p.x,y:-p.y,width:w.width()+2*p.x,height:w.height()+2*p.y};return t.Util.haveIntersection(b,this.getClientRect())}static create(p,w){return t.Util._isString(p)&&(p=JSON.parse(p)),this._createNode(p,w)}static _createNode(p,w){let b=zn.prototype.getClassName.call(p),E=p.children,O,D,H;w&&(p.attrs.container=w),n.Konva[b]||(t.Util.warn('Can not find a node with class name "'+b+'". Fallback to "Shape".'),b="Shape");const U=n.Konva[b];if(O=new U(p.attrs),E)for(D=E.length,H=0;H<D;H++)O.add(zn._createNode(E[H]));return O}};Ge.Node=x,x.prototype.nodeType="Node",x.prototype._attrsAffectingSize=[],x.prototype.eventListeners={},x.prototype.on.call(x.prototype,R,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(C),this._clearSelfAndDescendantCache(l)}),x.prototype.on.call(x.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),x.prototype.on.call(x.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),x.prototype.on.call(x.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const M=e.Factory.addGetterSetter;return M(x,"zIndex"),M(x,"absolutePosition"),M(x,"position"),M(x,"x",0,(0,s.getNumberValidator)()),M(x,"y",0,(0,s.getNumberValidator)()),M(x,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),M(x,"opacity",1,(0,s.getNumberValidator)()),M(x,"name","",(0,s.getStringValidator)()),M(x,"id","",(0,s.getStringValidator)()),M(x,"rotation",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"scale",["x","y"]),M(x,"scaleX",1,(0,s.getNumberValidator)()),M(x,"scaleY",1,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"skew",["x","y"]),M(x,"skewX",0,(0,s.getNumberValidator)()),M(x,"skewY",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"offset",["x","y"]),M(x,"offsetX",0,(0,s.getNumberValidator)()),M(x,"offsetY",0,(0,s.getNumberValidator)()),M(x,"dragDistance",void 0,(0,s.getNumberValidator)()),M(x,"width",0,(0,s.getNumberValidator)()),M(x,"height",0,(0,s.getNumberValidator)()),M(x,"listening",!0,(0,s.getBooleanValidator)()),M(x,"preventDefault",!0,(0,s.getBooleanValidator)()),M(x,"filters",void 0,function(L){return this._filterUpToDate=!1,L}),M(x,"visible",!0,(0,s.getBooleanValidator)()),M(x,"transformsEnabled","all",(0,s.getStringValidator)()),M(x,"size"),M(x,"dragBoundFunc"),M(x,"draggable",!1,(0,s.getBooleanValidator)()),e.Factory.backCompat(x,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ge}var Le={},ss;function fn(){if(ss)return Le;ss=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.Container=void 0;const t=ft(),e=Tt(),i=gt();let n=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[],a=[];return o.forEach(function(l){s(l)&&a.push(l)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let a=0;a<s.length;a++)this.add(s[a]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const a=[];return this._descendants(l=>{const d=l._isMatch(s);return d&&a.push(l),!!(d&&o)}),a}_descendants(s){let o=!1;const a=this.getChildren();for(const l of a){if(o=s(l),o)return!0;if(l.hasChildren()&&(o=l._descendants(s),o))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(s)&&o.push(a)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(s,o,a){const l=this.getLayer(),d=s||l&&l.getCanvas(),h=d&&d.getContext(),_=this._getCanvasCache(),v=_&&_.scene,g=d&&d.isCache;if(!this.isVisible()&&!g)return this;if(v){h.save();const f=this.getAbsoluteTransform(o).getMatrix();h.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",d,o,a);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),l=s||a&&a.hitCanvas,d=l&&l.getContext(),h=this._getCanvasCache();if(h&&h.hit){d.save();const v=this.getAbsoluteTransform(o).getMatrix();d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",l,o);return this}_drawChildren(s,o,a,l){var d;const h=o&&o.getContext(),_=this.clipWidth(),v=this.clipHeight(),g=this.clipFunc(),f=typeof _=="number"&&typeof v=="number"||g,y=a===this;if(f){h.save();const P=this.getAbsoluteTransform(a);let u=P.getMatrix();h.transform(u[0],u[1],u[2],u[3],u[4],u[5]),h.beginPath();let c;if(g)c=g.call(this,h,this);else{const m=this.clipX(),C=this.clipY();h.rect(m||0,C||0,_,v)}h.clip.apply(h,c),u=P.copy().invert().getMatrix(),h.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const S=!y&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";S&&(h.save(),h._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(P){P[s](o,a,l)}),S&&h.restore(),f&&h.restore()}getClientRect(s={}){var o;const a=s.skipTransform,l=s.relativeTo;let d,h,_,v,g={x:1/0,y:1/0,width:0,height:0};const f=this;(o=this.children)===null||o===void 0||o.forEach(function(P){if(!P.visible())return;const u=P.getClientRect({relativeTo:f,skipShadow:s.skipShadow,skipStroke:s.skipStroke});u.width===0&&u.height===0||(d===void 0?(d=u.x,h=u.y,_=u.x+u.width,v=u.y+u.height):(d=Math.min(d,u.x),h=Math.min(h,u.y),_=Math.max(_,u.x+u.width),v=Math.max(v,u.y+u.height)))});const y=this.find("Shape");let S=!1;for(let P=0;P<y.length;P++)if(y[P]._isVisible(this)){S=!0;break}return S&&d!==void 0?g={x:d,y:h,width:_-d,height:v-h}:g={x:0,y:0,width:0,height:0},a?g:this._transformedRect(g,l)}};return Le.Container=n,t.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(n,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipFunc"),Le}var En={},he={},os;function ra(){if(os)return he;os=1,Object.defineProperty(he,"__esModule",{value:!0}),he.getCapturedShape=n,he.createEvent=r,he.hasPointerCapture=s,he.setPointerCapture=o,he.releaseCapture=a;const t=ut(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function n(l){return e.get(l)}function r(l){return{evt:l,pointerId:l.pointerId}}function s(l,d){return e.get(l)===d}function o(l,d){a(l),d.getStage()&&(e.set(l,d),i&&d._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function a(l,d){const h=e.get(l);if(!h)return;const _=h.getStage();_&&_.content,e.delete(l),i&&h._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return he}var as;function qh(){return as||(as=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=wt(),i=ft(),n=fn(),r=ut(),s=un(),o=mr(),a=ut(),l=ra(),d="Stage",h="string",_="px",v="mouseout",g="mouseleave",f="mouseover",y="mouseenter",S="mousemove",P="mousedown",u="mouseup",c="pointermove",m="pointerdown",C="pointerup",A="pointercancel",G="lostpointercapture",R="pointerout",T="pointerleave",x="pointerover",M="pointerenter",L="contextmenu",p="touchstart",w="touchend",b="touchmove",E="touchcancel",O="wheel",D=5,H=[[y,"_pointerenter"],[P,"_pointerdown"],[S,"_pointermove"],[u,"_pointerup"],[g,"_pointerleave"],[p,"_pointerdown"],[b,"_pointermove"],[w,"_pointerup"],[E,"_pointercancel"],[f,"_pointerover"],[O,"_wheel"],[L,"_contextmenu"],[m,"_pointerdown"],[c,"_pointermove"],[C,"_pointerup"],[A,"_pointercancel"],[G,"_lostpointercapture"]],U={mouse:{[R]:v,[T]:g,[x]:f,[M]:y,[c]:S,[m]:P,[C]:u,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[R]:"touchout",[T]:"touchleave",[x]:"touchover",[M]:"touchenter",[c]:b,[m]:p,[C]:w,[A]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[R]:R,[T]:T,[x]:x,[M]:M,[c]:c,[m]:m,[C]:C,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},K=rt=>rt.indexOf("pointer")>=0?"pointer":rt.indexOf("touch")>=0?"touch":"mouse",tt=rt=>{const N=K(rt);if(N==="pointer")return r.Konva.pointerEventsEnabled&&U.pointer;if(N==="touch")return U.touch;if(N==="mouse")return U.mouse};function W(rt={}){return(rt.clipFunc||rt.clipWidth||rt.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),rt}const J="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class nt extends n.Container{constructor(N){super(W(N)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(N){const B=N.getType()==="Layer",X=N.getType()==="FastLayer";B||X||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const N=this.visible()?"":"none";this.content.style.display=N}setContainer(N){if(typeof N===h){if(N.charAt(0)==="."){const X=N.slice(1);N=document.getElementsByClassName(X)[0]}else{var B;N.charAt(0)!=="#"?B=N:B=N.slice(1),N=document.getElementById(B)}if(!N)throw"Can not find container in document with id "+B}return this._setAttr("container",N),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),N.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const N=this.children,B=N.length;for(let X=0;X<B;X++)N[X].clear();return this}clone(N){return N||(N={}),N.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,N)}destroy(){super.destroy();const N=this.content;N&&e.Util._isInDocument(N)&&this.container().removeChild(N);const B=t.stages.indexOf(this);return B>-1&&t.stages.splice(B,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const N=this._pointerPositions[0]||this._changedPointerPositions[0];return N?{x:N.x,y:N.y}:(e.Util.warn(J),null)}_getPointerById(N){return this._pointerPositions.find(B=>B.id===N)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(N){N=N||{},N.x=N.x||0,N.y=N.y||0,N.width=N.width||this.width(),N.height=N.height||this.height();const B=new s.SceneCanvas({width:N.width,height:N.height,pixelRatio:N.pixelRatio||1}),X=B.getContext()._context,Q=this.children;return(N.x||N.y)&&X.translate(-1*N.x,-1*N.y),Q.forEach(function(st){if(!st.isVisible())return;const F=st._toKonvaCanvas(N);X.drawImage(F._canvas,N.x,N.y,F.getWidth()/F.getPixelRatio(),F.getHeight()/F.getPixelRatio())}),B}getIntersection(N){if(!N)return null;const B=this.children,X=B.length,Q=X-1;for(let st=Q;st>=0;st--){const F=B[st].getIntersection(N);if(F)return F}return null}_resizeDOM(){const N=this.width(),B=this.height();this.content&&(this.content.style.width=N+_,this.content.style.height=B+_),this.bufferCanvas.setSize(N,B),this.bufferHitCanvas.setSize(N,B),this.children.forEach(X=>{X.setSize({width:N,height:B}),X.draw()})}add(N,...B){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}super.add(N);const X=this.children.length;return X>D&&e.Util.warn("The stage has "+X+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),N.setSize({width:this.width(),height:this.height()}),N.draw(),r.Konva.isBrowser&&this.content.appendChild(N.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(N){return l.hasPointerCapture(N,this)}setPointerCapture(N){l.setPointerCapture(N,this)}releaseCapture(N){l.releaseCapture(N,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&H.forEach(([N,B])=>{this.content.addEventListener(N,X=>{this[B](X)},{passive:!1})})}_pointerenter(N){this.setPointersPositions(N);const B=tt(N.type);B&&this._fire(B.pointerenter,{evt:N,target:this,currentTarget:this})}_pointerover(N){this.setPointersPositions(N);const B=tt(N.type);B&&this._fire(B.pointerover,{evt:N,target:this,currentTarget:this})}_getTargetShape(N){let B=this[N+"targetShape"];return B&&!B.getStage()&&(B=null),B}_pointerleave(N){const B=tt(N.type),X=K(N.type);if(!B)return;this.setPointersPositions(N);const Q=this._getTargetShape(X),st=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;Q&&st?(Q._fireAndBubble(B.pointerout,{evt:N}),Q._fireAndBubble(B.pointerleave,{evt:N}),this._fire(B.pointerleave,{evt:N,target:this,currentTarget:this}),this[X+"targetShape"]=null):st&&(this._fire(B.pointerleave,{evt:N,target:this,currentTarget:this}),this._fire(B.pointerout,{evt:N,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(N){const B=tt(N.type),X=K(N.type);if(!B)return;this.setPointersPositions(N);let Q=!1;this._changedPointerPositions.forEach(st=>{const F=this.getIntersection(st);if(o.DD.justDragged=!1,r.Konva["_"+X+"ListenClick"]=!0,!F||!F.isListening()){this[X+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&F.setPointerCapture(st.id),this[X+"ClickStartShape"]=F,F._fireAndBubble(B.pointerdown,{evt:N,pointerId:st.id}),Q=!0;const k=N.type.indexOf("touch")>=0;F.preventDefault()&&N.cancelable&&k&&N.preventDefault()}),Q||this._fire(B.pointerdown,{evt:N,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(N){const B=tt(N.type),X=K(N.type);if(!B||(r.Konva.isDragging()&&o.DD.node.preventDefault()&&N.cancelable&&N.preventDefault(),this.setPointersPositions(N),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const st={};let F=!1;const k=this._getTargetShape(X);this._changedPointerPositions.forEach(I=>{const V=l.getCapturedShape(I.id)||this.getIntersection(I),j=I.id,q={evt:N,pointerId:j},Y=k!==V;if(Y&&k&&(k._fireAndBubble(B.pointerout,{...q},V),k._fireAndBubble(B.pointerleave,{...q},V)),V){if(st[V._id])return;st[V._id]=!0}V&&V.isListening()?(F=!0,Y&&(V._fireAndBubble(B.pointerover,{...q},k),V._fireAndBubble(B.pointerenter,{...q},k),this[X+"targetShape"]=V),V._fireAndBubble(B.pointermove,{...q})):k&&(this._fire(B.pointerover,{evt:N,target:this,currentTarget:this,pointerId:j}),this[X+"targetShape"]=null)}),F||this._fire(B.pointermove,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(N){const B=tt(N.type),X=K(N.type);if(!B)return;this.setPointersPositions(N);const Q=this[X+"ClickStartShape"],st=this[X+"ClickEndShape"],F={};let k=!1;this._changedPointerPositions.forEach(I=>{const V=l.getCapturedShape(I.id)||this.getIntersection(I);if(V){if(V.releaseCapture(I.id),F[V._id])return;F[V._id]=!0}const j=I.id,q={evt:N,pointerId:j};let Y=!1;r.Konva["_"+X+"InDblClickWindow"]?(Y=!0,clearTimeout(this[X+"DblTimeout"])):o.DD.justDragged||(r.Konva["_"+X+"InDblClickWindow"]=!0,clearTimeout(this[X+"DblTimeout"])),this[X+"DblTimeout"]=setTimeout(function(){r.Konva["_"+X+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),V&&V.isListening()?(k=!0,this[X+"ClickEndShape"]=V,V._fireAndBubble(B.pointerup,{...q}),r.Konva["_"+X+"ListenClick"]&&Q&&Q===V&&(V._fireAndBubble(B.pointerclick,{...q}),Y&&st&&st===V&&V._fireAndBubble(B.pointerdblclick,{...q}))):(this[X+"ClickEndShape"]=null,r.Konva["_"+X+"ListenClick"]&&this._fire(B.pointerclick,{evt:N,target:this,currentTarget:this,pointerId:j}),Y&&this._fire(B.pointerdblclick,{evt:N,target:this,currentTarget:this,pointerId:j}))}),k||this._fire(B.pointerup,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+X+"ListenClick"]=!1,N.cancelable&&X!=="touch"&&X!=="pointer"&&N.preventDefault()}_contextmenu(N){this.setPointersPositions(N);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(L,{evt:N}):this._fire(L,{evt:N,target:this,currentTarget:this})}_wheel(N){this.setPointersPositions(N);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(O,{evt:N}):this._fire(O,{evt:N,target:this,currentTarget:this})}_pointercancel(N){this.setPointersPositions(N);const B=l.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(C,l.createEvent(N)),l.releaseCapture(N.pointerId)}_lostpointercapture(N){l.releaseCapture(N.pointerId)}setPointersPositions(N){const B=this._getContentPosition();let X=null,Q=null;N=N||window.event,N.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(N.touches,st=>{this._pointerPositions.push({id:st.identifier,x:(st.clientX-B.left)/B.scaleX,y:(st.clientY-B.top)/B.scaleY})}),Array.prototype.forEach.call(N.changedTouches||N.touches,st=>{this._changedPointerPositions.push({id:st.identifier,x:(st.clientX-B.left)/B.scaleX,y:(st.clientY-B.top)/B.scaleY})})):(X=(N.clientX-B.left)/B.scaleX,Q=(N.clientY-B.top)/B.scaleY,this.pointerPos={x:X,y:Q},this._pointerPositions=[{x:X,y:Q,id:e.Util._getFirstPointerId(N)}],this._changedPointerPositions=[{x:X,y:Q,id:e.Util._getFirstPointerId(N)}])}_setPointerPosition(N){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(N)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const N=this.content.getBoundingClientRect();return{top:N.top,left:N.left,scaleX:N.width/this.content.clientWidth||1,scaleY:N.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const N=this.container();if(!N)throw"Stage has no container. A container is required.";N.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),N.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(N){N.batchDraw()}),this}}t.Stage=nt,nt.prototype.nodeType=d,(0,a._registerNode)(nt),i.Factory.addGetterSetter(nt,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(rt=>{rt.batchDraw()})})}(En)),En}var De={},Fn={},ls;function Et(){return ls||(ls=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ut(),i=wt(),n=ft(),r=Tt(),s=gt(),o=ut(),a=ra(),l="hasShadow",d="shadowRGBA",h="patternImage",_="linearGradient",v="radialGradient";let g;function f(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}t.shapes={};function y(T){const x=this.attrs.fillRule;x?T.fill(x):T.fill()}function S(T){T.stroke()}function P(T){const x=this.attrs.fillRule;x?T.fill(x):T.fill()}function u(T){T.stroke()}function c(){this._clearCache(l)}function m(){this._clearCache(d)}function C(){this._clearCache(h)}function A(){this._clearCache(_)}function G(){this._clearCache(v)}class R extends r.Node{constructor(x){super(x);let M;for(;M=i.Util.getRandomColor(),!(M&&!(M in t.shapes)););this.colorKey=M,t.shapes[M]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const M=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(M&&M.setTransform){const L=new i.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(e.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const p=L.getMatrix(),w=typeof DOMMatrix>"u"?{a:p[0],b:p[1],c:p[2],d:p[3],e:p[4],f:p[5]}:new DOMMatrix(p);M.setTransform(w)}return M}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const M=f(),L=this.fillLinearGradientStartPoint(),p=this.fillLinearGradientEndPoint(),w=M.createLinearGradient(L.x,L.y,p.x,p.y);for(let b=0;b<x.length;b+=2)w.addColorStop(x[b],x[b+1]);return w}}_getRadialGradient(){return this._getCache(v,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const M=f(),L=this.fillRadialGradientStartPoint(),p=this.fillRadialGradientEndPoint(),w=M.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),p.x,p.y,this.fillRadialGradientEndRadius());for(let b=0;b<x.length;b+=2)w.addColorStop(x[b],x[b+1]);return w}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=i.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const M=this.getStage();if(!M)return!1;const L=M.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var M;if(!((M=this.attrs.perfectDrawEnabled)!==null&&M!==void 0?M:!0))return!1;const p=x||this.hasFill(),w=this.hasStroke(),b=this.getAbsoluteOpacity()!==1;if(p&&w&&b)return!0;const E=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(p&&w&&E&&O)}setStrokeHitEnabled(x){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let M=!1,L=this.getParent();for(;L;){if(L.isCached()){M=!0;break}L=L.getParent()}const p=x.skipTransform,w=x.relativeTo||M&&this.getStage()||void 0,b=this.getSelfRect(),O=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=b.width+O,H=b.height+O,U=!x.skipShadow&&this.hasShadow(),K=U?this.shadowOffsetX():0,tt=U?this.shadowOffsetY():0,W=D+Math.abs(K),J=H+Math.abs(tt),nt=U&&this.shadowBlur()||0,rt=W+nt*2,N=J+nt*2,B={width:rt,height:N,x:-(O/2+nt)+Math.min(K,0)+b.x,y:-(O/2+nt)+Math.min(tt,0)+b.y};return p?B:this._transformedRect(B,w)}drawScene(x,M,L){const p=this.getLayer();let w=x||p.getCanvas(),b=w.getContext(),E=this._getCanvasCache(),O=this.getSceneFunc(),D=this.hasShadow(),H,U;const K=w.isCache,tt=M===this;if(!this.isVisible()&&!tt)return this;if(E){b.save();const J=this.getAbsoluteTransform(M).getMatrix();return b.transform(J[0],J[1],J[2],J[3],J[4],J[5]),this._drawCachedSceneCanvas(b),b.restore(),this}if(!O)return this;if(b.save(),this._useBufferCanvas()&&!K){H=this.getStage();const J=L||H.bufferCanvas;U=J.getContext(),U.clear(),U.save(),U._applyLineJoin(this);var W=this.getAbsoluteTransform(M).getMatrix();U.transform(W[0],W[1],W[2],W[3],W[4],W[5]),O.call(this,U,this),U.restore();const nt=J.pixelRatio;D&&b._applyShadow(this),b._applyOpacity(this),b._applyGlobalCompositeOperation(this),b.drawImage(J._canvas,0,0,J.width/nt,J.height/nt)}else{if(b._applyLineJoin(this),!tt){var W=this.getAbsoluteTransform(M).getMatrix();b.transform(W[0],W[1],W[2],W[3],W[4],W[5]),b._applyOpacity(this),b._applyGlobalCompositeOperation(this)}D&&b._applyShadow(this),O.call(this,b,this)}return b.restore(),this}drawHit(x,M,L=!1){if(!this.shouldDrawHit(M,L))return this;const p=this.getLayer(),w=x||p.hitCanvas,b=w&&w.getContext(),E=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),D=O&&O.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){b.save();const U=this.getAbsoluteTransform(M).getMatrix();return b.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(b),b.restore(),this}if(!E)return this;if(b.save(),b._applyLineJoin(this),!(this===M)){const U=this.getAbsoluteTransform(M).getMatrix();b.transform(U[0],U[1],U[2],U[3],U[4],U[5])}return E.call(this,b,this),b.restore(),this}drawHitFromCache(x=0){const M=this._getCanvasCache(),L=this._getCachedSceneCanvas(),p=M.hit,w=p.getContext(),b=p.getWidth(),E=p.getHeight();w.clear(),w.drawImage(L._canvas,0,0,b,E);try{const O=w.getImageData(0,0,b,E),D=O.data,H=D.length,U=i.Util._hexToRgb(this.colorKey);for(let K=0;K<H;K+=4)D[K+3]>x?(D[K]=U.r,D[K+1]=U.g,D[K+2]=U.b,D[K+3]=255):D[K+3]=0;w.putImageData(O,0,0)}catch(O){i.Util.error("Unable to draw hit graph from cached scene canvas. "+O.message)}return this}hasPointerCapture(x){return a.hasPointerCapture(x,this)}setPointerCapture(x){a.setPointerCapture(x,this)}releaseCapture(x){a.releaseCapture(x,this)}}t.Shape=R,R.prototype._fillFunc=y,R.prototype._strokeFunc=S,R.prototype._fillFuncHit=P,R.prototype._strokeFuncHit=u,R.prototype._centroid=!1,R.prototype.nodeType="Shape",(0,o._registerNode)(R),R.prototype.eventListeners={},R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",c),R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),n.Factory.addGetterSetter(R,"stroke",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(R,"strokeWidth",2,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(R,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(R,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(R,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(R,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(R,"lineJoin"),n.Factory.addGetterSetter(R,"lineCap"),n.Factory.addGetterSetter(R,"sceneFunc"),n.Factory.addGetterSetter(R,"hitFunc"),n.Factory.addGetterSetter(R,"dash"),n.Factory.addGetterSetter(R,"dashOffset",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"shadowColor",void 0,(0,s.getStringValidator)()),n.Factory.addGetterSetter(R,"shadowBlur",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"shadowOpacity",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(R,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(R,"shadowOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"shadowOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillPatternImage"),n.Factory.addGetterSetter(R,"fill",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(R,"fillPatternX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillPatternY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(R,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(R,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(R,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(R,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(R,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(R,"fillEnabled",!0),n.Factory.addGetterSetter(R,"strokeEnabled",!0),n.Factory.addGetterSetter(R,"shadowEnabled",!0),n.Factory.addGetterSetter(R,"dashEnabled",!0),n.Factory.addGetterSetter(R,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(R,"fillPriority","color"),n.Factory.addComponentsGetterSetter(R,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(R,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(R,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(R,"fillPatternScaleX",1,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(R,"fillPatternScaleY",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(R,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(R,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(R,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(R,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(R,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(R,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(R,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(R,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(R,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(R,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(R,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(R,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(R,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(R,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(R,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(R,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(R,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(R,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(R,"fillPatternRotation",0),n.Factory.addGetterSetter(R,"fillRule",void 0,(0,s.getStringValidator)()),n.Factory.backCompat(R,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Fn)),Fn}var hs;function sa(){if(hs)return De;hs=1,Object.defineProperty(De,"__esModule",{value:!0}),De.Layer=void 0;const t=wt(),e=fn(),i=Tt(),n=ft(),r=un(),s=gt(),o=Et(),a=ut(),l="#",d="beforeDraw",h="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],v=_.length;let g=class extends e.Container{constructor(y){super(y),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),y<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[y+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),y&&y.parentNode&&t.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:S}){return this.canvas.setSize(y,S),this.hitCanvas.setSize(y,S),this._setSmoothEnabled(),this}_validateAdd(y){const S=y.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let S=1,P=!1;for(;;){for(let u=0;u<v;u++){const c=_[u],m=this._getIntersection({x:y.x+c.x*S,y:y.y+c.y*S}),C=m.shape;if(C)return C;if(P=!!m.antialiased,!m.antialiased)break}if(P)S+=1;else return null}}_getIntersection(y){const S=this.hitCanvas.pixelRatio,P=this.hitCanvas.context.getImageData(Math.round(y.x*S),Math.round(y.y*S),1,1).data,u=P[3];if(u===255){const c=t.Util._rgbToHex(P[0],P[1],P[2]),m=o.shapes[l+c];return m?{shape:m}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(y,S){const P=this.getLayer(),u=y||P&&P.getCanvas();return this._fire(d,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),e.Container.prototype.drawScene.call(this,u,S),this._fire(h,{node:this}),this}drawHit(y,S){const P=this.getLayer(),u=y||P&&P.hitCanvas;return P&&P.clearBeforeDraw()&&P.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,u,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return De.Layer=g,g.prototype.nodeType="Layer",(0,a._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),De}var Ie={},cs;function jh(){if(cs)return Ie;cs=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.FastLayer=void 0;const t=wt(),e=sa(),i=ut();let n=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Ie.FastLayer=n,n.prototype.nodeType="FastLayer",(0,i._registerNode)(n),Ie}var Ue={},ds;function yr(){if(ds)return Ue;ds=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.Group=void 0;const t=wt(),e=fn(),i=ut();let n=class extends e.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Ue.Group=n,n.prototype.nodeType="Group",(0,i._registerNode)(n),Ue}var Be={},us;function vr(){if(us)return Be;us=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.Animation=void 0;const t=ut(),e=wt(),i=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let n=class Te{constructor(s,o){this.id=Te.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,a=o.length;for(let l=0;l<a;l++)if(o[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=Te.animations,a=o.length;for(let l=0;l<a;l++)if(o[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Te._addAnimation(this),this}stop(){return Te._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,a=this.animations,l=a.length;for(let d=0;d<l;d++)if(a[d].id===o){this.animations.splice(d,1);break}}static _runFrames(){const s={},o=this.animations;for(let a=0;a<o.length;a++){const l=o[a],d=l.layers,h=l.func;l._updateFrameObject(i());const _=d.length;let v;if(h?v=h.call(l,l.frame)!==!1:v=!0,!!v)for(let g=0;g<_;g++){const f=d[g];f._id!==void 0&&(s[f._id]=f)}}for(const a in s)s.hasOwnProperty(a)&&s[a].batchDraw()}static _animationLoop(){const s=Te;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Be.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Be}var Mn={},fs;function Kh(){return fs||(fs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=wt(),i=vr(),n=Tt(),r=ut(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,d=["fill","stroke","shadowColor"];let h=0;class _{constructor(f,y,S,P,u,c,m){this.prop=f,this.propFunc=y,this.begin=P,this._pos=P,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=u-this.begin,this.pause()}fire(f){const y=this[f];y&&y()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===l&&this.setTime(this.duration-f)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class v{constructor(f){const y=this,S=f.node,P=S._id,u=f.easing||t.Easings.Linear,c=!!f.yoyo;let m,C;typeof f.duration>"u"?m=.3:f.duration===0?m=.001:m=f.duration,this.node=S,this._id=h++;const A=S.getLayer()||(S instanceof r.Konva.Stage?S.getLayers():null);A||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){y.tween.onEnterFrame()},A),this.tween=new _(C,function(G){y._tweenFunc(G)},u,0,1,m*1e3,c),this._addListeners(),v.attrs[P]||(v.attrs[P]={}),v.attrs[P][this._id]||(v.attrs[P][this._id]={}),v.tweens[P]||(v.tweens[P]={});for(C in f)s[C]===void 0&&this._addAttr(C,f[C]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,y){const S=this.node,P=S._id;let u,c,m,C,A;const G=v.tweens[P][f];G&&delete v.attrs[P][G][f];let R=S.getAttr(f);if(e.Util._isArray(y))if(u=[],c=Math.max(y.length,R.length),f==="points"&&y.length!==R.length&&(y.length>R.length?(C=R,R=e.Util._prepareArrayForTween(R,y,S.closed())):(m=y,y=e.Util._prepareArrayForTween(y,R,S.closed()))),f.indexOf("fill")===0)for(let T=0;T<c;T++)if(T%2===0)u.push(y[T]-R[T]);else{const x=e.Util.colorToRGBA(R[T]);A=e.Util.colorToRGBA(y[T]),R[T]=x,u.push({r:A.r-x.r,g:A.g-x.g,b:A.b-x.b,a:A.a-x.a})}else for(let T=0;T<c;T++)u.push(y[T]-R[T]);else d.indexOf(f)!==-1?(R=e.Util.colorToRGBA(R),A=e.Util.colorToRGBA(y),u={r:A.r-R.r,g:A.g-R.g,b:A.b-R.b,a:A.a-R.a}):u=y-R;v.attrs[P][this._id][f]={start:R,diff:u,end:y,trueEnd:m,trueStart:C},v.tweens[P][f]=this._id}_tweenFunc(f){const y=this.node,S=v.attrs[y._id][this._id];let P,u,c,m,C,A,G,R;for(P in S){if(u=S[P],c=u.start,m=u.diff,R=u.end,e.Util._isArray(c))if(C=[],G=Math.max(c.length,R.length),P.indexOf("fill")===0)for(A=0;A<G;A++)A%2===0?C.push((c[A]||0)+m[A]*f):C.push("rgba("+Math.round(c[A].r+m[A].r*f)+","+Math.round(c[A].g+m[A].g*f)+","+Math.round(c[A].b+m[A].b*f)+","+(c[A].a+m[A].a*f)+")");else for(A=0;A<G;A++)C.push((c[A]||0)+m[A]*f);else d.indexOf(P)!==-1?C="rgba("+Math.round(c.r+m.r*f)+","+Math.round(c.g+m.g*f)+","+Math.round(c.b+m.b*f)+","+(c.a+m.a*f)+")":C=c+m*f;y.setAttr(P,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,y=v.attrs[f._id][this._id];y.points&&y.points.trueEnd&&f.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,y=v.attrs[f._id][this._id];y.points&&y.points.trueStart&&f.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const f=this.node._id,y=this._id,S=v.tweens[f];this.pause();for(const P in S)delete v.tweens[f][P];delete v.attrs[f][y]}}t.Tween=v,v.attrs={},v.tweens={},n.Node.prototype.to=function(g){const f=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),f&&f()},new v(g).play()},t.Easings={BackEaseIn(g,f,y,S){return y*(g/=S)*g*((1.70158+1)*g-1.70158)+f},BackEaseOut(g,f,y,S){return y*((g=g/S-1)*g*((1.70158+1)*g+1.70158)+1)+f},BackEaseInOut(g,f,y,S){let P=1.70158;return(g/=S/2)<1?y/2*(g*g*(((P*=1.525)+1)*g-P))+f:y/2*((g-=2)*g*(((P*=1.525)+1)*g+P)+2)+f},ElasticEaseIn(g,f,y,S,P,u){let c=0;return g===0?f:(g/=S)===1?f+y:(u||(u=S*.3),!P||P<Math.abs(y)?(P=y,c=u/4):c=u/(2*Math.PI)*Math.asin(y/P),-(P*Math.pow(2,10*(g-=1))*Math.sin((g*S-c)*(2*Math.PI)/u))+f)},ElasticEaseOut(g,f,y,S,P,u){let c=0;return g===0?f:(g/=S)===1?f+y:(u||(u=S*.3),!P||P<Math.abs(y)?(P=y,c=u/4):c=u/(2*Math.PI)*Math.asin(y/P),P*Math.pow(2,-10*g)*Math.sin((g*S-c)*(2*Math.PI)/u)+y+f)},ElasticEaseInOut(g,f,y,S,P,u){let c=0;return g===0?f:(g/=S/2)===2?f+y:(u||(u=S*(.3*1.5)),!P||P<Math.abs(y)?(P=y,c=u/4):c=u/(2*Math.PI)*Math.asin(y/P),g<1?-.5*(P*Math.pow(2,10*(g-=1))*Math.sin((g*S-c)*(2*Math.PI)/u))+f:P*Math.pow(2,-10*(g-=1))*Math.sin((g*S-c)*(2*Math.PI)/u)*.5+y+f)},BounceEaseOut(g,f,y,S){return(g/=S)<1/2.75?y*(7.5625*g*g)+f:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+f:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+f:y*(7.5625*(g-=2.625/2.75)*g+.984375)+f},BounceEaseIn(g,f,y,S){return y-t.Easings.BounceEaseOut(S-g,0,y,S)+f},BounceEaseInOut(g,f,y,S){return g<S/2?t.Easings.BounceEaseIn(g*2,0,y,S)*.5+f:t.Easings.BounceEaseOut(g*2-S,0,y,S)*.5+y*.5+f},EaseIn(g,f,y,S){return y*(g/=S)*g+f},EaseOut(g,f,y,S){return-y*(g/=S)*(g-2)+f},EaseInOut(g,f,y,S){return(g/=S/2)<1?y/2*g*g+f:-y/2*(--g*(g-2)-1)+f},StrongEaseIn(g,f,y,S){return y*(g/=S)*g*g*g*g+f},StrongEaseOut(g,f,y,S){return y*((g=g/S-1)*g*g*g*g+1)+f},StrongEaseInOut(g,f,y,S){return(g/=S/2)<1?y/2*g*g*g*g*g+f:y/2*((g-=2)*g*g*g*g+2)+f},Linear(g,f,y,S){return y*g/S+f}}}(Mn)),Mn}var gs;function zh(){return gs||(gs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ut(),i=wt(),n=Tt(),r=fn(),s=qh(),o=sa(),a=jh(),l=yr(),d=mr(),h=Et(),_=vr(),v=Kh(),g=na(),f=un();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:d.DD,Shape:h.Shape,shapes:h.shapes,Animation:_.Animation,Tween:v.Tween,Easings:v.Easings,Context:g.Context,Canvas:f.Canvas}),t.default=t.Konva}(xn)),xn}var Ve={},ps;function Yh(){if(ps)return Ve;ps=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.Arc=void 0;const t=ft(),e=Et(),i=ut(),n=gt(),r=ut();let s=class extends e.Shape{_sceneFunc(a){const l=i.Konva.getAngle(this.angle()),d=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,l,d),a.arc(0,0,this.innerRadius(),l,0,!d),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),l=this.outerRadius(),d=this.clockwise(),h=i.Konva.getAngle(d?360-this.angle():this.angle()),_=Math.cos(Math.min(h,Math.PI)),v=1,g=Math.sin(Math.min(Math.max(Math.PI,h),3*Math.PI/2)),f=Math.sin(Math.min(h,Math.PI/2)),y=_*(_>0?a:l),S=v*l,P=g*(g>0?a:l),u=f*(f>0?l:a);return{x:y,y:d?-1*u:P,width:S-y,height:u-P}}};return Ve.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,n.getBooleanValidator)()),Ve}var He={},We={},_s;function oa(){if(_s)return We;_s=1,Object.defineProperty(We,"__esModule",{value:!0}),We.Line=void 0;const t=ft(),e=ut(),i=Et(),n=gt();function r(a,l,d,h,_,v,g){const f=Math.sqrt(Math.pow(d-a,2)+Math.pow(h-l,2)),y=Math.sqrt(Math.pow(_-d,2)+Math.pow(v-h,2)),S=g*f/(f+y),P=g*y/(f+y),u=d-S*(_-a),c=h-S*(v-l),m=d+P*(_-a),C=h+P*(v-l);return[u,c,m,C]}function s(a,l){const d=a.length,h=[];for(let _=2;_<d-2;_+=2){const v=r(a[_-2],a[_-1],a[_],a[_+1],a[_+2],a[_+3],l);isNaN(v[0])||(h.push(v[0]),h.push(v[1]),h.push(a[_]),h.push(a[_+1]),h.push(v[2]),h.push(v[3]))}return h}let o=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){let d=this.points(),h=d.length,_=this.tension(),v=this.closed(),g=this.bezier(),f,y,S;if(h){if(l.beginPath(),l.moveTo(d[0],d[1]),_!==0&&h>4){for(f=this.getTensionPoints(),y=f.length,S=v?0:4,v||l.quadraticCurveTo(f[0],f[1],f[2],f[3]);S<y-2;)l.bezierCurveTo(f[S++],f[S++],f[S++],f[S++],f[S++],f[S++]);v||l.quadraticCurveTo(f[y-2],f[y-1],d[h-2],d[h-1])}else if(g)for(S=2;S<h;)l.bezierCurveTo(d[S++],d[S++],d[S++],d[S++],d[S++],d[S++]);else for(S=2;S<h;S+=2)l.lineTo(d[S],d[S+1]);v?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),d=l.length,h=this.tension(),_=r(l[d-2],l[d-1],l[0],l[1],l[2],l[3],h),v=r(l[d-4],l[d-3],l[d-2],l[d-1],l[0],l[1],h),g=s(l,h);return[_[2],_[3]].concat(g).concat([v[0],v[1],l[d-2],l[d-1],v[2],v[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let d=l[0],h=l[0],_=l[1],v=l[1],g,f;for(let y=0;y<l.length/2;y++)g=l[y*2],f=l[y*2+1],d=Math.min(d,g),h=Math.max(h,g),_=Math.min(_,f),v=Math.max(v,f);return{x:d,y:_,width:h-d,height:v-_}}};return We.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(o),t.Factory.addGetterSetter(o,"closed",!1),t.Factory.addGetterSetter(o,"bezier",!1),t.Factory.addGetterSetter(o,"tension",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"points",[],(0,n.getNumberArrayValidator)()),We}var qe={},On={},ms;function Xh(){return ms||(ms=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,l)=>{let d,h;const v=l/2;d=0;for(let g=0;g<20;g++)h=v*t.tValues[20][g]+v,d+=t.cValues[20][g]*n(o,a,h);return v*d};t.getCubicArcLength=e;const i=(o,a,l)=>{l===void 0&&(l=1);const d=o[0]-2*o[1]+o[2],h=a[0]-2*a[1]+a[2],_=2*o[1]-2*o[0],v=2*a[1]-2*a[0],g=4*(d*d+h*h),f=4*(d*_+h*v),y=_*_+v*v;if(g===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const S=f/(2*g),P=y/g,u=l+S,c=P-S*S,m=u*u+c>0?Math.sqrt(u*u+c):0,C=S*S+c>0?Math.sqrt(S*S+c):0,A=S+Math.sqrt(S*S+c)!==0?c*Math.log(Math.abs((u+m)/(S+C))):0;return Math.sqrt(g)/2*(u*m-S*C+A)};t.getQuadraticArcLength=i;function n(o,a,l){const d=r(1,l,o),h=r(1,l,a),_=d*d+h*h;return Math.sqrt(_)}const r=(o,a,l)=>{const d=l.length-1;let h,_;if(d===0)return 0;if(o===0){_=0;for(let v=0;v<=d;v++)_+=t.binomialCoefficients[d][v]*Math.pow(1-a,d-v)*Math.pow(a,v)*l[v];return _}else{h=new Array(d);for(let v=0;v<d;v++)h[v]=d*(l[v+1]-l[v]);return r(o-1,a,h)}},s=(o,a,l)=>{let d=1,h=o/a,_=(o-l(h))/a,v=0;for(;d>.001;){const g=l(h+_),f=Math.abs(o-g)/a;if(f<d)d=f,h+=_;else{const y=l(h-_),S=Math.abs(o-y)/a;S<d?(d=S,h-=_):_/=2}if(v++,v>500)break}return h};t.t2length=s}(On)),On}var ys;function br(){if(ys)return qe;ys=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.Path=void 0;const t=ft(),e=Et(),i=ut(),n=Xh();let r=class Ht extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ht.parsePathData(this.data()),this.pathLength=Ht.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let l=!1;for(let m=0;m<a.length;m++){const C=a[m].command,A=a[m].points;switch(C){case"L":o.lineTo(A[0],A[1]);break;case"M":o.moveTo(A[0],A[1]);break;case"C":o.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5]);break;case"Q":o.quadraticCurveTo(A[0],A[1],A[2],A[3]);break;case"A":var d=A[0],h=A[1],_=A[2],v=A[3],g=A[4],f=A[5],y=A[6],S=A[7],P=_>v?_:v,u=_>v?1:_/v,c=_>v?v/_:1;o.translate(d,h),o.rotate(y),o.scale(u,c),o.arc(0,0,P,g,g+f,1-S),o.scale(1/u,1/c),o.rotate(-y),o.translate(-d,-h);break;case"z":l=!0,o.closePath();break}}!l&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(g){if(g.command==="A"){const f=g.points[4],y=g.points[5],S=g.points[4]+y;let P=Math.PI/180;if(Math.abs(f-S)<P&&(P=Math.abs(f-S)),y<0)for(let u=f-P;u>S;u-=P){const c=Ht.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],u,0);o.push(c.x,c.y)}else for(let u=f+P;u<S;u+=P){const c=Ht.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],u,0);o.push(c.x,c.y)}}else if(g.command==="C")for(let f=0;f<=1;f+=.01){const y=Ht.getPointOnCubicBezier(f,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);o.push(y.x,y.y)}else o=o.concat(g.points)});let a=o[0],l=o[0],d=o[1],h=o[1],_,v;for(let g=0;g<o.length/2;g++)_=o[g*2],v=o[g*2+1],isNaN(_)||(a=Math.min(a,_),l=Math.max(l,_)),isNaN(v)||(d=Math.min(d,v),h=Math.max(h,v));return{x:a,y:d,width:l-a,height:h-d}}getLength(){return this.pathLength}getPointAtLength(o){return Ht.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,l,d){return Math.sqrt((l-o)*(l-o)+(d-a)*(d-a))}static getPathLength(o){let a=0;for(let l=0;l<o.length;++l)a+=o[l].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let l,d=0,h=a.length;if(!h)return null;for(;d<h&&o>a[d].pathLength;)o-=a[d].pathLength,++d;if(d===h)return l=a[d-1].points.slice(-2),{x:l[0],y:l[1]};if(o<.01)return l=a[d].points.slice(0,2),{x:l[0],y:l[1]};const _=a[d],v=_.points;switch(_.command){case"L":return Ht.getPointOnLine(o,_.start.x,_.start.y,v[0],v[1]);case"C":return Ht.getPointOnCubicBezier((0,n.t2length)(o,Ht.getPathLength(a),m=>(0,n.getCubicArcLength)([_.start.x,v[0],v[2],v[4]],[_.start.y,v[1],v[3],v[5]],m)),_.start.x,_.start.y,v[0],v[1],v[2],v[3],v[4],v[5]);case"Q":return Ht.getPointOnQuadraticBezier((0,n.t2length)(o,Ht.getPathLength(a),m=>(0,n.getQuadraticArcLength)([_.start.x,v[0],v[2]],[_.start.y,v[1],v[3]],m)),_.start.x,_.start.y,v[0],v[1],v[2],v[3]);case"A":var g=v[0],f=v[1],y=v[2],S=v[3],P=v[4],u=v[5],c=v[6];return P+=u*o/_.pathLength,Ht.getPointOnEllipticalArc(g,f,y,S,P,c)}return null}static getPointOnLine(o,a,l,d,h,_,v){_=_??a,v=v??l;const g=this.getLineLength(a,l,d,h);if(g<1e-10)return{x:a,y:l};if(d===a)return{x:_,y:v+(h>l?o:-o)};const f=(h-l)/(d-a),y=Math.sqrt(o*o/(1+f*f))*(d<a?-1:1),S=f*y;if(Math.abs(v-l-f*(_-a))<1e-10)return{x:_+y,y:v+S};const P=((_-a)*(d-a)+(v-l)*(h-l))/(g*g),u=a+P*(d-a),c=l+P*(h-l),m=this.getLineLength(_,v,u,c),C=Math.sqrt(o*o-m*m),A=Math.sqrt(C*C/(1+f*f))*(d<a?-1:1),G=f*A;return{x:u+A,y:c+G}}static getPointOnCubicBezier(o,a,l,d,h,_,v,g,f){function y(C){return C*C*C}function S(C){return 3*C*C*(1-C)}function P(C){return 3*C*(1-C)*(1-C)}function u(C){return(1-C)*(1-C)*(1-C)}const c=g*y(o)+_*S(o)+d*P(o)+a*u(o),m=f*y(o)+v*S(o)+h*P(o)+l*u(o);return{x:c,y:m}}static getPointOnQuadraticBezier(o,a,l,d,h,_,v){function g(u){return u*u}function f(u){return 2*u*(1-u)}function y(u){return(1-u)*(1-u)}const S=_*g(o)+d*f(o)+a*y(o),P=v*g(o)+h*f(o)+l*y(o);return{x:S,y:P}}static getPointOnEllipticalArc(o,a,l,d,h,_){const v=Math.cos(_),g=Math.sin(_),f={x:l*Math.cos(h),y:d*Math.sin(h)};return{x:o+(f.x*v-f.y*g),y:a+(f.x*g+f.y*v)}}static parsePathData(o){if(!o)return[];let a=o;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var d=0;d<l.length;d++)a=a.replace(new RegExp(l[d],"g"),"|"+l[d]);const h=a.split("|"),_=[],v=[];let g=0,f=0;const y=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let S;for(d=1;d<h.length;d++){let p=h[d],w=p.charAt(0);for(p=p.slice(1),v.length=0;S=y.exec(p);)v.push(S[0]);const b=[];for(let E=0,O=v.length;E<O;E++){if(v[E]==="00"){b.push(0,0);continue}const D=parseFloat(v[E]);isNaN(D)?b.push(0):b.push(D)}for(;b.length>0&&!isNaN(b[0]);){let E="",O=[];const D=g,H=f;var P,u,c,m,C,A,G,R,T,x;switch(w){case"l":g+=b.shift(),f+=b.shift(),E="L",O.push(g,f);break;case"L":g=b.shift(),f=b.shift(),O.push(g,f);break;case"m":var M=b.shift(),L=b.shift();if(g+=M,f+=L,E="M",_.length>2&&_[_.length-1].command==="z"){for(let U=_.length-2;U>=0;U--)if(_[U].command==="M"){g=_[U].points[0]+M,f=_[U].points[1]+L;break}}O.push(g,f),w="l";break;case"M":g=b.shift(),f=b.shift(),E="M",O.push(g,f),w="L";break;case"h":g+=b.shift(),E="L",O.push(g,f);break;case"H":g=b.shift(),E="L",O.push(g,f);break;case"v":f+=b.shift(),E="L",O.push(g,f);break;case"V":f=b.shift(),E="L",O.push(g,f);break;case"C":O.push(b.shift(),b.shift(),b.shift(),b.shift()),g=b.shift(),f=b.shift(),O.push(g,f);break;case"c":O.push(g+b.shift(),f+b.shift(),g+b.shift(),f+b.shift()),g+=b.shift(),f+=b.shift(),E="C",O.push(g,f);break;case"S":u=g,c=f,P=_[_.length-1],P.command==="C"&&(u=g+(g-P.points[2]),c=f+(f-P.points[3])),O.push(u,c,b.shift(),b.shift()),g=b.shift(),f=b.shift(),E="C",O.push(g,f);break;case"s":u=g,c=f,P=_[_.length-1],P.command==="C"&&(u=g+(g-P.points[2]),c=f+(f-P.points[3])),O.push(u,c,g+b.shift(),f+b.shift()),g+=b.shift(),f+=b.shift(),E="C",O.push(g,f);break;case"Q":O.push(b.shift(),b.shift()),g=b.shift(),f=b.shift(),O.push(g,f);break;case"q":O.push(g+b.shift(),f+b.shift()),g+=b.shift(),f+=b.shift(),E="Q",O.push(g,f);break;case"T":u=g,c=f,P=_[_.length-1],P.command==="Q"&&(u=g+(g-P.points[0]),c=f+(f-P.points[1])),g=b.shift(),f=b.shift(),E="Q",O.push(u,c,g,f);break;case"t":u=g,c=f,P=_[_.length-1],P.command==="Q"&&(u=g+(g-P.points[0]),c=f+(f-P.points[1])),g+=b.shift(),f+=b.shift(),E="Q",O.push(u,c,g,f);break;case"A":m=b.shift(),C=b.shift(),A=b.shift(),G=b.shift(),R=b.shift(),T=g,x=f,g=b.shift(),f=b.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,x,g,f,G,R,m,C,A);break;case"a":m=b.shift(),C=b.shift(),A=b.shift(),G=b.shift(),R=b.shift(),T=g,x=f,g+=b.shift(),f+=b.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,x,g,f,G,R,m,C,A);break}_.push({command:E||w,points:O,start:{x:D,y:H},pathLength:this.calcLength(D,H,E||w,O)})}(w==="z"||w==="Z")&&_.push({command:"z",points:[],start:void 0,pathLength:0})}return _}static calcLength(o,a,l,d){let h,_,v,g;const f=Ht;switch(l){case"L":return f.getLineLength(o,a,d[0],d[1]);case"C":return(0,n.getCubicArcLength)([o,d[0],d[2],d[4]],[a,d[1],d[3],d[5]],1);case"Q":return(0,n.getQuadraticArcLength)([o,d[0],d[2]],[a,d[1],d[3]],1);case"A":h=0;var y=d[4],S=d[5],P=d[4]+S,u=Math.PI/180;if(Math.abs(y-P)<u&&(u=Math.abs(y-P)),_=f.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],y,0),S<0)for(g=y-u;g>P;g-=u)v=f.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],g,0),h+=f.getLineLength(_.x,_.y,v.x,v.y),_=v;else for(g=y+u;g<P;g+=u)v=f.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],g,0),h+=f.getLineLength(_.x,_.y,v.x,v.y),_=v;return v=f.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],P,0),h+=f.getLineLength(_.x,_.y,v.x,v.y),h}return 0}static convertEndpointToCenterParameterization(o,a,l,d,h,_,v,g,f){const y=f*(Math.PI/180),S=Math.cos(y)*(o-l)/2+Math.sin(y)*(a-d)/2,P=-1*Math.sin(y)*(o-l)/2+Math.cos(y)*(a-d)/2,u=S*S/(v*v)+P*P/(g*g);u>1&&(v*=Math.sqrt(u),g*=Math.sqrt(u));let c=Math.sqrt((v*v*(g*g)-v*v*(P*P)-g*g*(S*S))/(v*v*(P*P)+g*g*(S*S)));h===_&&(c*=-1),isNaN(c)&&(c=0);const m=c*v*P/g,C=c*-g*S/v,A=(o+l)/2+Math.cos(y)*m-Math.sin(y)*C,G=(a+d)/2+Math.sin(y)*m+Math.cos(y)*C,R=function(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])},T=function(b,E){return(b[0]*E[0]+b[1]*E[1])/(R(b)*R(E))},x=function(b,E){return(b[0]*E[1]<b[1]*E[0]?-1:1)*Math.acos(T(b,E))},M=x([1,0],[(S-m)/v,(P-C)/g]),L=[(S-m)/v,(P-C)/g],p=[(-1*S-m)/v,(-1*P-C)/g];let w=x(L,p);return T(L,p)<=-1&&(w=Math.PI),T(L,p)>=1&&(w=0),_===0&&w>0&&(w=w-2*Math.PI),_===1&&w<0&&(w=w+2*Math.PI),[A,G,v,g,M,w,y,_]}};return qe.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"data"),qe}var vs;function $h(){if(vs)return He;vs=1,Object.defineProperty(He,"__esModule",{value:!0}),He.Arrow=void 0;const t=ft(),e=oa(),i=gt(),n=ut(),r=br();let s=class extends e.Line{_sceneFunc(a){super._sceneFunc(a);const l=Math.PI*2,d=this.points();let h=d;const _=this.tension()!==0&&d.length>4;_&&(h=this.getTensionPoints());const v=this.pointerLength(),g=d.length;let f,y;if(_){const u=[h[h.length-4],h[h.length-3],h[h.length-2],h[h.length-1],d[g-2],d[g-1]],c=r.Path.calcLength(h[h.length-4],h[h.length-3],"C",u),m=r.Path.getPointOnQuadraticBezier(Math.min(1,1-v/c),u[0],u[1],u[2],u[3],u[4],u[5]);f=d[g-2]-m.x,y=d[g-1]-m.y}else f=d[g-2]-d[g-4],y=d[g-1]-d[g-3];const S=(Math.atan2(y,f)+l)%l,P=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(d[g-2],d[g-1]),a.rotate(S),a.moveTo(0,0),a.lineTo(-v,P/2),a.lineTo(-v,-P/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(d[0],d[1]),_?(f=(h[0]+h[2])/2-d[0],y=(h[1]+h[3])/2-d[1]):(f=d[2]-d[0],y=d[3]-d[1]),a.rotate((Math.atan2(-y,-f)+l)%l),a.moveTo(0,0),a.lineTo(-v,P/2),a.lineTo(-v,-P/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),l=this.pointerWidth()/2;return{x:a.x,y:a.y-l,width:a.width,height:a.height+l*2}}};return He.Arrow=s,s.prototype.className="Arrow",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),He}var je={},bs;function Jh(){if(bs)return je;bs=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Circle=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let r=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}};return je.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),je}var Ke={},Ss;function Qh(){if(Ss)return Ke;Ss=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Ellipse=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let r=class extends e.Shape{_sceneFunc(o){const a=this.radiusX(),l=this.radiusY();o.beginPath(),o.save(),a!==l&&o.scale(1,l/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return Ke.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(r),t.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),t.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),Ke}var ze={},Cs;function Zh(){if(Cs)return ze;Cs=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.Image=void 0;const t=wt(),e=ft(),i=Et(),n=ut(),r=gt();let s=class aa extends i.Shape{constructor(a){super(a),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",this._loadListener)}_removeImageLoad(a){a&&a.removeEventListener&&a.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const a=!!this.cornerRadius(),l=this.hasShadow();return a&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const l=this.getWidth(),d=this.getHeight(),h=this.cornerRadius(),_=this.attrs.image;let v;if(_){const g=this.attrs.cropWidth,f=this.attrs.cropHeight;g&&f?v=[_,this.cropX(),this.cropY(),g,f,0,0,l,d]:v=[_,0,0,l,d]}(this.hasFill()||this.hasStroke()||h)&&(a.beginPath(),h?t.Util.drawRoundedRectPath(a,l,d,h):a.rect(0,0,l,d),a.closePath(),a.fillStrokeShape(this)),_&&(h&&a.clip(),a.drawImage.apply(a,v))}_hitFunc(a){const l=this.width(),d=this.height(),h=this.cornerRadius();a.beginPath(),h?t.Util.drawRoundedRectPath(a,l,d,h):a.rect(0,0,l,d),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,l;return(a=this.attrs.width)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var a,l;return(a=this.attrs.height)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(a,l,d=null){const h=t.Util.createImageElement();h.onload=function(){const _=new aa({image:h});l(_)},h.onerror=d,h.crossOrigin="Anonymous",h.src=a}};return ze.Image=s,s.prototype.className="Image",(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,r.getNumberValidator)()),ze}var ye={},ws;function tc(){if(ws)return ye;ws=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.Tag=ye.Label=void 0;const t=ft(),e=Et(),i=yr(),n=gt(),r=ut(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",l="up",d="right",h="down",_="left",v=s.length;let g=class extends i.Group{constructor(S){super(S),this.on("add.konva",function(P){this._addListeners(P.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let P=this,u;const c=function(){P._sync()};for(u=0;u<v;u++)S.on(s[u]+o,c)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),P=this.getTag(),u,c,m,C,A,G,R;if(S&&P){switch(u=S.width(),c=S.height(),m=P.pointerDirection(),C=P.pointerWidth(),R=P.pointerHeight(),A=0,G=0,m){case l:A=u/2,G=-1*R;break;case d:A=u+C,G=c/2;break;case h:A=u/2,G=c+R;break;case _:A=-1*C,G=c/2;break}P.setAttrs({x:-1*A,y:-1*G,width:u,height:c}),S.setAttrs({x:-1*A,y:-1*G})}}};ye.Label=g,g.prototype.className="Label",(0,r._registerNode)(g);class f extends e.Shape{_sceneFunc(S){const P=this.width(),u=this.height(),c=this.pointerDirection(),m=this.pointerWidth(),C=this.pointerHeight(),A=this.cornerRadius();let G=0,R=0,T=0,x=0;typeof A=="number"?G=R=T=x=Math.min(A,P/2,u/2):(G=Math.min(A[0]||0,P/2,u/2),R=Math.min(A[1]||0,P/2,u/2),x=Math.min(A[2]||0,P/2,u/2),T=Math.min(A[3]||0,P/2,u/2)),S.beginPath(),S.moveTo(G,0),c===l&&(S.lineTo((P-m)/2,0),S.lineTo(P/2,-1*C),S.lineTo((P+m)/2,0)),S.lineTo(P-R,0),S.arc(P-R,R,R,Math.PI*3/2,0,!1),c===d&&(S.lineTo(P,(u-C)/2),S.lineTo(P+m,u/2),S.lineTo(P,(u+C)/2)),S.lineTo(P,u-x),S.arc(P-x,u-x,x,0,Math.PI/2,!1),c===h&&(S.lineTo((P+m)/2,u),S.lineTo(P/2,u+C),S.lineTo((P-m)/2,u)),S.lineTo(T,u),S.arc(T,u-T,T,Math.PI/2,Math.PI,!1),c===_&&(S.lineTo(0,(u+C)/2),S.lineTo(-1*m,u/2),S.lineTo(0,(u-C)/2)),S.lineTo(0,G),S.arc(G,G,G,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,P=0,u=this.pointerWidth(),c=this.pointerHeight(),m=this.pointerDirection(),C=this.width(),A=this.height();return m===l?(P-=c,A+=c):m===h?A+=c:m===_?(S-=u*1.5,C+=u):m===d&&(C+=u*1.5),{x:S,y:P,width:C,height:A}}}return ye.Tag=f,f.prototype.className="Tag",(0,r._registerNode)(f),t.Factory.addGetterSetter(f,"pointerDirection",a),t.Factory.addGetterSetter(f,"pointerWidth",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(f,"pointerHeight",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(f,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),ye}var Ye={},xs;function la(){if(xs)return Ye;xs=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Rect=void 0;const t=ft(),e=Et(),i=ut(),n=wt(),r=gt();let s=class extends e.Shape{_sceneFunc(a){const l=this.cornerRadius(),d=this.width(),h=this.height();a.beginPath(),l?n.Util.drawRoundedRectPath(a,d,h,l):a.rect(0,0,d,h),a.closePath(),a.fillStrokeShape(this)}};return Ye.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Ye}var Xe={},Ps;function ec(){if(Ps)return Xe;Ps=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.RegularPolygon=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let r=class extends e.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let l=1;l<a.length;l++)o.lineTo(a[l].x,a[l].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,l=[];for(let d=0;d<o;d++)l.push({x:a*Math.sin(d*2*Math.PI/o),y:-1*a*Math.cos(d*2*Math.PI/o)});return l}getSelfRect(){const o=this._getPoints();let a=o[0].x,l=o[0].y,d=o[0].x,h=o[0].y;return o.forEach(_=>{a=Math.min(a,_.x),l=Math.max(l,_.x),d=Math.min(d,_.y),h=Math.max(h,_.y)}),{x:a,y:d,width:l-a,height:h-d}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Xe.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),Xe}var $e={},Ts;function ic(){if(Ts)return $e;Ts=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Ring=void 0;const t=ft(),e=Et(),i=gt(),n=ut(),r=Math.PI*2;let s=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,r,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),r,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return $e.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),$e}var Je={},As;function nc(){if(As)return Je;As=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Sprite=void 0;const t=ft(),e=Et(),i=vr(),n=gt(),r=ut();let s=class extends e.Shape{constructor(a){super(a),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const l=this.animation(),d=this.frameIndex(),h=d*4,_=this.animations()[l],v=this.frameOffsets(),g=_[h+0],f=_[h+1],y=_[h+2],S=_[h+3],P=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,y,S),a.closePath(),a.fillStrokeShape(this)),P)if(v){const u=v[l],c=d*2;a.drawImage(P,g,f,y,S,u[c+0],u[c+1],y,S)}else a.drawImage(P,g,f,y,S,0,0,y,S)}_hitFunc(a){const l=this.animation(),d=this.frameIndex(),h=d*4,_=this.animations()[l],v=this.frameOffsets(),g=_[h+2],f=_[h+3];if(a.beginPath(),v){const y=v[l],S=d*2;a.rect(y[S+0],y[S+1],g,f)}else a.rect(0,0,g,f);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),l=this.animation(),d=this.animations(),h=d[l],_=h.length/4;a<_-1?this.frameIndex(a+1):this.frameIndex(0)}};return Je.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,n.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Je}var Qe={},Rs;function rc(){if(Rs)return Qe;Rs=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Star=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let r=class extends e.Shape{_sceneFunc(o){const a=this.innerRadius(),l=this.outerRadius(),d=this.numPoints();o.beginPath(),o.moveTo(0,0-l);for(let h=1;h<d*2;h++){const _=h%2===0?l:a,v=_*Math.sin(h*Math.PI/d),g=-1*_*Math.cos(h*Math.PI/d);o.lineTo(v,g)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Qe.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),Qe}var xe={},Es;function ha(){if(Es)return xe;Es=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.Text=void 0,xe.stringToArray=o;const t=wt(),e=ft(),i=Et(),n=ut(),r=gt(),s=ut();function o(tt){return[...tt].reduce((W,J,nt,rt)=>{if(new RegExp("\\p{Emoji}","u").test(J)){const N=rt[nt+1];N&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(N)?(W.push(J+N),rt[nt+1]=""):W.push(J)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(J+(rt[nt+1]||""))?W.push(J+rt[nt+1]):nt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(J)?W[W.length-1]+=J:J&&W.push(J);return W},[])}const a="auto",l="center",d="inherit",h="justify",_="Change.konva",v="2d",g="-",f="left",y="text",S="Text",P="top",u="bottom",c="middle",m="normal",C="px ",A=" ",G="right",R="rtl",T="word",x="char",M="none",L="…",p=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],w=p.length;function b(tt){return tt.split(",").map(W=>{W=W.trim();const J=W.indexOf(" ")>=0,nt=W.indexOf('"')>=0||W.indexOf("'")>=0;return J&&!nt&&(W=`"${W}"`),W}).join(", ")}let E;function O(){return E||(E=t.Util.createCanvasElement().getContext(v),E)}function D(tt){tt.fillText(this._partialText,this._partialTextX,this._partialTextY)}function H(tt){tt.setAttr("miterLimit",2),tt.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function U(tt){return tt=tt||{},!tt.fillLinearGradientColorStops&&!tt.fillRadialGradientColorStops&&!tt.fillPatternImage&&(tt.fill=tt.fill||"black"),tt}let K=class extends i.Shape{constructor(W){super(U(W)),this._partialTextX=0,this._partialTextY=0;for(let J=0;J<w;J++)this.on(p[J]+_,this._setTextData);this._setTextData()}_sceneFunc(W){const J=this.textArr,nt=J.length;if(!this.text())return;let rt=this.padding(),N=this.fontSize(),B=this.lineHeight()*N,X=this.verticalAlign(),Q=this.direction(),st=0,F=this.align(),k=this.getWidth(),I=this.letterSpacing(),V=this.fill(),j=this.textDecoration(),q=j.indexOf("underline")!==-1,Y=j.indexOf("line-through")!==-1,Z;Q=Q===d?W.direction:Q;let $=B/2,z=c;if(n.Konva._fixTextRendering){const St=this.measureSize("M");z="alphabetic",$=(St.fontBoundingBoxAscent-St.fontBoundingBoxDescent)/2+B/2}var it=0,et=0;for(Q===R&&W.setAttr("direction",Q),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",z),W.setAttr("textAlign",f),X===c?st=(this.getHeight()-nt*B-rt*2)/2:X===u&&(st=this.getHeight()-nt*B-rt*2),W.translate(rt,st+rt),Z=0;Z<nt;Z++){var it=0,et=0,ot=J[Z],at=ot.text,lt=ot.width,pt=ot.lastInParagraph,dt,xt;if(W.save(),F===G?it+=k-lt-rt*2:F===l&&(it+=(k-lt-rt*2)/2),q){W.save(),W.beginPath();const Ct=n.Konva._fixTextRendering?Math.round(N/4):Math.round(N/2),Ft=it,Bt=$+et+Ct;W.moveTo(Ft,Bt),dt=at.split(" ").length-1,xt=F===h&&!pt?k-rt*2:lt,W.lineTo(Ft+Math.round(xt),Bt),W.lineWidth=N/15;const Mt=this._getLinearGradient();W.strokeStyle=Mt||V,W.stroke(),W.restore()}if(Y){W.save(),W.beginPath();const Ct=n.Konva._fixTextRendering?-Math.round(N/4):0;W.moveTo(it,$+et+Ct),dt=at.split(" ").length-1,xt=F===h&&!pt?k-rt*2:lt,W.lineTo(it+Math.round(xt),$+et+Ct),W.lineWidth=N/15;const Ft=this._getLinearGradient();W.strokeStyle=Ft||V,W.stroke(),W.restore()}if(Q!==R&&(I!==0||F===h)){dt=at.split(" ").length-1;const Ct=o(at);for(let Ft=0;Ft<Ct.length;Ft++){const Bt=Ct[Ft];Bt===" "&&!pt&&F===h&&(it+=(k-rt*2-lt)/dt),this._partialTextX=it,this._partialTextY=$+et,this._partialText=Bt,W.fillStrokeShape(this),it+=this.measureSize(Bt).width+I}}else I!==0&&W.setAttr("letterSpacing",`${I}px`),this._partialTextX=it,this._partialTextY=$+et,this._partialText=at,W.fillStrokeShape(this);W.restore(),nt>1&&($+=B)}}_hitFunc(W){const J=this.getWidth(),nt=this.getHeight();W.beginPath(),W.rect(0,0,J,nt),W.closePath(),W.fillStrokeShape(this)}setText(W){const J=t.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(y,J),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var J,nt,rt,N,B,X,Q,st,F,k,I;let V=O(),j=this.fontSize(),q;V.save(),V.font=this._getContextFont(),q=V.measureText(W),V.restore();const Y=j/100;return{actualBoundingBoxAscent:(J=q.actualBoundingBoxAscent)!==null&&J!==void 0?J:71.58203125*Y,actualBoundingBoxDescent:(nt=q.actualBoundingBoxDescent)!==null&&nt!==void 0?nt:0,actualBoundingBoxLeft:(rt=q.actualBoundingBoxLeft)!==null&&rt!==void 0?rt:-7.421875*Y,actualBoundingBoxRight:(N=q.actualBoundingBoxRight)!==null&&N!==void 0?N:75.732421875*Y,alphabeticBaseline:(B=q.alphabeticBaseline)!==null&&B!==void 0?B:0,emHeightAscent:(X=q.emHeightAscent)!==null&&X!==void 0?X:100*Y,emHeightDescent:(Q=q.emHeightDescent)!==null&&Q!==void 0?Q:-20*Y,fontBoundingBoxAscent:(st=q.fontBoundingBoxAscent)!==null&&st!==void 0?st:91*Y,fontBoundingBoxDescent:(F=q.fontBoundingBoxDescent)!==null&&F!==void 0?F:21*Y,hangingBaseline:(k=q.hangingBaseline)!==null&&k!==void 0?k:72.80000305175781*Y,ideographicBaseline:(I=q.ideographicBaseline)!==null&&I!==void 0?I:-21*Y,width:q.width,height:j}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+C)+b(this.fontFamily())}_addTextLine(W){this.align()===h&&(W=W.trim());const nt=this._getTextWidth(W);return this.textArr.push({text:W,width:nt,lastInParagraph:!1})}_getTextWidth(W){const J=this.letterSpacing(),nt=W.length;return O().measureText(W).width+J*nt}_setTextData(){let W=this.text().split(`
`),J=+this.fontSize(),nt=0,rt=this.lineHeight()*J,N=this.attrs.width,B=this.attrs.height,X=N!==a&&N!==void 0,Q=B!==a&&B!==void 0,st=this.padding(),F=N-st*2,k=B-st*2,I=0,V=this.wrap(),j=V!==M,q=V!==x&&j,Y=this.ellipsis();this.textArr=[],O().font=this._getContextFont();const Z=Y?this._getTextWidth(L):0;for(let $=0,z=W.length;$<z;++$){let it=W[$],et=this._getTextWidth(it);if(X&&et>F)for(;it.length>0;){let ot=0,at=o(it).length,lt="",pt=0;for(;ot<at;){const dt=ot+at>>>1,xt=o(it),St=xt.slice(0,dt+1).join(""),At=this._getTextWidth(St);(Y&&Q&&I+rt>k?At+Z:At)<=F?(ot=dt+1,lt=St,pt=At):at=dt}if(lt){if(q){const St=o(it),At=o(lt),Ct=St[At.length],Ft=Ct===A||Ct===g;let Bt;if(Ft&&pt<=F)Bt=At.length;else{const Mt=At.lastIndexOf(A),Kt=At.lastIndexOf(g);Bt=Math.max(Mt,Kt)+1}Bt>0&&(ot=Bt,lt=St.slice(0,ot).join(""),pt=this._getTextWidth(lt))}if(lt=lt.trimRight(),this._addTextLine(lt),nt=Math.max(nt,pt),I+=rt,this._shouldHandleEllipsis(I)){this._tryToAddEllipsisToLastLine();break}if(it=o(it).slice(ot).join("").trimLeft(),it.length>0&&(et=this._getTextWidth(it),et<=F)){this._addTextLine(it),I+=rt,nt=Math.max(nt,et);break}}else break}else this._addTextLine(it),I+=rt,nt=Math.max(nt,et),this._shouldHandleEllipsis(I)&&$<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Q&&I+rt>k)break}this.textHeight=J,this.textWidth=nt}_shouldHandleEllipsis(W){const J=+this.fontSize(),nt=this.lineHeight()*J,rt=this.attrs.height,N=rt!==a&&rt!==void 0,B=this.padding(),X=rt-B*2;return!(this.wrap()!==M)||N&&W+nt>X}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,J=W!==a&&W!==void 0,nt=this.padding(),rt=W-nt*2,N=this.ellipsis(),B=this.textArr[this.textArr.length-1];!B||!N||(J&&(this._getTextWidth(B.text+L)<rt||(B.text=B.text.slice(0,B.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(B.text+L))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,J=this.hasShadow();return W&&J?!0:super._useBufferCanvas()}};return xe.Text=K,K.prototype._fillFunc=D,K.prototype._strokeFunc=H,K.prototype.className=S,K.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(K),e.Factory.overWriteSetter(K,"width",(0,r.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(K,"height",(0,r.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(K,"direction",d),e.Factory.addGetterSetter(K,"fontFamily","Arial"),e.Factory.addGetterSetter(K,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(K,"fontStyle",m),e.Factory.addGetterSetter(K,"fontVariant",m),e.Factory.addGetterSetter(K,"padding",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(K,"align",f),e.Factory.addGetterSetter(K,"verticalAlign",P),e.Factory.addGetterSetter(K,"lineHeight",1,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(K,"wrap",T),e.Factory.addGetterSetter(K,"ellipsis",!1,(0,r.getBooleanValidator)()),e.Factory.addGetterSetter(K,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(K,"text","",(0,r.getStringValidator)()),e.Factory.addGetterSetter(K,"textDecoration",""),xe}var Ze={},Fs;function sc(){if(Fs)return Ze;Fs=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.TextPath=void 0;const t=wt(),e=ft(),i=Et(),n=br(),r=ha(),s=gt(),o=ut(),a="",l="normal";function d(v){v.fillText(this.partialText,0,0)}function h(v){v.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(g){super(g),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const f=this.pathLength;return g-1>f?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const f=this.textDecoration(),y=this.fill(),S=this.fontSize(),P=this.glyphInfo;f==="underline"&&g.beginPath();for(let u=0;u<P.length;u++){g.save();const c=P[u].p0;g.translate(c.x,c.y),g.rotate(P[u].rotation),this.partialText=P[u].text,g.fillStrokeShape(this),f==="underline"&&(u===0&&g.moveTo(0,S/2+1),g.lineTo(S,S/2+1)),g.restore()}f==="underline"&&(g.strokeStyle=y,g.lineWidth=S/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const f=this.glyphInfo;if(f.length>=1){const y=f[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<f.length;y++){const S=f[y].p1;g.lineTo(S.x,S.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return r.Text.prototype.setText.call(this,g)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const S=y.measureText(g);return y.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:f}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=f,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),S=this.align(),P=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let c=0;S==="center"&&(c=Math.max(0,this.pathLength/2-u/2)),S==="right"&&(c=Math.max(0,this.pathLength-u));const m=(0,r.stringToArray)(this.text());let C=c;for(let A=0;A<m.length;A++){const G=this._getPointAtLength(C);if(!G)return;let R=this._getTextSize(m[A]).width+y;if(m[A]===" "&&S==="justify"){const w=this.text().split(" ").length-1;R+=(this.pathLength-u)/w}const T=this._getPointAtLength(C+R);if(!T)return;const x=n.Path.getLineLength(G.x,G.y,T.x,T.y);let M=0;if(P)try{M=P(m[A-1],m[A])*this.fontSize()}catch{M=0}G.x+=M,T.x+=M,this.textWidth+=M;const L=n.Path.getPointOnLine(M+x/2,G.x,G.y,T.x,T.y),p=Math.atan2(T.y-G.y,T.x-G.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:m[A],rotation:p,p0:G,p1:T}),C+=R}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(C){g.push(C.p0.x),g.push(C.p0.y),g.push(C.p1.x),g.push(C.p1.y)});let f=g[0]||0,y=g[0]||0,S=g[1]||0,P=g[1]||0,u,c;for(let C=0;C<g.length/2;C++)u=g[C*2],c=g[C*2+1],f=Math.min(f,u),y=Math.max(y,u),S=Math.min(S,c),P=Math.max(P,c);const m=this.fontSize();return{x:f-m/2,y:S-m/2,width:y-f+m,height:P-S+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ze.TextPath=_,_.prototype._fillFunc=d,_.prototype._strokeFunc=h,_.prototype._fillFuncHit=d,_.prototype._strokeFuncHit=h,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",a),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),Ze}var ti={},Ms;function oc(){if(Ms)return ti;Ms=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Transformer=void 0;const t=wt(),e=ft(),i=Tt(),n=Et(),r=la(),s=yr(),o=ut(),a=gt(),l=ut(),d="tr-konva",h=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(R=>R+`.${d}`).join(" "),_="nodesRect",v=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in o.Konva._global;function y(R,T,x){if(R==="rotater")return x;T+=t.Util.degToRad(g[R]||0);const M=(t.Util.radToDeg(T)%360+360)%360;return t.Util._inRange(M,315+22.5,360)||t.Util._inRange(M,0,22.5)?"ns-resize":t.Util._inRange(M,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(M,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(M,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(M,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(M,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(M,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(M,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+M),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function P(R){return{x:R.x+R.width/2*Math.cos(R.rotation)+R.height/2*Math.sin(-R.rotation),y:R.y+R.height/2*Math.cos(R.rotation)+R.width/2*Math.sin(R.rotation)}}function u(R,T,x){const M=x.x+(R.x-x.x)*Math.cos(T)-(R.y-x.y)*Math.sin(T),L=x.y+(R.x-x.x)*Math.sin(T)+(R.y-x.y)*Math.cos(T);return{...R,rotation:R.rotation+T,x:M,y:L}}function c(R,T){const x=P(R);return u(R,T,x)}function m(R,T,x){let M=T;for(let L=0;L<R.length;L++){const p=o.Konva.getAngle(R[L]),w=Math.abs(p-T)%(Math.PI*2);Math.min(w,Math.PI*2-w)<x&&(M=p)}return M}let C=0,A=class extends s.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(h,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return d+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const x=T.filter(L=>L.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=x,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(L=>{const p=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(L._attrsAffectingSize.length){const w=L._attrsAffectingSize.map(b=>b+"Change."+this._getEventNamespace()).join(" ");L.on(w,p)}L.on(v.map(w=>w+`.${this._getEventNamespace()}`).join(" "),p),L.on(`absoluteTransformChange.${this._getEventNamespace()}`,p),this._proxyDrag(L)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let x;T.on(`dragstart.${this._getEventNamespace()}`,M=>{x=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(M,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,M=>{if(!x)return;const L=T.getAbsolutePosition(),p=L.x-x.x,w=L.y-x.y;this.nodes().forEach(b=>{if(b===T||b.isDragging())return;const E=b.getAbsolutePosition();b.setAbsolutePosition({x:E.x+p,y:E.y+w}),b.startDrag(M)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(T,x=this.rotation(),M){const L=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=T.getAbsoluteScale(M),w=T.getAbsolutePosition(M),b=L.x*p.x-T.offsetX()*p.x,E=L.y*p.y-T.offsetY()*p.y,O=(o.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:w.x+b*Math.cos(O)+E*Math.sin(-O),y:w.y+E*Math.cos(O)+b*Math.sin(O),width:L.width*p.x,height:L.height*p.y,rotation:O};return u(D,-o.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map(O=>{const D=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),H=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],U=O.getAbsoluteTransform();H.forEach(function(K){const tt=U.point(K);x.push(tt)})});const M=new t.Transform;M.rotate(-o.Konva.getAngle(this.rotation()));let L=1/0,p=1/0,w=-1/0,b=-1/0;x.forEach(function(O){const D=M.point(O);L===void 0&&(L=w=D.x,p=b=D.y),L=Math.min(L,D.x),p=Math.min(p,D.y),w=Math.max(w,D.x),b=Math.max(b,D.y)}),M.invert();const E=M.point({x:L,y:p});return{x:E.x,y:E.y,width:w-L,height:b-p,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const x=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),M=this;x.on("mousedown touchstart",function(L){M._handleMouseDown(L)}),x.on("dragstart",L=>{x.stopDrag(),L.cancelBubble=!0}),x.on("dragend",L=>{L.cancelBubble=!0}),x.on("mouseenter",()=>{const L=o.Konva.getAngle(this.rotation()),p=this.rotateAnchorCursor(),w=y(T,L,p);x.getStage().content&&(x.getStage().content.style.cursor=w),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const T=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,M){const L=M.getParent(),p=L.padding();x.beginPath(),x.rect(-p,-p,M.width()+p*2,M.height()+p*2),x.moveTo(M.width()/2,-p),L.rotateEnabled()&&L.rotateLineVisible()&&x.lineTo(M.width()/2,-L.rotateAnchorOffset()*t.Util._sign(M.height())-p),x.fillStrokeShape(M)},hitFunc:(x,M)=>{if(!this.shouldOverdrawWholeArea())return;const L=this.padding();x.beginPath(),x.rect(-L,-L,M.width()+L*2,M.height()+L*2),x.fillStrokeShape(M)}});this.add(T),this._proxyDrag(T),T.on("dragstart",x=>{x.cancelBubble=!0}),T.on("dragmove",x=>{x.cancelBubble=!0}),T.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const x=this._getNodeRect(),M=x.width,L=x.height,p=Math.sqrt(Math.pow(M,2)+Math.pow(L,2));this.sin=Math.abs(L/p),this.cos=Math.abs(M/p),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const w=T.target.getAbsolutePosition(),b=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:b.x-w.x,y:b.y-w.y},C++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(E=>{E._fire("transformstart",{evt:T.evt,target:E})})}_handleMouseMove(T){let x,M,L;const p=this.findOne("."+this._movingAnchorName),w=p.getStage();w.setPointersPositions(T);const b=w.getPointerPosition();let E={x:b.x-this._anchorDragOffset.x,y:b.y-this._anchorDragOffset.y};const O=p.getAbsolutePosition();this.anchorDragBoundFunc()&&(E=this.anchorDragBoundFunc()(O,E,T)),p.setAbsolutePosition(E);const D=p.getAbsolutePosition();if(O.x===D.x&&O.y===D.y)return;if(this._movingAnchorName==="rotater"){const X=this._getNodeRect();x=p.x()-X.width/2,M=-p.y()+X.height/2;let Q=Math.atan2(-M,x)+Math.PI/2;X.height<0&&(Q-=Math.PI);const F=o.Konva.getAngle(this.rotation())+Q,k=o.Konva.getAngle(this.rotationSnapTolerance()),V=m(this.rotationSnaps(),F,k)-X.rotation,j=c(X,V);this._fitNodesInto(j,T);return}const H=this.shiftBehavior();let U;H==="inverted"?U=this.keepRatio()&&!T.shiftKey:H==="none"?U=this.keepRatio():U=this.keepRatio()||T.shiftKey;var nt=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(U){var K=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};L=Math.sqrt(Math.pow(K.x-p.x(),2)+Math.pow(K.y-p.y(),2));var tt=this.findOne(".top-left").x()>K.x?-1:1,W=this.findOne(".top-left").y()>K.y?-1:1;x=L*this.cos*tt,M=L*this.sin*W,this.findOne(".top-left").x(K.x-x),this.findOne(".top-left").y(K.y-M)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(p.y());else if(this._movingAnchorName==="top-right"){if(U){var K=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};L=Math.sqrt(Math.pow(p.x()-K.x,2)+Math.pow(K.y-p.y(),2));var tt=this.findOne(".top-right").x()<K.x?-1:1,W=this.findOne(".top-right").y()>K.y?-1:1;x=L*this.cos*tt,M=L*this.sin*W,this.findOne(".top-right").x(K.x+x),this.findOne(".top-right").y(K.y-M)}var J=p.position();this.findOne(".top-left").y(J.y),this.findOne(".bottom-right").x(J.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(p.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(p.x());else if(this._movingAnchorName==="bottom-left"){if(U){var K=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};L=Math.sqrt(Math.pow(K.x-p.x(),2)+Math.pow(p.y()-K.y,2));var tt=K.x<p.x()?-1:1,W=p.y()<K.y?-1:1;x=L*this.cos*tt,M=L*this.sin*W,p.x(K.x-x),p.y(K.y+M)}J=p.position(),this.findOne(".top-left").x(J.x),this.findOne(".bottom-right").y(J.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(p.y());else if(this._movingAnchorName==="bottom-right"){if(U){var K=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};L=Math.sqrt(Math.pow(p.x()-K.x,2)+Math.pow(p.y()-K.y,2));var tt=this.findOne(".bottom-right").x()<K.x?-1:1,W=this.findOne(".bottom-right").y()<K.y?-1:1;x=L*this.cos*tt,M=L*this.sin*W,this.findOne(".bottom-right").x(K.x+x),this.findOne(".bottom-right").y(K.y+M)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var nt=this.centeredScaling()||T.altKey;if(nt){const X=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),st=X.x(),F=X.y(),k=this.getWidth()-Q.x(),I=this.getHeight()-Q.y();Q.move({x:-st,y:-F}),X.move({x:k,y:I})}const rt=this.findOne(".top-left").getAbsolutePosition();x=rt.x,M=rt.y;const N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:M,width:N,height:B,rotation:o.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const M=this.getNode();C--,this._fire("transformend",{evt:T,target:M}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),M&&this._nodes.forEach(L=>{var p;L._fire("transformend",{evt:T,target:L}),(p=L.getLayer())===null||p===void 0||p.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,x){const M=this._getNodeRect(),L=1;if(t.Util._inRange(T.width,-this.padding()*2-L,L)){this.update();return}if(t.Util._inRange(T.height,-this.padding()*2-L,L)){this.update();return}const p=new t.Transform;if(p.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const U=p.point({x:-this.padding()*2,y:0});T.x+=U.x,T.y+=U.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const U=p.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const U=p.point({x:0,y:-this.padding()*2});T.x+=U.x,T.y+=U.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const U=p.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const U=this.boundBoxFunc()(M,T);U?T=U:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const w=1e7,b=new t.Transform;b.translate(M.x,M.y),b.rotate(M.rotation),b.scale(M.width/w,M.height/w);const E=new t.Transform,O=T.width/w,D=T.height/w;this.flipEnabled()===!1?(E.translate(T.x,T.y),E.rotate(T.rotation),E.translate(T.width<0?T.width:0,T.height<0?T.height:0),E.scale(Math.abs(O),Math.abs(D))):(E.translate(T.x,T.y),E.rotate(T.rotation),E.scale(O,D));const H=E.multiply(b.invert());this._nodes.forEach(U=>{var K;const tt=U.getParent().getAbsoluteTransform(),W=U.getTransform().copy();W.translate(U.offsetX(),U.offsetY());const J=new t.Transform;J.multiply(tt.copy().invert()).multiply(H).multiply(tt).multiply(W);const nt=J.decompose();U.setAttrs(nt),(K=U.getLayer())===null||K===void 0||K.batchDraw()}),this.rotation(t.Util._getRotation(T.rotation)),this._nodes.forEach(U=>{this._fire("transform",{evt:x,target:U}),U._fire("transform",{evt:x,target:U})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,x){this.findOne(T).setAttrs(x)}update(){var T;const x=this._getNodeRect();this.rotation(t.Util._getRotation(x.rotation));const M=x.width,L=x.height,p=this.enabledAnchors(),w=this.resizeEnabled(),b=this.padding(),E=this.anchorSize(),O=this.find("._anchor");O.forEach(H=>{H.setAttrs({width:E,height:E,offsetX:E/2,offsetY:E/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:E/2+b,offsetY:E/2+b,visible:w&&p.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:M/2,y:0,offsetY:E/2+b,visible:w&&p.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:M,y:0,offsetX:E/2-b,offsetY:E/2+b,visible:w&&p.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:L/2,offsetX:E/2+b,visible:w&&p.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:M,y:L/2,offsetX:E/2-b,visible:w&&p.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:L,offsetX:E/2+b,offsetY:E/2-b,visible:w&&p.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:M/2,y:L,offsetY:E/2-b,visible:w&&p.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:M,y:L,offsetX:E/2-b,offsetY:E/2-b,visible:w&&p.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:M/2,y:-this.rotateAnchorOffset()*t.Util._sign(L)-b,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:M,height:L,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&O.forEach(H=>{D(H)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(T){return i.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};ti.Transformer=A,A.isTransforming=()=>C>0;function G(R){return R instanceof Array||t.Util.warn("enabledAnchors value should be an array"),R instanceof Array&&R.forEach(function(T){S.indexOf(T)===-1&&t.Util.warn("Unknown anchor name: "+T+". Available names are: "+S.join(", "))}),R||[]}return A.prototype.className="Transformer",(0,l._registerNode)(A),e.Factory.addGetterSetter(A,"enabledAnchors",S,G),e.Factory.addGetterSetter(A,"flipEnabled",!0,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(A,"resizeEnabled",!0),e.Factory.addGetterSetter(A,"anchorSize",10,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"rotateEnabled",!0),e.Factory.addGetterSetter(A,"rotateLineVisible",!0),e.Factory.addGetterSetter(A,"rotationSnaps",[]),e.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderEnabled",!0),e.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"anchorFill","white"),e.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderDash"),e.Factory.addGetterSetter(A,"keepRatio",!0),e.Factory.addGetterSetter(A,"shiftBehavior","default"),e.Factory.addGetterSetter(A,"centeredScaling",!1),e.Factory.addGetterSetter(A,"ignoreStroke",!1),e.Factory.addGetterSetter(A,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"nodes"),e.Factory.addGetterSetter(A,"node"),e.Factory.addGetterSetter(A,"boundBoxFunc"),e.Factory.addGetterSetter(A,"anchorDragBoundFunc"),e.Factory.addGetterSetter(A,"anchorStyleFunc"),e.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),e.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ti}var ei={},Os;function ac(){if(Os)return ei;Os=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Wedge=void 0;const t=ft(),e=Et(),i=ut(),n=gt(),r=ut();let s=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return ei.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ei}var ii={},ks;function lc(){if(ks)return ii;ks=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Blur=void 0;const t=ft(),e=Tt(),i=gt();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(l,d){const h=l.data,_=l.width,v=l.height;let g,f,y,S,P,u,c,m,C,A,G,R,T,x,M,L,p,w,b,E,O,D,H,U;const K=d+d+1,tt=_-1,W=v-1,J=d+1,nt=J*(J+1)/2,rt=new n,N=r[d],B=s[d];let X=null,Q=rt,st=null,F=null;for(y=1;y<K;y++)Q=Q.next=new n,y===J&&(X=Q);for(Q.next=rt,c=u=0,f=0;f<v;f++){for(L=p=w=b=m=C=A=G=0,R=J*(E=h[u]),T=J*(O=h[u+1]),x=J*(D=h[u+2]),M=J*(H=h[u+3]),m+=nt*E,C+=nt*O,A+=nt*D,G+=nt*H,Q=rt,y=0;y<J;y++)Q.r=E,Q.g=O,Q.b=D,Q.a=H,Q=Q.next;for(y=1;y<J;y++)S=u+((tt<y?tt:y)<<2),m+=(Q.r=E=h[S])*(U=J-y),C+=(Q.g=O=h[S+1])*U,A+=(Q.b=D=h[S+2])*U,G+=(Q.a=H=h[S+3])*U,L+=E,p+=O,w+=D,b+=H,Q=Q.next;for(st=rt,F=X,g=0;g<_;g++)h[u+3]=H=G*N>>B,H!==0?(H=255/H,h[u]=(m*N>>B)*H,h[u+1]=(C*N>>B)*H,h[u+2]=(A*N>>B)*H):h[u]=h[u+1]=h[u+2]=0,m-=R,C-=T,A-=x,G-=M,R-=st.r,T-=st.g,x-=st.b,M-=st.a,S=c+((S=g+d+1)<tt?S:tt)<<2,L+=st.r=h[S],p+=st.g=h[S+1],w+=st.b=h[S+2],b+=st.a=h[S+3],m+=L,C+=p,A+=w,G+=b,st=st.next,R+=E=F.r,T+=O=F.g,x+=D=F.b,M+=H=F.a,L-=E,p-=O,w-=D,b-=H,F=F.next,u+=4;c+=_}for(g=0;g<_;g++){for(p=w=b=L=C=A=G=m=0,u=g<<2,R=J*(E=h[u]),T=J*(O=h[u+1]),x=J*(D=h[u+2]),M=J*(H=h[u+3]),m+=nt*E,C+=nt*O,A+=nt*D,G+=nt*H,Q=rt,y=0;y<J;y++)Q.r=E,Q.g=O,Q.b=D,Q.a=H,Q=Q.next;for(P=_,y=1;y<=d;y++)u=P+g<<2,m+=(Q.r=E=h[u])*(U=J-y),C+=(Q.g=O=h[u+1])*U,A+=(Q.b=D=h[u+2])*U,G+=(Q.a=H=h[u+3])*U,L+=E,p+=O,w+=D,b+=H,Q=Q.next,y<W&&(P+=_);for(u=g,st=rt,F=X,f=0;f<v;f++)S=u<<2,h[S+3]=H=G*N>>B,H>0?(H=255/H,h[S]=(m*N>>B)*H,h[S+1]=(C*N>>B)*H,h[S+2]=(A*N>>B)*H):h[S]=h[S+1]=h[S+2]=0,m-=R,C-=T,A-=x,G-=M,R-=st.r,T-=st.g,x-=st.b,M-=st.a,S=g+((S=f+J)<W?S:W)*_<<2,m+=L+=st.r=h[S],C+=p+=st.g=h[S+1],A+=w+=st.b=h[S+2],G+=b+=st.a=h[S+3],st=st.next,R+=E=F.r,T+=O=F.g,x+=D=F.b,M+=H=F.a,L-=E,p-=O,w-=D,b-=H,F=F.next,u+=_}}const a=function(d){const h=Math.round(this.blurRadius());h>0&&o(d,h)};return ii.Blur=a,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ii}var ni={},Ns;function hc(){if(Ns)return ni;Ns=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Brighten=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=this.brightness()*255,o=r.data,a=o.length;for(let l=0;l<a;l+=4)o[l]+=s,o[l+1]+=s,o[l+2]+=s};return ni.Brighten=n,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ni}var ri={},Gs;function cc(){if(Gs)return ri;Gs=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Contrast=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=Math.pow((this.contrast()+100)/100,2),o=r.data,a=o.length;let l=150,d=150,h=150;for(let _=0;_<a;_+=4)l=o[_],d=o[_+1],h=o[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,d/=255,d-=.5,d*=s,d+=.5,d*=255,h/=255,h-=.5,h*=s,h+=.5,h*=255,l=l<0?0:l>255?255:l,d=d<0?0:d>255?255:d,h=h<0?0:h>255?255:h,o[_]=l,o[_+1]=d,o[_+2]=h};return ri.Contrast=n,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ri}var si={},Ls;function dc(){if(Ls)return si;Ls=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Emboss=void 0;const t=ft(),e=Tt(),i=wt(),n=gt(),r=function(s){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,l=this.embossDirection(),d=this.embossBlend(),h=s.data,_=s.width,v=s.height,g=_*4;let f=0,y=0,S=v;switch(l){case"top-left":f=-1,y=-1;break;case"top":f=-1,y=0;break;case"top-right":f=-1,y=1;break;case"right":f=0,y=1;break;case"bottom-right":f=1,y=1;break;case"bottom":f=1,y=0;break;case"bottom-left":f=1,y=-1;break;case"left":f=0,y=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const P=(S-1)*g;let u=f;S+u<1&&(u=0),S+u>v&&(u=0);const c=(S-1+u)*_*4;let m=_;do{const C=P+(m-1)*4;let A=y;m+A<1&&(A=0),m+A>_&&(A=0);const G=c+(m-1+A)*4,R=h[C]-h[G],T=h[C+1]-h[G+1],x=h[C+2]-h[G+2];let M=R;const L=M>0?M:-M,p=T>0?T:-T,w=x>0?x:-x;if(p>L&&(M=T),w>L&&(M=x),M*=o,d){const b=h[C]+M,E=h[C+1]+M,O=h[C+2]+M;h[C]=b>255?255:b<0?0:b,h[C+1]=E>255?255:E<0?0:E,h[C+2]=O>255?255:O<0?0:O}else{let b=a-M;b<0?b=0:b>255&&(b=255),h[C]=h[C+1]=h[C+2]=b}}while(--m)}while(--S)};return si.Emboss=r,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),si}var oi={},Ds;function uc(){if(Ds)return oi;Ds=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Enhance=void 0;const t=ft(),e=Tt(),i=gt();function n(s,o,a,l,d){const h=a-o,_=d-l;if(h===0)return l+_/2;if(_===0)return l;let v=(s-o)/h;return v=_*v+l,v}const r=function(s){const o=s.data,a=o.length;let l=o[0],d=l,h,_=o[1],v=_,g,f=o[2],y=f,S;const P=this.enhance();if(P===0)return;for(let M=0;M<a;M+=4)h=o[M+0],h<l?l=h:h>d&&(d=h),g=o[M+1],g<_?_=g:g>v&&(v=g),S=o[M+2],S<f?f=S:S>y&&(y=S);d===l&&(d=255,l=0),v===_&&(v=255,_=0),y===f&&(y=255,f=0);let u,c,m,C,A,G,R,T,x;P>0?(c=d+P*(255-d),m=l-P*(l-0),A=v+P*(255-v),G=_-P*(_-0),T=y+P*(255-y),x=f-P*(f-0)):(u=(d+l)*.5,c=d+P*(d-u),m=l+P*(l-u),C=(v+_)*.5,A=v+P*(v-C),G=_+P*(_-C),R=(y+f)*.5,T=y+P*(y-R),x=f+P*(f-R));for(let M=0;M<a;M+=4)o[M+0]=n(o[M+0],l,d,m,c),o[M+1]=n(o[M+1],_,v,G,A),o[M+2]=n(o[M+2],f,y,x,T)};return oi.Enhance=r,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),oi}var ai={},Is;function fc(){if(Is)return ai;Is=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Grayscale=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4){const s=.34*i[r]+.5*i[r+1]+.16*i[r+2];i[r]=s,i[r+1]=s,i[r+2]=s}};return ai.Grayscale=t,ai}var li={},Us;function gc(){if(Us)return li;Us=1,Object.defineProperty(li,"__esModule",{value:!0}),li.HSL=void 0;const t=ft(),e=Tt(),i=gt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const n=function(r){const s=r.data,o=s.length,a=1,l=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,h=this.luminance()*127,_=a*l*Math.cos(d*Math.PI/180),v=a*l*Math.sin(d*Math.PI/180),g=.299*a+.701*_+.167*v,f=.587*a-.587*_+.33*v,y=.114*a-.114*_-.497*v,S=.299*a-.299*_-.328*v,P=.587*a+.413*_+.035*v,u=.114*a-.114*_+.293*v,c=.299*a-.3*_+1.25*v,m=.587*a-.586*_-1.05*v,C=.114*a+.886*_-.2*v;let A,G,R,T;for(let x=0;x<o;x+=4)A=s[x+0],G=s[x+1],R=s[x+2],T=s[x+3],s[x+0]=g*A+f*G+y*R+h,s[x+1]=S*A+P*G+u*R+h,s[x+2]=c*A+m*G+C*R+h,s[x+3]=T};return li.HSL=n,li}var hi={},Bs;function pc(){if(Bs)return hi;Bs=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.HSV=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=r.data,o=s.length,a=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,h=a*l*Math.cos(d*Math.PI/180),_=a*l*Math.sin(d*Math.PI/180),v=.299*a+.701*h+.167*_,g=.587*a-.587*h+.33*_,f=.114*a-.114*h-.497*_,y=.299*a-.299*h-.328*_,S=.587*a+.413*h+.035*_,P=.114*a-.114*h+.293*_,u=.299*a-.3*h+1.25*_,c=.587*a-.586*h-1.05*_,m=.114*a+.886*h-.2*_;let C,A,G,R;for(let T=0;T<o;T+=4)C=s[T+0],A=s[T+1],G=s[T+2],R=s[T+3],s[T+0]=v*C+g*A+f*G,s[T+1]=y*C+S*A+P*G,s[T+2]=u*C+c*A+m*G,s[T+3]=R};return hi.HSV=n,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),hi}var ci={},Vs;function _c(){if(Vs)return ci;Vs=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Invert=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return ci.Invert=t,ci}var di={},Hs;function mc(){if(Hs)return di;Hs=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Kaleidoscope=void 0;const t=ft(),e=Tt(),i=wt(),n=gt(),r=function(a,l,d){const h=a.data,_=l.data,v=a.width,g=a.height,f=d.polarCenterX||v/2,y=d.polarCenterY||g/2;let S=Math.sqrt(f*f+y*y),P=v-f,u=g-y;const c=Math.sqrt(P*P+u*u);S=c>S?c:S;const m=g,C=v,A=360/C*Math.PI/180;for(let G=0;G<C;G+=1){const R=Math.sin(G*A),T=Math.cos(G*A);for(let x=0;x<m;x+=1){P=Math.floor(f+S*x/m*T),u=Math.floor(y+S*x/m*R);let M=(u*v+P)*4;const L=h[M+0],p=h[M+1],w=h[M+2],b=h[M+3];M=(G+x*v)*4,_[M+0]=L,_[M+1]=p,_[M+2]=w,_[M+3]=b}}},s=function(a,l,d){const h=a.data,_=l.data,v=a.width,g=a.height,f=d.polarCenterX||v/2,y=d.polarCenterY||g/2;let S=Math.sqrt(f*f+y*y),P=v-f,u=g-y;const c=Math.sqrt(P*P+u*u);S=c>S?c:S;const m=g,C=v,A=0;let G,R;for(P=0;P<v;P+=1)for(u=0;u<g;u+=1){const T=P-f,x=u-y,M=Math.sqrt(T*T+x*x)*m/S;let L=(Math.atan2(x,T)*180/Math.PI+360+A)%360;L=L*C/360,G=Math.floor(L),R=Math.floor(M);let p=(R*v+G)*4;const w=h[p+0],b=h[p+1],E=h[p+2],O=h[p+3];p=(u*v+P)*4,_[p+0]=w,_[p+1]=b,_[p+2]=E,_[p+3]=O}},o=function(a){const l=a.width,d=a.height;let h,_,v,g,f,y,S,P,u,c,m=Math.round(this.kaleidoscopePower());const C=Math.round(this.kaleidoscopeAngle()),A=Math.floor(l*(C%360)/360);if(m<1)return;const G=i.Util.createCanvasElement();G.width=l,G.height=d;const R=G.getContext("2d").getImageData(0,0,l,d);i.Util.releaseCanvas(G),r(a,R,{polarCenterX:l/2,polarCenterY:d/2});let T=l/Math.pow(2,m);for(;T<=8;)T=T*2,m-=1;T=Math.ceil(T);let x=T,M=0,L=x,p=1;for(A+T>l&&(M=x,L=0,p=-1),_=0;_<d;_+=1)for(h=M;h!==L;h+=p)v=Math.round(h+A)%l,u=(l*_+v)*4,f=R.data[u+0],y=R.data[u+1],S=R.data[u+2],P=R.data[u+3],c=(l*_+h)*4,R.data[c+0]=f,R.data[c+1]=y,R.data[c+2]=S,R.data[c+3]=P;for(_=0;_<d;_+=1)for(x=Math.floor(T),g=0;g<m;g+=1){for(h=0;h<x+1;h+=1)u=(l*_+h)*4,f=R.data[u+0],y=R.data[u+1],S=R.data[u+2],P=R.data[u+3],c=(l*_+x*2-h-1)*4,R.data[c+0]=f,R.data[c+1]=y,R.data[c+2]=S,R.data[c+3]=P;x*=2}s(R,a,{})};return di.Kaleidoscope=o,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),di}var ui={},Ws;function yc(){if(Ws)return ui;Ws=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Mask=void 0;const t=ft(),e=Tt(),i=gt();function n(v,g,f){let y=(f*v.width+g)*4;const S=[];return S.push(v.data[y++],v.data[y++],v.data[y++],v.data[y++]),S}function r(v,g){return Math.sqrt(Math.pow(v[0]-g[0],2)+Math.pow(v[1]-g[1],2)+Math.pow(v[2]-g[2],2))}function s(v){const g=[0,0,0];for(let f=0;f<v.length;f++)g[0]+=v[f][0],g[1]+=v[f][1],g[2]+=v[f][2];return g[0]/=v.length,g[1]/=v.length,g[2]/=v.length,g}function o(v,g){const f=n(v,0,0),y=n(v,v.width-1,0),S=n(v,0,v.height-1),P=n(v,v.width-1,v.height-1),u=g||10;if(r(f,y)<u&&r(y,P)<u&&r(P,S)<u&&r(S,f)<u){const c=s([y,f,P,S]),m=[];for(let C=0;C<v.width*v.height;C++){const A=r(c,[v.data[C*4],v.data[C*4+1],v.data[C*4+2]]);m[C]=A<u?0:255}return m}}function a(v,g){for(let f=0;f<v.width*v.height;f++)v.data[4*f+3]=g[f]}function l(v,g,f){const y=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),u=[];for(let c=0;c<f;c++)for(let m=0;m<g;m++){const C=c*g+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=c+G-P,x=m+R-P;if(T>=0&&T<f&&x>=0&&x<g){const M=T*g+x,L=y[G*S+R];A+=v[M]*L}}u[C]=A===255*8?255:0}return u}function d(v,g,f){const y=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),u=[];for(let c=0;c<f;c++)for(let m=0;m<g;m++){const C=c*g+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=c+G-P,x=m+R-P;if(T>=0&&T<f&&x>=0&&x<g){const M=T*g+x,L=y[G*S+R];A+=v[M]*L}}u[C]=A>=255*4?255:0}return u}function h(v,g,f){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(y.length)),P=Math.floor(S/2),u=[];for(let c=0;c<f;c++)for(let m=0;m<g;m++){const C=c*g+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=c+G-P,x=m+R-P;if(T>=0&&T<f&&x>=0&&x<g){const M=T*g+x,L=y[G*S+R];A+=v[M]*L}}u[C]=A}return u}const _=function(v){const g=this.threshold();let f=o(v,g);return f&&(f=l(f,v.width,v.height),f=d(f,v.width,v.height),f=h(f,v.width,v.height),a(v,f)),v};return ui.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ui}var fi={},qs;function vc(){if(qs)return fi;qs=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Noise=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=this.noise()*255,o=r.data,a=o.length,l=s/2;for(let d=0;d<a;d+=4)o[d+0]+=l-2*l*Math.random(),o[d+1]+=l-2*l*Math.random(),o[d+2]+=l-2*l*Math.random()};return fi.Noise=n,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),fi}var gi={},js;function bc(){if(js)return gi;js=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Pixelate=void 0;const t=ft(),e=wt(),i=Tt(),n=gt(),r=function(s){let o=Math.ceil(this.pixelSize()),a=s.width,l=s.height,d,h,_,v,g,f,y,S=Math.ceil(a/o),P=Math.ceil(l/o),u,c,m,C,A,G,R,T=s.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(A=0;A<S;A+=1)for(G=0;G<P;G+=1){for(v=0,g=0,f=0,y=0,u=A*o,c=u+o,m=G*o,C=m+o,R=0,d=u;d<c;d+=1)if(!(d>=a))for(h=m;h<C;h+=1)h>=l||(_=(a*h+d)*4,v+=T[_+0],g+=T[_+1],f+=T[_+2],y+=T[_+3],R+=1);for(v=v/R,g=g/R,f=f/R,y=y/R,d=u;d<c;d+=1)if(!(d>=a))for(h=m;h<C;h+=1)h>=l||(_=(a*h+d)*4,T[_+0]=v,T[_+1]=g,T[_+2]=f,T[_+3]=y)}};return gi.Pixelate=r,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),gi}var pi={},Ks;function Sc(){if(Ks)return pi;Ks=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Posterize=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=Math.round(this.levels()*254)+1,o=r.data,a=o.length,l=255/s;for(let d=0;d<a;d+=1)o[d]=Math.floor(o[d]/l)*l};return pi.Posterize=n,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),pi}var _i={},zs;function Cc(){if(zs)return _i;zs=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.RGB=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=r.data,o=s.length,a=this.red(),l=this.green(),d=this.blue();for(let h=0;h<o;h+=4){const _=(.34*s[h]+.5*s[h+1]+.16*s[h+2])/255;s[h]=_*a,s[h+1]=_*l,s[h+2]=_*d,s[h+3]=s[h+3]}};return _i.RGB=n,t.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),_i}var mi={},Ys;function wc(){if(Ys)return mi;Ys=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.RGBA=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=r.data,o=s.length,a=this.red(),l=this.green(),d=this.blue(),h=this.alpha();for(let _=0;_<o;_+=4){const v=1-h;s[_]=a*h+s[_]*v,s[_+1]=l*h+s[_+1]*v,s[_+2]=d*h+s[_+2]*v}};return mi.RGBA=n,t.Factory.addGetterSetter(e.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),mi}var yi={},Xs;function xc(){if(Xs)return yi;Xs=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Sepia=void 0;const t=function(e){const i=e.data,n=i.length;for(let r=0;r<n;r+=4){const s=i[r+0],o=i[r+1],a=i[r+2];i[r+0]=Math.min(255,s*.393+o*.769+a*.189),i[r+1]=Math.min(255,s*.349+o*.686+a*.168),i[r+2]=Math.min(255,s*.272+o*.534+a*.131)}};return yi.Sepia=t,yi}var vi={},$s;function Pc(){if($s)return vi;$s=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Solarize=void 0;const t=function(e){const i=e.data,n=e.width,r=e.height,s=n*4;let o=r;do{const a=(o-1)*s;let l=n;do{const d=a+(l-1)*4;let h=i[d],_=i[d+1],v=i[d+2];h>127&&(h=255-h),_>127&&(_=255-_),v>127&&(v=255-v),i[d]=h,i[d+1]=_,i[d+2]=v}while(--l)}while(--o)};return vi.Solarize=t,vi}var bi={},Js;function Tc(){if(Js)return bi;Js=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Threshold=void 0;const t=ft(),e=Tt(),i=gt(),n=function(r){const s=this.threshold()*255,o=r.data,a=o.length;for(let l=0;l<a;l+=1)o[l]=o[l]<s?0:255};return bi.Threshold=n,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),bi}var Qs;function Ac(){if(Qs)return Ne;Qs=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.Konva=void 0;const t=zh(),e=Yh(),i=$h(),n=Jh(),r=Qh(),s=Zh(),o=tc(),a=oa(),l=br(),d=la(),h=ec(),_=ic(),v=nc(),g=rc(),f=ha(),y=sc(),S=oc(),P=ac(),u=lc(),c=hc(),m=cc(),C=dc(),A=uc(),G=fc(),R=gc(),T=pc(),x=_c(),M=mc(),L=yc(),p=vc(),w=bc(),b=Sc(),E=Cc(),O=wc(),D=xc(),H=Pc(),U=Tc();return Ne.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:n.Circle,Ellipse:r.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:l.Path,Rect:d.Rect,RegularPolygon:h.RegularPolygon,Ring:_.Ring,Sprite:v.Sprite,Star:g.Star,Text:f.Text,TextPath:y.TextPath,Transformer:S.Transformer,Wedge:P.Wedge,Filters:{Blur:u.Blur,Brighten:c.Brighten,Contrast:m.Contrast,Emboss:C.Emboss,Enhance:A.Enhance,Grayscale:G.Grayscale,HSL:R.HSL,HSV:T.HSV,Invert:x.Invert,Kaleidoscope:M.Kaleidoscope,Mask:L.Mask,Noise:p.Noise,Pixelate:w.Pixelate,Posterize:b.Posterize,RGB:E.RGB,RGBA:O.RGBA,Sepia:D.Sepia,Solarize:H.Solarize,Threshold:U.Threshold}}),Ne}var Rc=zi.exports,Zs;function Ec(){if(Zs)return zi.exports;Zs=1,Object.defineProperty(Rc,"__esModule",{value:!0});const t=Ac();return zi.exports=t.Konva,zi.exports}var Fc=Ec();const bt=Wh(Fc);function en(t){if(!bt.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const to={key:!0,style:!0,elm:!0,isRootInsert:!0},kn=".vue-konva-event";function ca(t,e,i,n){const r=t.__konvaNode,s={};let o=!1;for(let a in i){if(to.hasOwnProperty(a))continue;const l=a.slice(0,2)==="on",d=i[a]!==e[a];if(l&&d){let h=a.slice(2).toLowerCase();h.slice(0,7)==="content"&&(h="content"+h.slice(7,1).toUpperCase()+h.slice(8)),r==null||r.off(h+kn,i[a])}!e.hasOwnProperty(a)&&(r==null||r.setAttr(a,void 0))}for(let a in e){if(to.hasOwnProperty(a))continue;let l=a.slice(0,2)==="on";const d=i[a]!==e[a];if(l&&d){let h=a.slice(2).toLowerCase();h.slice(0,7)==="content"&&(h="content"+h.slice(7,1).toUpperCase()+h.slice(8)),e[a]&&(r==null||r.off(h+kn),r==null||r.on(h+kn,e[a]))}!l&&(e[a]!==i[a]||n&&e[a]!==(r==null?void 0:r.getAttr(a)))&&(o=!0,s[a]=e[a])}o&&r&&(r.setAttrs(s),en(r))}const Mc="v";function Oc(t){function e(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function da(t){return t.component?t.component.__konvaNode||da(t.component.subTree):null}function kc(t){const{el:e,component:i}=t,n=da(t);if(e!=null&&e.tagName&&i&&!n){const r=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${r}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return n}function Nc(t){const e=r=>!!(r!=null&&r.hasOwnProperty("component")),i=r=>Array.isArray(r),n=r=>e(r)?[r,...n(r.children)]:i(r)?r.flatMap(n):[];return n(t.children)}function ua(t,e){const i=Nc(t),n=[];i.forEach(s=>{const o=kc(s);o&&n.push(o)});let r=!1;n.forEach((s,o)=>{s.getZIndex()!==o&&(s.setZIndex(o),r=!0)}),r&&en(e)}const Gc=Ui({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:n}){const r=Qo();if(!r)return;const s=Di({}),o=$a(null),a=new bt.Stage({width:t.config.width,height:t.config.height,container:document.createElement("div")});r.__konvaNode=a,h();function l(){return r==null?void 0:r.__konvaNode}function d(){return r==null?void 0:r.__konvaNode}function h(){if(!r)return;const _=s||{},v={...e,...t.config};ca(r,v,_,t.__useStrictMode),Object.assign(s,v)}return cr(()=>{o.value&&(o.value.innerHTML="",a.container(o.value)),h()}),dr(()=>{h(),ua(r.subTree,a)}),Eo(()=>{a.destroy()}),Ei(()=>t.config,h,{deep:!0}),n({getStage:d,getNode:l}),console.log(e),()=>{var _;return ea("div",{ref:o,style:e==null?void 0:e.style},(_=i.default)==null?void 0:_.call(i))}}}),Lc=".vue-konva-event",Dc={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function Ic(t,e){return Ui({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:n,slots:r,expose:s}){const o=Qo();if(!o)return;const a=Di({}),l=new e;o.__konvaNode=l,o.vnode.__konvaNode=l,_();function d(){return o==null?void 0:o.__konvaNode}function h(){return o==null?void 0:o.__konvaNode}function _(){if(!o)return;const g={};for(const S in o==null?void 0:o.vnode.props)S.slice(0,2)==="on"&&(g[S]=o.vnode.props[S]);const f=a||{},y={...n,...i.config,...g};ca(o,y,f,i.__useStrictMode),Object.assign(a,y)}cr(()=>{var g;const f=(g=Oc(o))==null?void 0:g.__konvaNode;f&&"add"in f&&f.add(l),en(l)}),ur(()=>{en(l),l.destroy(),l.off(Lc)}),dr(()=>{_(),ua(o.subTree,l)}),Ei(()=>i.config,_,{deep:!0}),s({getStage:h,getNode:d});const v=Dc.hasOwnProperty(t);return()=>{var g;return v?ea("template",{},(g=r.default)==null?void 0:g.call(r)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const Uc={install:(t,e)=>{const i=(e==null?void 0:e.prefix)||Mc,n={Arc:bt.Arc,Arrow:bt.Arrow,Circle:bt.Circle,Ellipse:bt.Ellipse,FastLayer:bt.FastLayer,Group:bt.Group,Image:bt.Image,Label:bt.Label,Layer:bt.Layer,Line:bt.Line,Path:bt.Path,Rect:bt.Rect,RegularPolygon:bt.RegularPolygon,Ring:bt.Ring,Shape:bt.Shape,Sprite:bt.Sprite,Star:bt.Star,Tag:bt.Tag,Text:bt.Text,TextPath:bt.TextPath,Transformer:bt.Transformer,Wedge:bt.Wedge,...e==null?void 0:e.customNodes};[Gc,...Object.entries(n).map(([r,s])=>Ic(r,s))].forEach(r=>{t.component(`${i}${r.name}`,r)})}};Dh(Hh).use(Uc).mount("#app");
